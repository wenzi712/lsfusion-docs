"use strict";(self.webpackChunkls_fusion_docs=self.webpackChunkls_fusion_docs||[]).push([["91610"],{75039:function(r,n,e){e.r(n),e.d(n,{metadata:()=>i,default:()=>E,frontMatter:()=>l,contentTitle:()=>s,toc:()=>c,assets:()=>t});var i=JSON.parse('{"id":"How-to_Data_import","title":"\u6570\u636E\u5BFC\u5165","description":"\u793A\u4F8B 1","source":"@site/i18n/zh-CN/docusaurus-plugin-content-docs/current/How-to_Data_import.md","sourceDirName":".","slug":"/How-to_Data_import","permalink":"/How-to_Data_import","draft":false,"unlisted":false,"editUrl":"https://github.com/lsfusion/platform/edit/master/docs/zh-CN/How-to_Data_import.md","tags":[],"version":"current","lastUpdatedAt":null,"frontMatter":{"title":"\u6570\u636E\u5BFC\u5165"},"sidebar":"learn","previous":{"title":"\u6570\u636E\u5BFC\u51FA","permalink":"/How-to_Data_export"},"next":{"title":"\u901A\u8FC7HTTP\u534F\u8BAE\u4EA4\u4E92","permalink":"/How-to_Interaction_via_HTTP_protocol"}}'),d=e(74848),o=e(28453);let l={title:"\u6570\u636E\u5BFC\u5165"},s,t={},c=[{value:"\u793A\u4F8B 1",id:"\u793A\u4F8B-1",level:2},{value:"\u4EFB\u52A1",id:"\u4EFB\u52A1",level:3},{value:"\u89E3\u51B3\u65B9\u6848",id:"\u89E3\u51B3\u65B9\u6848",level:3},{value:"\u793A\u4F8B 2",id:"\u793A\u4F8B-2",level:2},{value:"\u4EFB\u52A1",id:"\u4EFB\u52A1-1",level:3},{value:"\u89E3\u51B3\u65B9\u6848",id:"\u89E3\u51B3\u65B9\u6848-1",level:3},{value:"\u793A\u4F8B 3",id:"\u793A\u4F8B-3",level:2},{value:"\u4EFB\u52A1",id:"\u4EFB\u52A1-2",level:3},{value:"\u89E3\u51B3\u65B9\u6848",id:"\u89E3\u51B3\u65B9\u6848-2",level:3},{value:"\u793A\u4F8B 4",id:"\u793A\u4F8B-4",level:2},{value:"\u4EFB\u52A1",id:"\u4EFB\u52A1-3",level:3},{value:"\u89E3\u51B3\u65B9\u6848",id:"\u89E3\u51B3\u65B9\u6848-3",level:3}];function a(r){let n={a:"a",code:"code",h2:"h2",h3:"h3",p:"p",pre:"pre",strong:"strong",...(0,o.R)(),...r.components};return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(n.h2,{id:"\u793A\u4F8B-1",children:"\u793A\u4F8B 1"}),"\n",(0,d.jsx)(n.h3,{id:"\u4EFB\u52A1",children:"\u4EFB\u52A1"}),"\n",(0,d.jsx)(n.p,{children:"\u6211\u4EEC\u6709\u5B9A\u4E49\u4E86\u540D\u79F0\u548C\u4EF7\u683C\u7684\u4E66\u7C4D\u3002\u8BA2\u5355\u903B\u8F91\u4E5F\u5DF2\u5B9A\u4E49\u3002"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-lsf",children:"REQUIRE Utils;\r\n\r\nCLASS Book '\u4E66\u7C4D';\r\nname '\u540D\u79F0' = DATA ISTRING[100] (Book) IN id;\r\n\r\nid '\u4EE3\u7801' = DATA STRING[20] (Book) IN id;\r\nbook '\u4E66\u7C4D' (STRING[20] id) = GROUP AGGR Book b BY id(b);\r\n\r\nCLASS Order '\u8BA2\u5355';\r\ndate '\u65E5\u671F' = DATA DATE (Order);\r\nnumber '\u7F16\u53F7' = DATA STRING[10] (Order);\r\n\r\nCLASS OrderDetail '\u8BA2\u5355\u884C';\r\norder '\u8BA2\u5355' = DATA Order (OrderDetail) NONULL DELETE;\r\n\r\nbook '\u4E66\u7C4D' = DATA Book (OrderDetail) NONULL;\r\nnameBook '\u4E66\u7C4D' (OrderDetail d) = name(book(d));\r\n\r\nquantity '\u6570\u91CF' = DATA INTEGER (OrderDetail);\r\nprice '\u4EF7\u683C' = DATA NUMERIC[14,2] (OrderDetail);\r\n\r\nFORM order '\u8BA2\u5355'\r\n    OBJECTS o = Order PANEL\r\n    PROPERTIES(o) date, number\r\n\r\n    OBJECTS d = OrderDetail\r\n    PROPERTIES(d) nameBook, quantity, price, NEW, DELETE\r\n    FILTERS order(d) == o\r\n\r\n    EDIT Order OBJECT o\r\n;\r\n\r\nFORM orders '\u8BA2\u5355\u5217\u8868'\r\n    OBJECTS o = Order\r\n    PROPERTIES(o) READONLY date, number\r\n    PROPERTIES(o) NEWSESSION NEW, EDIT, DELETE\r\n;\r\n\r\nNAVIGATOR {\r\n    NEW orders;\r\n}\n"})}),"\n",(0,d.jsx)(n.p,{children:"\u6211\u4EEC\u9700\u8981\u521B\u5EFA\u4E00\u4E2A\u6309\u94AE\uFF0C\u4ECE\u7528\u6237\u5728\u5176\u8BA1\u7B97\u673A\u4E0A\u9009\u62E9\u7684Excel\u6587\u4EF6\u52A0\u8F7D\u8BA2\u5355\u5185\u5BB9\u3002"}),"\n",(0,d.jsx)(n.h3,{id:"\u89E3\u51B3\u65B9\u6848",children:"\u89E3\u51B3\u65B9\u6848"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-lsf",children:"importXlsx '\u4ECEXLS\u5BFC\u5165' (Order o)  {\r\n    INPUT f = EXCELFILE DO {\r\n\r\n        LOCAL bookId = STRING[20] (INTEGER);\r\n        LOCAL quantity = INTEGER (INTEGER);\r\n        LOCAL price = NUMERIC[14,2] (INTEGER);\r\n\r\n        IMPORT XLS FROM f TO bookId = A, quantity = B, price = C;\r\n\r\n        FOR imported(INTEGER i) NEW d = OrderDetail DO {\r\n            order(d) <- o;\r\n\r\n            book(d) <- book(bookId(i));\r\n            quantity(d) <- quantity(i);\r\n            price(d) <- price(i);\r\n        }\r\n    }\r\n}\r\n\r\nEXTEND FORM order\r\n    PROPERTIES(o) importXlsx\r\n;\n"})}),"\n",(0,d.jsxs)(n.p,{children:["\u8BF7\u6C42\u6587\u4EF6\u7684",(0,d.jsxs)(n.a,{href:"/INPUT_operator",children:[(0,d.jsx)(n.code,{children:"INPUT"}),"\u64CD\u4F5C\u7B26"]}),"\u5C06\u663E\u793A\u4E00\u4E2A\u5BF9\u8BDD\u6846\uFF0C\u7528\u6237\u53EF\u4EE5\u5728\u5176\u4E2D\u9009\u62E9.xls\u6216.xlsx\u6587\u4EF6\u3002\u4E00\u65E6\u6587\u4EF6\u9009\u62E9\u6210\u529F\uFF0C\u7CFB\u7EDF\u5C06\u8C03\u7528",(0,d.jsx)(n.code,{children:"DO"}),"\u540E\u6307\u5B9A\u7684",(0,d.jsx)(n.a,{href:"/Actions",children:"\u64CD\u4F5C"}),"\u3002"]}),"\n",(0,d.jsxs)(n.p,{children:["\u5047\u8BBE\u6587\u4EF6\u7531\u4E09\u5217\u7EC4\u6210\u3002\u7B2C\u4E00\u5217",(0,d.jsx)(n.code,{children:"A"}),"\u5305\u542B\u4E66\u7C4D\u4EE3\u7801\uFF0C\u7B2C\u4E8C\u5217",(0,d.jsx)(n.code,{children:"B"}),"\u5305\u542B\u6570\u91CF\uFF0C\u7B2C\u4E09\u5217",(0,d.jsx)(n.code,{children:"C"}),"\u5305\u542B\u4EF7\u683C\u3002"]}),"\n",(0,d.jsxs)(n.p,{children:[(0,d.jsxs)(n.a,{href:"/IMPORT_operator",children:[(0,d.jsx)(n.code,{children:"IMPORT"}),"\u64CD\u4F5C\u7B26"]}),"\u8BFB\u53D6\u9009\u5B9A\u7684\u6587\u4EF6\uFF0C\u7136\u540E\u5C06\u5176\u5185\u5BB9\u5199\u5165\u672C\u5730\u5C5E\u6027\uFF0C\u8FD9\u4E9B\u5C5E\u6027\u53EA\u63A5\u53D7\u4E00\u4E2A\u53C2\u6570\u2014\u2014\u884C\u53F7\u3002\u7F16\u53F7\u4ECE0\u5F00\u59CB\u3002\u5982\u679C\u6587\u4EF6\u5305\u542B\u5177\u6709\u76F8\u5E94\u7F16\u53F7\u7684\u884C\uFF0C",(0,d.jsx)(n.code,{children:"imported"}),"\u5C5E\u6027\u5C06\u8BBE\u7F6E\u4E3A",(0,d.jsx)(n.code,{children:"TRUE"}),"\u3002\u7136\u540E\uFF0C\u4E3A\u6BCF\u4E2A\u8FD9\u4E9B\u884C\u5728\u8BA2\u5355\u4E2D\u521B\u5EFA\u76F8\u5E94\u7684\u884C\u3002"]}),"\n",(0,d.jsx)(n.h2,{id:"\u793A\u4F8B-2",children:"\u793A\u4F8B 2"}),"\n",(0,d.jsx)(n.h3,{id:"\u4EFB\u52A1-1",children:"\u4EFB\u52A1"}),"\n",(0,d.jsxs)(n.p,{children:["\u7C7B\u4F3C\u4E8E",(0,d.jsx)(n.a,{href:"#example-1",children:(0,d.jsx)(n.strong,{children:"\u793A\u4F8B1"})}),"\u3002\u6B64\u5916\uFF0C\u6211\u4EEC\u5DF2\u7ECF\u6307\u5B9A\u4E86\u4E00\u4E2A\u76EE\u5F55\uFF0C\u5916\u90E8\u7CFB\u7EDF\u5C06\u8BA2\u5355\u653E\u5165\u8BE5\u76EE\u5F55\u3002\u5BF9\u4E8E\u6BCF\u4E2A\u8BA2\u5355\uFF0C\u4F1A\u751F\u6210\u4E00\u4E2A\u5355\u72EC\u7684CSV\u6587\u4EF6\uFF0C\u7528\u4E8E\u4EE5\u975E\u89C4\u8303\u5316\u5F62\u5F0F\u5B58\u50A8\u8BA2\u5355\u65E5\u671F\u548C\u7F16\u53F7\uFF0C\u4EE5\u53CA\u4E66\u7C4D\u4EE3\u7801\u3001\u6570\u91CF\u548C\u4EF7\u683C\u3002"]}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-lsf",children:"serverDirectory '\u5E94\u4ECE\u5176\u5BFC\u5165\u8BA2\u5355\u7684\u670D\u52A1\u5668\u76EE\u5F55' = DATA STRING[100] ();\r\n\r\nEXTEND FORM orders PROPERTIES() serverDirectory;\n"})}),"\n",(0,d.jsx)(n.p,{children:"\u6211\u4EEC\u9700\u8981\u5B9E\u73B0\u4E00\u4E2A\u64CD\u4F5C\uFF0C\u5C06\u8BA2\u5355\u4ECE\u8BE5\u6587\u4EF6\u5939\u5BFC\u5165\u5230\u7CFB\u7EDF\u4E2D\u3002"}),"\n",(0,d.jsx)(n.h3,{id:"\u89E3\u51B3\u65B9\u6848-1",children:"\u89E3\u51B3\u65B9\u6848"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-lsf",children:"importOrders '\u4ECE\u76EE\u5F55\u5BFC\u5165\u8BA2\u5355' ()  {\r\n\r\n    listFiles('file://' + serverDirectory());\r\n\r\n    FOR ISTRING[255] f = fileName(INTEGER j) AND NOT fileIsDirectory(j) DO NEWSESSION {\r\n\r\n        LOCAL file = FILE ();\r\n        READ 'file://' + serverDirectory() + '/' + f TO file;\r\n\r\n        LOCAL date = DATE (INTEGER);\r\n        LOCAL number = STRING[10] (INTEGER);\r\n\r\n        LOCAL bookId = STRING[20] (INTEGER);\r\n        LOCAL quantity = INTEGER (INTEGER);\r\n        LOCAL price = NUMERIC[14,2] (INTEGER);\r\n\r\n        IMPORT CSV '|' NOHEADER CHARSET 'CP1251' FROM file() TO date, number, bookId, quantity, price;\r\n\r\n        NEW o = Order {\r\n            date(o) <- date(0);\r\n            number(o) <- number(0);\r\n\r\n            FOR imported(INTEGER i) NEW d = OrderDetail DO {\r\n                order(d) <- o;\r\n\r\n                book(d) <- book(bookId(i));\r\n                quantity(d) <- quantity(i);\r\n                price(d) <- price(i);\r\n            }\r\n        }\r\n\r\n        APPLY;\r\n        move('file://' + serverDirectory() + '/' + f, 'file://' + serverDirectory() + '/' + (IF canceled() THEN 'error/' ELSE 'success/') + f);\r\n    }\r\n}\r\n\r\nEXTEND FORM orders PROPERTIES() importOrders;\n"})}),"\n",(0,d.jsxs)(n.p,{children:[(0,d.jsx)(n.code,{children:"listFiles"}),"\u64CD\u4F5C\u5728",(0,d.jsx)(n.code,{children:"Utils"}),"\u7CFB\u7EDF",(0,d.jsx)(n.a,{href:"/Modules",children:"\u6A21\u5757"}),"\u4E2D\u58F0\u660E\u3002\u8BE5\u64CD\u4F5C\u626B\u63CF\u53C2\u6570\u4E2D\u6307\u5B9A\u7684\u6587\u4EF6\u5939\uFF0C\u8BFB\u53D6\u5176\u4E2D\u7684\u6240\u6709\u6587\u4EF6\uFF0C\u5E76\u5C06\u5176\u5185\u5BB9\u5199\u5165",(0,d.jsx)(n.code,{children:"fileName"}),"\u548C",(0,d.jsx)(n.code,{children:"fileIsDirectory"}),"\u5C5E\u6027\u3002"]}),"\n",(0,d.jsxs)(n.p,{children:[(0,d.jsxs)(n.a,{href:"/READ_operator",children:[(0,d.jsx)(n.code,{children:"READ"}),"\u64CD\u4F5C\u7B26"]}),"\u8BFB\u53D6\u6307\u5B9A\u7684\u6587\u4EF6\uFF0C\u5E76\u5C06\u5176\u5185\u5BB9\u5199\u5165",(0,d.jsx)(n.code,{children:"FILE"}),"\u7C7B\u578B\u7684\u672C\u5730\u5C5E\u6027\uFF0C\u7136\u540E\u7531",(0,d.jsx)(n.code,{children:"IMPORT"}),"\u64CD\u4F5C\u7B26\u5904\u7406\u3002\u5176\u53C2\u6570\u6307\u5B9A\u6587\u4EF6\u683C\u5F0F\u4E3ACSV\uFF0C\u7B2C\u4E00\u884C\u6CA1\u6709\u6807\u9898\uFF0C\u5206\u9694\u7B26\u4E3A\u7AD6\u7EBF\uFF0C\u7F16\u7801\u4E3ACP1251\u3002"]}),"\n",(0,d.jsx)(n.p,{children:"\u5047\u8BBE\u6BCF\u884C\u4E2D\u7684\u65E5\u671F\u548C\u7F16\u53F7\u5C06\u5177\u6709\u76F8\u540C\u7684\u503C\u3002\u8FD9\u5C31\u662F\u4E3A\u4EC0\u4E48\u5B83\u4EEC\u7684\u503C\u662F\u4ECE\u7F16\u53F7\u4E3A0\u7684\u7B2C\u4E00\u884C\u8BFB\u53D6\u7684\u3002"}),"\n",(0,d.jsxs)(n.p,{children:["\u6BCF\u4E2A\u6587\u4EF6\u5728\u5355\u72EC\u7684\u65B0",(0,d.jsx)(n.a,{href:"/Change_sessions",children:"\u66F4\u6539\u4F1A\u8BDD"}),"\u4E2D\u5904\u7406\uFF0C\u7136\u540E\u4F7F\u7528",(0,d.jsxs)(n.a,{href:"/APPLY_operator",children:[(0,d.jsx)(n.code,{children:"APPLY"}),"\u64CD\u4F5C\u7B26"]}),"\u4FDD\u5B58\u3002\u5F53\u67D0\u4E9B",(0,d.jsx)(n.a,{href:"/Constraints",children:"\u7EA6\u675F"}),"\u88AB\u8FDD\u53CD\u65F6\uFF0C\u6B64\u64CD\u4F5C\u7B26\u4F1A\u5C06",(0,d.jsx)(n.code,{children:"TRUE"}),"\u5199\u5165",(0,d.jsx)(n.code,{children:"canceled"}),"\u5C5E\u6027\u3002\u7136\u540E\uFF0C",(0,d.jsx)(n.code,{children:"READ"}),"\u64CD\u4F5C\u7B26\u7684",(0,d.jsx)(n.code,{children:"MOVE"}),"\u8BED\u53E5\u5C06\u6587\u4EF6\u79FB\u52A8\u5230",(0,d.jsx)(n.code,{children:"success"}),"\u6587\u4EF6\u5939\u6216",(0,d.jsx)(n.code,{children:"error"}),"\u6587\u4EF6\u5939\u3002\u8FD9\u5141\u8BB8\u6211\u4EEC\u518D\u6B21\u8C03\u7528\u8BE5\u64CD\u4F5C\uFF0C\u800C\u4E0D\u4F1A\u591A\u6B21\u5904\u7406\u76F8\u540C\u7684\u8BA2\u5355\u3002"]}),"\n",(0,d.jsx)(n.p,{children:"\u7531\u4E8E\u7ED3\u679C\u64CD\u4F5C\u6CA1\u6709\u53C2\u6570\uFF0C\u6211\u4EEC\u53EF\u4EE5\u5C06\u5176\u6DFB\u52A0\u5230\u8C03\u5EA6\u7A0B\u5E8F\u4E2D\uFF0C\u4EE5\u4FBF\u5728\u7279\u5B9A\u65F6\u95F4\u95F4\u9694\u81EA\u52A8\u542F\u52A8\u3002"}),"\n",(0,d.jsx)(n.h2,{id:"\u793A\u4F8B-3",children:"\u793A\u4F8B 3"}),"\n",(0,d.jsx)(n.h3,{id:"\u4EFB\u52A1-2",children:"\u4EFB\u52A1"}),"\n",(0,d.jsxs)(n.p,{children:["\u7C7B\u4F3C\u4E8E",(0,d.jsx)(n.a,{href:"#example-1",children:(0,d.jsx)(n.strong,{children:"\u793A\u4F8B1"})}),"\u3002"]}),"\n",(0,d.jsx)(n.p,{children:"\u5916\u90E8\u6570\u636E\u5E93\u5B58\u50A8\u4E66\u7C4D\u76EE\u5F55\uFF0C\u5305\u62EC\u5176\u4EE3\u7801\u548C\u540D\u79F0\u3002"}),"\n",(0,d.jsx)(n.p,{children:"\u6211\u4EEC\u9700\u8981\u521B\u5EFA\u4E00\u4E2A\u64CD\u4F5C\uFF0C\u5C06\u4E66\u7C4D\u76EE\u5F55\u4E0E\u6B64\u5916\u90E8\u6570\u636E\u5E93\u540C\u6B65\u3002"}),"\n",(0,d.jsx)(n.h3,{id:"\u89E3\u51B3\u65B9\u6848-2",children:"\u89E3\u51B3\u65B9\u6848"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-lsf",children:"importBooks '\u5BFC\u5165\u4E66\u7C4D' ()  {\r\n    LOCAL file = FILE ();\r\n    READ 'jdbc:sqlserver://localhost;databaseName=books;User=import;Password=password@SELECT id, name FROM books' TO file;\r\n\r\n    LOCAL id = STRING[20] (INTEGER);\r\n    LOCAL name = ISTRING[100] (INTEGER);\r\n    IMPORT TABLE FROM file() TO id, name;\r\n\r\n    // \u521B\u5EFA\u65B0\u4E66\u7C4D\r\n    FOR id(INTEGER i) AND NOT book(id(i)) NEW b = Book DO {\r\n        id(b) <- id(i);\r\n    }\r\n\r\n    // \u66F4\u6539\u503C\r\n    FOR id(Book b) == id(INTEGER i) DO {\r\n        name(b) <- name(i);\r\n    }\r\n\r\n    // \u5220\u9664\u4E66\u7C4D\r\n    DELETE Book b WHERE b IS Book AND NOT [ GROUP SUM 1 BY id(INTEGER i)](id(b));\r\n}\n"})}),"\n",(0,d.jsx)(n.p,{children:"\u540C\u6B65\u7531\u4E09\u4E2A\u4E3B\u8981\u64CD\u4F5C\u7EC4\u6210\u3002\u9996\u5148\uFF0C\u6211\u4EEC\u521B\u5EFA\u4EE3\u7801\u53EF\u4EE5\u5728\u5916\u90E8\u6570\u636E\u5E93\u4E2D\u627E\u5230\u4F46\u5728\u6211\u4EEC\u7684\u6570\u636E\u5E93\u4E2D\u627E\u4E0D\u5230\u7684\u4E66\u7C4D\u3002\u7136\u540E\uFF0C\u6211\u4EEC\u66F4\u65B0\u5728\u6211\u4EEC\u7684\u6570\u636E\u5E93\u4E2D\u53EF\u4EE5\u627E\u5230\u7684\u6240\u6709\u4E66\u7C4D\u7684\u503C\u3002\u6700\u540E\uFF0C\u5728\u5916\u90E8\u6570\u636E\u5E93\u4E2D\u627E\u4E0D\u5230\u7684\u4E66\u7C4D\u5C06\u4ECE\u6211\u4EEC\u7684\u6570\u636E\u5E93\u4E2D\u5220\u9664\u3002"}),"\n",(0,d.jsx)(n.p,{children:"\u8FD9\u4FDD\u8BC1\u4E86\u5F53\u64CD\u4F5C\u542F\u52A8\u65F6\uFF0C\u4E66\u7C4D\u76EE\u5F55\u5C06\u4E0E\u5916\u90E8\u7CFB\u7EDF\u4E2D\u7684\u76EE\u5F55\u5B8C\u5168\u76F8\u540C\u3002\u8FD9\u79CD\u65B9\u6848\u5728\u67D0\u4E9B\u4E3B\u6570\u636E\u5728\u53E6\u4E00\u4E2A\u7CFB\u7EDF\u4E2D\u7EF4\u62A4\u65F6\u5F88\u6709\u7528\u3002\u7ED3\u679C\u64CD\u4F5C\u53EF\u4EE5\u6DFB\u52A0\u5230\u8C03\u5EA6\u7A0B\u5E8F\u4E2D\uFF0C\u5E76\u5728\u76F8\u5BF9\u8F83\u5C0F\u7684\u65F6\u95F4\u95F4\u9694\u5185\u89E6\u53D1\uFF0C\u4ECE\u800C\u786E\u4FDD\u76EE\u5F55\u7684\u8FD1\u5B9E\u65F6\u66F4\u65B0\u3002"}),"\n",(0,d.jsx)(n.h2,{id:"\u793A\u4F8B-4",children:"\u793A\u4F8B 4"}),"\n",(0,d.jsx)(n.h3,{id:"\u4EFB\u52A1-3",children:"\u4EFB\u52A1"}),"\n",(0,d.jsxs)(n.p,{children:["\u7C7B\u4F3C\u4E8E",(0,d.jsx)(n.a,{href:"#example-1",children:(0,d.jsx)(n.strong,{children:"\u793A\u4F8B1"})}),"\u3002"]}),"\n",(0,d.jsx)(n.p,{children:"\u5BF9\u4E8E\u6BCF\u4E2A\u8BA2\u5355\u884C\uFF0C\u6211\u4EEC\u6DFB\u52A0\u4E86\u6309\u989C\u8272\u548C\u5C3A\u5BF8\u5BF9\u6B64\u884C\u7684\u89E3\u7801\u3002"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-lsf",children:"CLASS OrderDetailInfo '\u8BA2\u5355\u884C\uFF08\u660E\u7EC6\uFF09';\r\n\r\ndetail = DATA OrderDetail (OrderDetailInfo) NONULL DELETE;\r\nsize = DATA STRING[100] (OrderDetailInfo);\r\ncolor = DATA STRING[100] (OrderDetailInfo);\r\nquantity = DATA INTEGER (OrderDetailInfo);\r\n\r\nEXTEND FORM order\r\n    OBJECTS i = OrderDetailInfo\r\n    PROPERTIES(i) size, color, quantity, NEW, DELETE\r\n    FILTERS detail(i) = d\r\n;\n"})}),"\n",(0,d.jsx)(n.p,{children:"\u6211\u4EEC\u9700\u8981\u5B9E\u73B0\u4ECE\u6307\u5B9A\u7ED3\u6784\u7684JSON\u6587\u4EF6\u5BFC\u5165\u8BA2\u5355\u3002JSON\u6587\u4EF6\u53EF\u80FD\u5982\u4E0B\u6240\u793A\uFF1A"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-json",children:'{\r\n   "version":"v1",\r\n   "order":[\r\n      {\r\n         "date":"03.01.2018",\r\n         "number":"430",\r\n         "detail":[\r\n            {\r\n               "item":{\r\n                  "id":"132",\r\n                  "info":[\r\n                     {\r\n                        "size":"40",\r\n                        "color":"black",\r\n                        "quantity":2\r\n                     },\r\n                     {\r\n                        "size":"41",\r\n                        "color":"white",\r\n                        "quantity":3\r\n                     }\r\n                  ]\r\n               },\r\n               "price":1.99\r\n            },\r\n            {\r\n               "item":{\r\n                  "id":"136",\r\n                  "info":[\r\n                     {\r\n                        "size":"39",\r\n                        "color":"white",\r\n                        "quantity":4\r\n                     },\r\n                     {\r\n                        "size":"43",\r\n                        "color":"red",\r\n                        "quantity":1\r\n                     }\r\n                  ]\r\n               },\r\n               "price":2.99\r\n            }\r\n         ]\r\n      },\r\n      {\r\n         "date":"04.01.2018",\r\n         "number":"435",\r\n         "detail":[\r\n            {\r\n               "item":{\r\n                  "id":"122",\r\n                  "info":[\r\n                     {\r\n                        "size":"L",\r\n                        "color":"black",\r\n                        "quantity":1\r\n                     },\r\n                     {\r\n                        "size":"XL",\r\n                        "color":"white",\r\n                        "quantity":1\r\n                     }\r\n                  ]\r\n               },\r\n               "price":11.99\r\n            },\r\n            {\r\n               "item":{\r\n                  "id":"126",\r\n                  "info":[\r\n                     {\r\n                        "size":"S",\r\n                        "color":"white",\r\n                        "quantity":1\r\n                     },\r\n                     {\r\n                        "size":"M",\r\n                        "color":"red",\r\n                        "quantity":1\r\n                     }\r\n                  ]\r\n               },\r\n               "price":12.99\r\n            }\r\n         ]\r\n      },\r\n   ]\r\n}\n'})}),"\n",(0,d.jsx)(n.h3,{id:"\u89E3\u51B3\u65B9\u6848-3",children:"\u89E3\u51B3\u65B9\u6848"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-lsf",children:"version = DATA LOCAL STRING[100]();\r\n\r\nGROUP item;\r\nidItem = DATA LOCAL STRING[100] (OrderDetail);\r\n\r\nFORM importOrder\r\n    PROPERTIES() version\r\n\r\n    OBJECTS order = Order\r\n    PROPERTIES(order) date, number\r\n\r\n    OBJECTS detail = OrderDetail\r\n    PROPERTIES(detail) IN item idItem EXTID 'id'\r\n    PROPERTIES(detail) price\r\n    FILTERS order(detail) = order\r\n\r\n    OBJECTS detailInfo = OrderDetailInfo IN item EXTID 'info'\r\n    PROPERTIES(detailInfo) size, color, quantity\r\n    FILTERS detail(detailInfo) = detail\r\n;\r\n\r\nimportOrderFromJSON '\u4ECEJSON\u5BFC\u5165' () {\r\n    INPUT f = FILE DO {\r\n        IMPORT importOrder JSON FROM f;\r\n        book(OrderDetail d) <- book(idItem(d)) WHERE idItem(d);\r\n        APPLY;\r\n    }\r\n}\r\n\r\nEXTEND FORM orders\r\n    PROPERTIES() importOrderFromJSON DRAW o TOOLBAR\r\n;\n"})}),"\n",(0,d.jsxs)(n.p,{children:["\u8981\u5B9E\u73B0\u5BFC\u5165\u8FC7\u7A0B\uFF0C\u6211\u4EEC\u9700\u8981\u58F0\u660E\u4E0EJSON\u6587\u4EF6\u7ED3\u6784\u5339\u914D\u7684",(0,d.jsx)(n.a,{href:"/Structured_view",children:"\u7ED3\u6784"}),"\u8868\u5355\u3002"]}),"\n",(0,d.jsxs)(n.p,{children:["\u6211\u4EEC\u5728\u6700\u9AD8\u7EA7\u522B\u58F0\u660E",(0,d.jsx)(n.code,{children:"version"}),"\u6807\u7B7E\uFF0C\u6CA1\u6709\u8F93\u5165\uFF0C\u7136\u540E\u5C06\u5176\u6DFB\u52A0\u5230\u8868\u5355\u4E2D\u3002"]}),"\n",(0,d.jsxs)(n.p,{children:["\u7531\u4E8E",(0,d.jsx)(n.code,{children:"order"}),"\u6807\u7B7E\u662F\u4E00\u4E2A\u6570\u7EC4\uFF0C\u6211\u4EEC\u5728\u8868\u5355\u4E0A\u58F0\u660E\u4E00\u4E2A\u540C\u540D\u5BF9\u8C61\u3002\u5E73\u53F0\u5C06\u4E3AJSON\u4E2D\u7684\u6BCF\u4E2A\u6570\u7EC4\u5143\u7D20\u521B\u5EFA\u4E00\u4E2A\u65B0\u5BF9\u8C61\u3002\u8BA2\u5355\u7684",(0,d.jsx)(n.code,{children:"date"}),"\u548C",(0,d.jsx)(n.code,{children:"number"}),"\u5C5E\u6027\u5C06\u81EA\u52A8\u4ECEJSON\u4E2D\u7684\u76F8\u5E94\u6807\u7B7E\u5BFC\u5165\u3002"]}),"\n",(0,d.jsxs)(n.p,{children:["\u7C7B\u4F3C\u5730\uFF0C\u5BF9\u4E8E",(0,d.jsx)(n.code,{children:"detail"}),"\u6807\u7B7E\uFF0C\u6211\u4EEC\u521B\u5EFA\u4E00\u4E2A\u540C\u540D\u5BF9\u8C61\uFF0C\u7136\u540E\u4F7F\u7528",(0,d.jsx)(n.code,{children:"FILTERS"}),"\u5C06\u6B64\u5BF9\u8C61\u94FE\u63A5\u5230",(0,d.jsx)(n.code,{children:"order"}),"\u5BF9\u8C61\u3002\u5728\u5BFC\u5165\u8FC7\u7A0B\u4E2D\uFF0C\u7CFB\u7EDF\u5C06\u57FA\u4E8E\u6B64\u8FC7\u6EE4\u5668\u548C\u6807\u7B7E\u7684\u5D4C\u5957\u586B\u5145\u8BA2\u5355\u884C\u4E2D\u7684\u94FE\u63A5\u3002"]}),"\n",(0,d.jsxs)(n.p,{children:["\u8981\u5BFC\u5165\u5D4C\u5957\u5728",(0,d.jsx)(n.code,{children:"item"}),"\u6807\u7B7E\u4E2D\u7684\u6807\u7B7E\u7684\u503C\uFF0C\u6211\u4EEC\u521B\u5EFA\u4E00\u4E2A\u540D\u4E3A",(0,d.jsx)(n.code,{children:"item"}),"\u7684\u65B0",(0,d.jsx)(n.a,{href:"/Groups_of_properties_and_actions",children:"\u7EC4"}),"\uFF0C\u7136\u540E\u5C06\u5C5E\u6027\u548C\u5BF9\u8C61\u653E\u5165\u5176\u4E2D\u3002\u7279\u522B\u662F\uFF0C\u521B\u5EFA\u4E86\u672C\u5730\u5C5E\u6027",(0,d.jsx)(n.code,{children:"idItem"}),"\uFF0C\u7136\u540E\u5728\u8BE5\u7EC4\u4E2D\u5C06\u8BE5\u5C5E\u6027\u6DFB\u52A0\u5230\u8868\u5355\u4E2D\u3002\u7531\u4E8E\u5C5E\u6027\u540D\u79F0\u4E0E\u6807\u7B7E\u540D\u79F0\u4E0D\u5339\u914D\uFF0C\u6211\u4EEC\u4F7F\u7528",(0,d.jsx)(n.code,{children:"EXTID"}),"\u5173\u952E\u5B57\u5728\u8868\u5355\u4E0A\u4E3A\u8BE5\u5C5E\u6027\u6307\u5B9A\u76F8\u5E94\u7684\u540D\u79F0\u3002"]})]})}function E(r={}){let{wrapper:n}={...(0,o.R)(),...r.components};return n?(0,d.jsx)(n,{...r,children:(0,d.jsx)(a,{...r})}):a(r)}},28453:function(r,n,e){e.d(n,{R:()=>l,x:()=>s});var i=e(96540);let d={},o=i.createContext(d);function l(r){let n=i.useContext(o);return i.useMemo(function(){return"function"==typeof r?r(n):{...n,...r}},[n,r])}function s(r){let n;return n=r.disableParentContext?"function"==typeof r.components?r.components(d):r.components||d:l(r.components),i.createElement(o.Provider,{value:n},r.children)}}}]);