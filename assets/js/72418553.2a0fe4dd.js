"use strict";(self.webpackChunkls_fusion_docs=self.webpackChunkls_fusion_docs||[]).push([["97721"],{48259:function(e,n,t){t.r(n),t.d(n,{metadata:()=>i,default:()=>E,frontMatter:()=>l,contentTitle:()=>a,toc:()=>r,assets:()=>d});var i=JSON.parse('{"id":"Materials_management","title":"\u7269\u6599\u7BA1\u7406","description":"\\"\u7269\u6599\u7BA1\u7406\\"\u4EFB\u52A1\u63CF\u8FF0","source":"@site/i18n/zh-CN/docusaurus-plugin-content-docs/current/Materials_management.md","sourceDirName":".","slug":"/Materials_management","permalink":"/Materials_management","draft":false,"unlisted":false,"editUrl":"https://github.com/lsfusion/platform/edit/master/docs/zh-CN/Materials_management.md","tags":[],"version":"current","lastUpdatedAt":null,"frontMatter":{"title":"\u7269\u6599\u7BA1\u7406"},"sidebar":"learn","previous":{"title":"\u79EF\u5206\u8868","permalink":"/Score_table"},"next":{"title":"\u64CD\u4F5C\u6307\u5357","permalink":"/How-to"}}'),s=t(74848),c=t(28453);let l={title:"\u7269\u6599\u7BA1\u7406"},a,d={},r=[{value:"&quot;\u7269\u6599\u7BA1\u7406&quot;\u4EFB\u52A1\u63CF\u8FF0",id:"\u7269\u6599\u7BA1\u7406\u4EFB\u52A1\u63CF\u8FF0",level:2},{value:"\u5B9A\u4E49\u9886\u57DF\u903B\u8F91",id:"\u5B9A\u4E49\u9886\u57DF\u903B\u8F91",level:2},{value:"\u5B9A\u4E49\u4ED3\u5E93",id:"\u5B9A\u4E49\u4ED3\u5E93",level:3},{value:"\u5B9A\u4E49\u5546\u54C1",id:"\u5B9A\u4E49\u5546\u54C1",level:3},{value:"\u5B9A\u4E49\u6CD5\u4EBA\u5B9E\u4F53",id:"\u5B9A\u4E49\u6CD5\u4EBA\u5B9E\u4F53",level:3},{value:"\u5B9A\u4E49\u6536\u8D27\u5355",id:"\u5B9A\u4E49\u6536\u8D27\u5355",level:3},{value:"\u5B9A\u4E49\u53D1\u8D27\u5355",id:"\u5B9A\u4E49\u53D1\u8D27\u5355",level:3},{value:"\u5B9A\u4E49\u5F53\u524D\u5546\u54C1\u4F59\u989D",id:"\u5B9A\u4E49\u5F53\u524D\u5546\u54C1\u4F59\u989D",level:3},{value:"\u5B9A\u4E49\u89C6\u56FE\u903B\u8F91",id:"\u5B9A\u4E49\u89C6\u56FE\u903B\u8F91",level:2},{value:"\u5B8C\u6574\u6E90\u4EE3\u7801\uFF08\u5728Github\u4E0A\uFF09",id:"\u5B8C\u6574\u6E90\u4EE3\u7801\u5728github\u4E0A",level:2}];function m(e){let n={a:"a",admonition:"admonition",code:"code",h2:"h2",h3:"h3",p:"p",pre:"pre",strong:"strong",...(0,c.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.h2,{id:"\u7269\u6599\u7BA1\u7406\u4EFB\u52A1\u63CF\u8FF0",children:'"\u7269\u6599\u7BA1\u7406"\u4EFB\u52A1\u63CF\u8FF0'}),"\n",(0,s.jsxs)(n.p,{children:["\u4F7F\u7528",(0,s.jsx)(n.strong,{children:"lsFusion"}),"\u5E73\u53F0\u521B\u5EFA\u7684\u4FE1\u606F\u7CFB\u7EDF\u5FC5\u987B\u652F\u6301\u975E\u5E38\u57FA\u7840\u7684\u4F9B\u5E94\u94FE\u6267\u884C\u529F\u80FD\u3002"]}),"\n",(0,s.jsx)(n.p,{children:"\u4E3A\u4E86\u7B80\u5355\u8D77\u89C1\uFF0C\u8BA9\u6211\u4EEC\u5728\u7CFB\u7EDF\u4E2D\u5B9A\u4E49\u4E00\u79CD\u589E\u52A0\u5E93\u5B58\u4F59\u989D\u7684\u6587\u6863\u7C7B\u578B\u2014\u2014\u4F9B\u5E94\u5546\u6536\u8D27\u5355\uFF1B\u4EE5\u53CA\u4E00\u79CD\u76F8\u53CD\u64CD\u4F5C\u7684\u6587\u6863\u7C7B\u578B\u2014\u2014\u5411\u5BA2\u6237\u6279\u53D1\u7684\u53D1\u8D27\u5355\u3002"}),"\n",(0,s.jsx)(n.h2,{id:"\u5B9A\u4E49\u9886\u57DF\u903B\u8F91",children:"\u5B9A\u4E49\u9886\u57DF\u903B\u8F91"}),"\n",(0,s.jsxs)(n.p,{children:["\u4FE1\u606F\u7CFB\u7EDF\u5C06\u7531\u4E00\u7EC4",(0,s.jsx)(n.a,{href:"/Modules",children:"\u6A21\u5757"}),"\u7EC4\u6210\uFF0C\u6BCF\u4E2A\u6A21\u5757\u5B9E\u73B0\u903B\u8F91\u4E0A\u72EC\u7ACB\u7684\u529F\u80FD\u5757\u3002\u6BCF\u4E2A\u6A21\u5757\u53EF\u4EE5\u4F7F\u7528\u5176\u4ED6\u6A21\u5757\u7684\u529F\u80FD\uFF0C\u8FD9\u6D89\u53CA\u5230\u5B9A\u4E49\u6A21\u5757\u4F9D\u8D56\u7684\u7279\u6B8A\u8BED\u6CD5\u7ED3\u6784\u3002"]}),"\n",(0,s.jsx)(n.p,{children:"\u6839\u636E\u6211\u4EEC\u7684\u4EFB\u52A1\uFF0C\u8BA9\u6211\u4EEC\u5B9A\u4E49\u8981\u5B9E\u73B0\u7684\u6A21\u5757\u5217\u8868\uFF1A\u4ED3\u5E93\u6A21\u5757\u3001\u5546\u54C1\u6A21\u5757\u3001\u6CD5\u4EBA\u5B9E\u4F53\u6A21\u5757\u3001\u6536\u8D27\u5355\u6A21\u5757\u3001\u53D1\u8D27\u5355\u6A21\u5757\u3001\u5F53\u524D\u4F59\u989D\u6A21\u5757\u3002\u6211\u4EEC\u5C06\u5355\u72EC\u5B9A\u4E49\u5C06\u88AB\u6267\u884C\u7684\u4E3B\u6A21\u5757\uFF0C\u57FA\u672C\u4E0A\u662F\u4E00\u4E2A\u590D\u5408\u89E3\u51B3\u65B9\u6848\u3002\u6A21\u5757\u7684\u7EC4\u6210\u53EF\u4EE5\u4E0D\u540C\uFF0C\u7531\u5F00\u53D1\u4EBA\u5458\u6839\u636E\u5728\u5176\u4ED6\u5730\u65B9\u91CD\u7528\u529F\u80FD\u7684\u9700\u8981\u6765\u786E\u5B9A\u3002"}),"\n",(0,s.jsx)(n.h3,{id:"\u5B9A\u4E49\u4ED3\u5E93",children:"\u5B9A\u4E49\u4ED3\u5E93"}),"\n",(0,s.jsx)(n.p,{children:"\u8BA9\u6211\u4EEC\u521B\u5EFA\u4E00\u4E2A\u6A21\u5757\uFF0C\u5728\u5176\u4E2D\u5B9A\u4E49\u4ED3\u5E93\u5B9E\u4F8B\u53CA\u5176\u5C5E\u6027\u3002"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lsf",children:"MODULE Stock;\n"})}),"\n",(0,s.jsx)(n.p,{children:"\u5B9A\u4E49\u4ED3\u5E93\u7684\u6982\u5FF5\u53CA\u5176\u5C5E\u6027\uFF1A\u540D\u79F0\u3001\u5730\u5740\u3002"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lsf",children:"CLASS Stock '\u4ED3\u5E93';\n\nname '\u540D\u79F0' = DATA STRING[100] (Stock) IN base;\naddress '\u5730\u5740' = DATA STRING[150] (Stock) IN base;\n"})}),"\n",(0,s.jsx)(n.h3,{id:"\u5B9A\u4E49\u5546\u54C1",children:"\u5B9A\u4E49\u5546\u54C1"}),"\n",(0,s.jsx)(n.p,{children:"\u8BA9\u6211\u4EEC\u521B\u5EFA\u4E00\u4E2A\u6A21\u5757\uFF0C\u5728\u5176\u4E2D\u5B9A\u4E49\u5546\u54C1\u7684\u6982\u5FF5\u53CA\u5176\u5C5E\u6027\u3002"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lsf",children:"MODULE Item;\n"})}),"\n",(0,s.jsx)(n.p,{children:"\u5B9A\u4E49\u5546\u54C1\u7684\u6982\u5FF5\u53CA\u5176\u5C5E\u6027\uFF1A\u540D\u79F0\u3001\u6761\u5F62\u7801\u3002"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lsf",children:"CLASS Item '\u5546\u54C1';\n\nname '\u540D\u79F0' = DATA STRING[100](Item) IN base;\nbarcode '\u6761\u5F62\u7801' = DATA BPSTRING[13](Item) IN base;\n"})}),"\n",(0,s.jsx)(n.p,{children:"\u8BBE\u7F6E\u5546\u54C1\u7684\u6279\u53D1\u4EF7\u683C\u3002"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lsf",children:"salePrice '\u6279\u53D1\u4EF7\u683C' = DATA NUMERIC[17,2](Item) IN base;\n"})}),"\n",(0,s.jsx)(n.h3,{id:"\u5B9A\u4E49\u6CD5\u4EBA\u5B9E\u4F53",children:"\u5B9A\u4E49\u6CD5\u4EBA\u5B9E\u4F53"}),"\n",(0,s.jsx)(n.p,{children:"\u8BA9\u6211\u4EEC\u521B\u5EFA\u4E00\u4E2A\u6A21\u5757\uFF0C\u5728\u5176\u4E2D\u5B9A\u4E49\u6CD5\u4EBA\u5B9E\u4F53\u5B9E\u4F8B\u53CA\u5176\u5C5E\u6027\u3002\u5728\u7CFB\u7EDF\u4E2D\uFF0C\u6CD5\u4EBA\u5B9E\u4F53\u5C06\u5145\u5F53\u4F9B\u5E94\u5546\u548C\u5BA2\u6237\u3002"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lsf",children:"MODULE LegalEntity;\n"})}),"\n",(0,s.jsx)(n.p,{children:"\u5B9A\u4E49\u6CD5\u4EBA\u5B9E\u4F53\u7684\u6982\u5FF5\u53CA\u5176\u5C5E\u6027\uFF1A\u540D\u79F0\u3001\u6CD5\u5B9A\u5730\u5740\u3001\u7A0E\u53F7\u3002"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lsf",children:"CLASS LegalEntity '\u7EC4\u7EC7';\n\nname '\u540D\u79F0' = DATA STRING[100](LegalEntity) IN base;\naddress '\u5730\u5740' = DATA STRING[150](LegalEntity) IN base;\ninn '\u7A0E\u53F7' = DATA BPSTRING[9](LegalEntity) IN base;\n"})}),"\n",(0,s.jsx)(n.p,{children:"\u5B9A\u4E49\u6CD5\u4EBA\u5B9E\u4F53\u7A0E\u53F7\u7684\u552F\u4E00\u6027\u3002"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lsf",children:"legalEntityINN = GROUP AGGR LegalEntity legalEntity BY inn(legalEntity);\n"})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"legalEntityINN"}),"\u5C5E\u6027\u5C06\u7EC4\u7EC7\u548C\u7A0E\u53F7\u4E00\u5BF9\u4E00\u7ED1\u5B9A\uFF0C\u5E76\u5141\u8BB8\u901A\u8FC7\u7A0E\u53F7\u67E5\u627E\u6CD5\u4EBA\u5B9E\u4F53\u3002\u8BE5\u5C5E\u6027\u7684\u8868\u8FBE\u5F0F\u53EF\u4EE5\u89E3\u91CA\u4E3A\uFF1A\u5F53\u6309\u7A0E\u53F7\uFF08",(0,s.jsx)(n.code,{children:"inn"}),"\u5C5E\u6027\uFF09\u5BF9\u6CD5\u4EBA\u5B9E\u4F53\u8FDB\u884C\u5206\u7EC4\u65F6\uFF0C\u6BCF\u4E2A\u7EC4\u5FC5\u987B\u5305\u542B\u4E00\u4E2A\u4E0D\u91CD\u590D\u7684\u6CD5\u4EBA\u5B9E\u4F53\u3002"]}),"\n",(0,s.jsx)(n.h3,{id:"\u5B9A\u4E49\u6536\u8D27\u5355",children:"\u5B9A\u4E49\u6536\u8D27\u5355"}),"\n",(0,s.jsx)(n.p,{children:"\u8BA9\u6211\u4EEC\u521B\u5EFA\u4E00\u4E2A\u6A21\u5757\uFF0C\u5728\u5176\u4E2D\u5B9A\u4E49\u5B9A\u4E49\u4F9B\u5E94\u5546\u6536\u8D27\u5355\u903B\u8F91\u6240\u9700\u7684\u6240\u6709\u5B9E\u4F8B\u548C\u5C5E\u6027\u3002"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lsf",children:"MODULE Receipt;\n"})}),"\n",(0,s.jsxs)(n.p,{children:["\u5B9A\u4E49\u5728",(0,s.jsx)(n.code,{children:"Receipt"}),"\u6A21\u5757\u4E2D\u4F7F\u7528\u6765\u81EA\u5176\u4ED6\u6A21\u5757\u7684\u529F\u80FD\u3002"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lsf",children:"REQUIRE Stock, Item, LegalEntity;\n"})}),"\n",(0,s.jsx)(n.p,{children:"\u6211\u4EEC\u5B9A\u4E49\u786E\u5B9A\u4F9B\u5E94\u5546\u6536\u8D27\u5355\u903B\u8F91\u7684\u6982\u5FF5\u3002\u8BA9\u6211\u4EEC\u5047\u8BBE\u7CFB\u7EDF\u4E2D\u7684\u6240\u6709\u6587\u6863\uFF08\u5305\u62EC\u6536\u8D27\u5355\u548C\u53D1\u8D27\u5355\uFF09\u90FD\u7531\u8868\u5934\u548C\u9879\u76EE\u660E\u7EC6\u7EC4\u6210\u3002\u76F8\u5E94\u5730\uFF0C\u8BA9\u6211\u4EEC\u5B9A\u4E49\u6536\u8D27\u5355\u8868\u5934\u548C\u6536\u8D27\u5355\u884C\u7684\u6982\u5FF5\u3002"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lsf",children:"CLASS Receipt '\u6536\u8D27\u5355';\nCLASS ReceiptDetail '\u6536\u8D27\u5355\u884C';\n"})}),"\n",(0,s.jsxs)(n.p,{children:["\u6BCF\u4E2A\u6536\u8D27\u5355\u884C\u90FD\u5305\u542B\u6307\u5411\u6587\u6863\u8868\u5934\u7684\u94FE\u63A5\uFF0C\u56E0\u6B64\u6700\u7EC8\uFF0C\u8868\u5934\u548C\u94FE\u63A5\u5230\u6B64\u6587\u6863\u7684\u884C\u5B50\u96C6\u4E00\u8D77\u4ECE\u7528\u6237\u89D2\u5EA6\u5B9A\u4E49\u4E86\u6536\u8D27\u5355\u3002",(0,s.jsx)(n.code,{children:"NONULL"}),"\u53C2\u6570\u8868\u793A\u94FE\u63A5\u5FC5\u987B\u88AB\u5B9A\u4E49\u3002",(0,s.jsx)(n.code,{children:"DELETE"}),"\u53C2\u6570\u6307\u5B9A\u5982\u679C\u4E3B",(0,s.jsx)(n.code,{children:"Receipt"}),"\u5BF9\u8C61\u88AB\u5220\u9664\uFF0C\u6240\u6709\u94FE\u63A5\u5230\u5B83\u7684",(0,s.jsx)(n.code,{children:"ReceiptDetail"}),"\u884C\u4E5F\u5C06\u88AB\u5220\u9664\u3002\u9ED8\u8BA4\u60C5\u51B5\u4E0B\uFF0C\u5F53\u5BF9\u8C61\u88AB\u5220\u9664\u65F6\uFF0C\u6240\u6709\u6307\u5411\u5B83\u7684\u94FE\u63A5\u90FD\u5C06\u88AB\u7F6E\u7A7A\u3002\u8FD9\u6837\uFF0C\u5982\u679C\u6CA1\u6709",(0,s.jsx)(n.code,{children:"DELETE"}),"\u53C2\u6570\uFF0C\u7CFB\u7EDF\u5C06\u663E\u793A\u5173\u4E8E\u672A\u5B9A\u4E49\u94FE\u63A5\u7684\u9519\u8BEF\u6D88\u606F\u3002"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lsf",children:"receipt '\u884C\u6587\u6863' = DATA Receipt (ReceiptDetail) NONULL DELETE;\n"})}),"\n",(0,s.jsx)(n.p,{children:"\u5B9A\u4E49\u6536\u8D27\u5355\u4E2D\u7684\u884C\u53F7\u3002"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lsf",children:"index '\u884C\u53F7' (ReceiptDetail d) =\n        PARTITION SUM 1 IF d IS ReceiptDetail\n        ORDER d BY receipt(d);\n"})}),"\n",(0,s.jsx)(n.admonition,{type:"info",children:(0,s.jsxs)(n.p,{children:["\u5728\u8868\u8FBE\u5F0F\u4E2D\u4F7F\u7528\u5BF9\u8C61\u7C7B\u7684\u540D\u79F0\u7C7B\u4F3C\u4E8E\u4F7F\u7528\u7CFB\u7EDF\u4E3A\u6240\u6709\u5BF9\u8C61\u901A\u8FC7\u81EA\u52A8\u8BA1\u6570\u5668\u521B\u5EFA\u7684\u6807\u8BC6\u53F7\uFF08id\uFF09\u3002\u5728\u8FD9\u79CD\u60C5\u51B5\u4E0B\uFF0C\u4F7F\u7528",(0,s.jsx)(n.code,{children:"ORDER d"}),"\u7ED3\u6784\u6709\u52A9\u4E8E\u6309\u5176id\u7684\u5347\u5E8F\u5BF9\u6536\u8D27\u5355\u7684\u884C\u8FDB\u884C\u6392\u5E8F\uFF0C\u5373\u57FA\u672C\u4E0A\u6309\u7167\u5B83\u4EEC\u7684\u521B\u5EFA\u987A\u5E8F\u3002"]})}),"\n",(0,s.jsxs)(n.p,{children:["\u8FD9\u91CC\uFF0C",(0,s.jsx)(n.code,{children:"PARTITION"}),"\u8FD0\u7B97\u7B26\u4F7F\u7528",(0,s.jsx)(n.code,{children:"BY"}),"\u5757\uFF0C\u8BE5\u5757\u6309\u7279\u5B9A\u5C5E\u6027\u5BF9\u5BF9\u8C61\u8FDB\u884C\u5206\u7EC4\u3002\u8868\u8FBE\u5F0F\u7D2F\u8BA1\u603B\u548C\u7684\u8BA1\u7B97\u5728\u6BCF\u4E2A\u7EC4\u5185\u6267\u884C\u3002\u5728\u8FD9\u79CD\u60C5\u51B5\u4E0B\uFF0C\u884C\u53F7\u4EC5\u5728\u6B64\u884C\u7684\u6587\u6863\uFF08",(0,s.jsx)(n.code,{children:"receipt"}),"\u5C5E\u6027\uFF09\u5185\u786E\u5B9A\u3002"]}),"\n",(0,s.jsx)(n.p,{children:"\u6211\u4EEC\u5B9A\u4E49\u6536\u8D27\u5355\u8868\u5934\u7684\u4E00\u7EC4\u5173\u952E\u5C5E\u6027\uFF1A\u7F16\u53F7\u3001\u65E5\u671F\u3001\u4F9B\u5E94\u5546\u53CA\u5176\u540D\u79F0\u3001\u63A5\u6536\u4EA7\u54C1\u7684\u4ED3\u5E93\u53CA\u5176\u540D\u79F0\u3002\u4F9B\u5E94\u5546\u548C\u4ED3\u5E93\u7684\u540D\u79F0\u5C06\u6765\u9700\u8981\u5728\u8868\u5355\u4E0A\u663E\u793A\u5B83\u4EEC\u3002"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lsf",children:"number '\u6536\u8D27\u5355\u7F16\u53F7' = DATA BPSTRING[10] (Receipt);\ndate '\u6536\u8D27\u65E5\u671F' = DATA DATE (Receipt);\n\nsupplier '\u4F9B\u5E94\u5546' = DATA LegalEntity (Receipt);\nnameSupplier '\u4F9B\u5E94\u5546\u540D\u79F0' (Receipt r) = name(supplier(r));\n\nstock '\u4ED3\u5E93' = DATA Stock (Receipt);\nnameStock '\u4ED3\u5E93\u540D\u79F0' (Receipt r) = name(stock(r));\n"})}),"\n",(0,s.jsx)(n.p,{children:"\u6211\u4EEC\u5B9A\u4E49\u6536\u8D27\u5355\u884C\u7684\u4E00\u7EC4\u5173\u952E\u5C5E\u6027\uFF1A\u5546\u54C1\u53CA\u5176\u540D\u79F0\u3001\u6570\u91CF\u3001\u4F9B\u5E94\u5546\u4EF7\u683C\u3001\u4F9B\u5E94\u5546\u91D1\u989D\uFF08\u4EF7\u683C\u4E58\u4EE5\u6570\u91CF\uFF09\u3002"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lsf",children:"item '\u5546\u54C1' = DATA Item (ReceiptDetail);\nnameItem '\u5546\u54C1\u540D\u79F0' (ReceiptDetail d) = name(item(d));\n\nquantity '\u6570\u91CF' = DATA NUMERIC[16,4] (ReceiptDetail);\nprice '\u4F9B\u5E94\u5546\u4EF7\u683C' = DATA NUMERIC[17,2] (ReceiptDetail);\nsum '\u4F9B\u5E94\u5546\u91D1\u989D' (ReceiptDetail d) = quantity(d) * price(d);\n"})}),"\n",(0,s.jsx)(n.h3,{id:"\u5B9A\u4E49\u53D1\u8D27\u5355",children:"\u5B9A\u4E49\u53D1\u8D27\u5355"}),"\n",(0,s.jsx)(n.p,{children:"\u8BA9\u6211\u4EEC\u521B\u5EFA\u4E00\u4E2A\u6A21\u5757\uFF0C\u5728\u5176\u4E2D\u5B9A\u4E49\u6279\u53D1\u53D1\u8D27\u5355\u6240\u9700\u7684\u6240\u6709\u5B9E\u4F8B\u548C\u5C5E\u6027\u3002"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lsf",children:"MODULE Shipment;\n"})}),"\n",(0,s.jsxs)(n.p,{children:["\u5B9A\u4E49\u5728",(0,s.jsx)(n.code,{children:"Shipment"}),"\u6A21\u5757\u4E2D\u4F7F\u7528\u6765\u81EA\u5176\u4ED6\u6A21\u5757\u7684\u529F\u80FD\u3002"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lsf",children:"REQUIRE Stock, Item, LegalEntity;\n"})}),"\n",(0,s.jsx)(n.p,{children:"\u4E0E\u6536\u8D27\u5355\u7C7B\u4F3C\uFF0C\u6211\u4EEC\u5B9A\u4E49\u53D1\u8D27\u5355\u8868\u5934\u548C\u884C\uFF0C\u4EE5\u53CA\u884C\u4E2D\u6307\u5411\u8868\u5934\u7684\u94FE\u63A5\u53CA\u5176\u7F16\u53F7\u3002"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lsf",children:"CLASS Shipment '\u53D1\u8D27\u5355';\nCLASS ShipmentDetail '\u53D1\u8D27\u5355\u884C';\n\nshipment '\u884C\u6587\u6863' = DATA Shipment (ShipmentDetail) NONULL DELETE;\nindex '\u884C\u53F7' (ShipmentDetail d) =\n        PARTITION SUM 1 IF d IS ShipmentDetail\n        ORDER d BY shipment(d);\n"})}),"\n",(0,s.jsx)(n.p,{children:"\u6211\u4EEC\u5B9A\u4E49\u53D1\u8D27\u5355\u7684\u4E00\u7EC4\u5C5E\u6027\uFF1A\u7F16\u53F7\u3001\u65E5\u671F\u3001\u5BA2\u6237\u53CA\u5176\u540D\u79F0\u3001\u53D1\u8D27\u7684\u4ED3\u5E93\u53CA\u5176\u540D\u79F0\u3002"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lsf",children:"number '\u53D1\u8D27\u5355\u7F16\u53F7' = DATA BPSTRING[10] (Shipment);\ndate '\u53D1\u8D27\u65E5\u671F' = DATA DATE (Shipment);\n\ncustomer '\u5BA2\u6237' = DATA LegalEntity (Shipment);\nnameCustomer '\u5BA2\u6237\u540D\u79F0' (Shipment s) = name(customer(s));\n\nstock '\u4ED3\u5E93' = DATA Stock(Shipment);\nnameStock '\u4ED3\u5E93\u540D\u79F0' (Shipment s) = name(stock(s));\n"})}),"\n",(0,s.jsx)(n.p,{children:"\u6211\u4EEC\u5B9A\u4E49\u53D1\u8D27\u5355\u7684\u4E00\u7EC4\u5173\u952E\u5C5E\u6027\uFF1A\u5546\u54C1\u53CA\u5176\u540D\u79F0\u3001\u6570\u91CF\u3001\u9500\u552E\u4EF7\u683C\u3001\u9500\u552E\u91D1\u989D\uFF08\u4EF7\u683C\u4E58\u4EE5\u6570\u91CF\uFF09\u3002"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lsf",children:"item '\u5546\u54C1' = DATA Item (ShipmentDetail);\nnameItem '\u5546\u54C1\u540D\u79F0' (ShipmentDetail d) = name(item(d));\n\nquantity '\u6570\u91CF' = DATA NUMERIC[16,4](ShipmentDetail);\nprice '\u9500\u552E\u4EF7\u683C' = DATA NUMERIC[17,2](ShipmentDetail);\nsum '\u9500\u552E\u91D1\u989D' (ShipmentDetail d) = quantity(d) * price(d);\n"})}),"\n",(0,s.jsxs)(n.p,{children:["\u6211\u4EEC\u5B9E\u73B0\u53D1\u8D27\u5355\u4E2D\u5546\u54C1\u9500\u552E\u4EF7\u683C\u7684\u81EA\u52A8\u586B\u5145\uFF0C\u4F7F\u7528\u7528\u6237\u4E3A\u5546\u54C1\u5B9A\u4E49\u7684\u6279\u53D1\u4EF7\u683C\uFF08",(0,s.jsx)(n.code,{children:"salePrice"}),"\u5C5E\u6027\uFF09\u7684\u503C\u3002\u53D1\u8D27\u5355\u884C\u7684\u81EA\u52A8\u586B\u5145\u5E94\u5728\u5546\u54C1\u66F4\u6539\u65F6\u5DE5\u4F5C\uFF08",(0,s.jsx)(n.code,{children:"WHEN CHANGED"}),"\u8BED\u53E5\uFF09\u3002"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lsf",children:"price(ShipmentDetail d) <- salePrice(item(d)) WHEN CHANGED(item(d));\n"})}),"\n",(0,s.jsx)(n.h3,{id:"\u5B9A\u4E49\u5F53\u524D\u5546\u54C1\u4F59\u989D",children:"\u5B9A\u4E49\u5F53\u524D\u5546\u54C1\u4F59\u989D"}),"\n",(0,s.jsx)(n.p,{children:"\u5F53\u524D\u5546\u54C1\u4F59\u989D\u5B9A\u4E49\u4E3A\u6240\u6709\u5546\u54C1\u6536\u8D27\u548C\u6240\u6709\u53D1\u8D27\u4E4B\u95F4\u7684\u5DEE\u989D\u3002"}),"\n",(0,s.jsx)(n.p,{children:"\u8BA9\u6211\u4EEC\u521B\u5EFA\u4E00\u4E2A\u5355\u72EC\u7684\u6A21\u5757\u3002"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lsf",children:"MODULE StockItem;\n"})}),"\n",(0,s.jsxs)(n.p,{children:["\u5B9A\u4E49\u5728",(0,s.jsx)(n.code,{children:"StockItem"}),"\u6A21\u5757\u4E2D\u4F7F\u7528\u6765\u81EA\u5176\u4ED6\u6A21\u5757\u7684\u529F\u80FD\u3002"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lsf",children:"REQUIRE Shipment, Receipt;\n"})}),"\n",(0,s.jsx)(n.p,{children:"\u8BA9\u6211\u4EEC\u5B9A\u4E49\u4ED3\u5E93\u4E2D\u5F53\u524D\u5546\u54C1\u4F59\u989D\u7684\u8BA1\u7B97\u5C5E\u6027\uFF08\u6570\u91CF\u65B9\u9762\uFF09\u3002"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lsf",children:"receivedQuantity '\u603B\u6536\u5165' = GROUP SUM quantity(ReceiptDetail d) BY item(d), stock(receipt(d));\nshippedQuantity '\u603B\u652F\u51FA' = GROUP SUM quantity(ShipmentDetail d) BY item(d), stock(shipment(d));\ncurrentBalance '\u5F53\u524D\u4F59\u989D' (Item i, Stock s) = receivedQuantity (i, s) (-) shippedQuantity (i, s);\n"})}),"\n",(0,s.jsx)(n.p,{children:"\u8BA9\u6211\u4EEC\u7981\u6B62\u8D1F\u5546\u54C1\u4F59\u989D\u3002\u7981\u6B62\u5C06\u9002\u7528\u4E8E\u5BFC\u81F4\u8D1F\u4F59\u989D\u7684\u4EFB\u4F55\u7528\u6237\u64CD\u4F5C\u3002\u5728\u8FD9\u79CD\u60C5\u51B5\u4E0B\uFF0C\u7528\u6237\u5C06\u5728\u5C4F\u5E55\u4E0A\u770B\u5230\u6307\u5B9A\u7684\u6D88\u606F\u3002"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lsf",children:"CONSTRAINT currentBalance(Item i, Stock s) < 0 MESSAGE '\u5546\u54C1\u4F59\u989D\u4E0D\u80FD\u4E3A\u8D1F';\n"})}),"\n",(0,s.jsx)(n.h2,{id:"\u5B9A\u4E49\u89C6\u56FE\u903B\u8F91",children:"\u5B9A\u4E49\u89C6\u56FE\u903B\u8F91"}),"\n",(0,s.jsx)(n.p,{children:"\u4E3A\u4E86\u80FD\u591F\u4F7F\u7528\u521B\u5EFA\u7684\u89E3\u51B3\u65B9\u6848\uFF0C\u8BA9\u6211\u4EEC\u6DFB\u52A0\u76EE\u5F55\u8868\u5355\u548C\u5F53\u524D\u4F59\u989D\u8868\u5355\uFF0C\u4EE5\u53CA\u4E00\u7EC4\u7528\u4E8E\u5904\u7406\u6587\u6863\u7684\u914D\u5BF9\u8868\u5355\uFF1A\u7528\u4E8E\u5217\u51FA\u6536\u8D27\u5355\u7684\u8868\u5355\u548C\u7528\u4E8E\u7F16\u8F91\u5B83\u4EEC\u7684\u8868\u5355\uFF0C\u7528\u4E8E\u5217\u51FA\u53D1\u8D27\u5355\u7684\u8868\u5355\u548C\u7528\u4E8E\u7F16\u8F91\u5B83\u4EEC\u7684\u8868\u5355\u3002"}),"\n",(0,s.jsx)(n.p,{children:"\u9996\u5148\uFF0C\u8BA9\u6211\u4EEC\u521B\u5EFA\u76EE\u5F55\u8868\u5355\u3002"}),"\n",(0,s.jsxs)(n.p,{children:["\u5728",(0,s.jsx)(n.code,{children:"Stock"}),"\u6A21\u5757\u4E2D\uFF0C\u6211\u4EEC\u6DFB\u52A0\u4E00\u4E2A\u8868\u5355\uFF0C\u4E3A\u7528\u6237\u63D0\u4F9B\u521B\u5EFA\u548C\u5220\u9664\u4ED3\u5E93\u4EE5\u53CA\u66F4\u6539\u5176\u5C5E\u6027\u7684\u529F\u80FD\u3002"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lsf",children:"FORM stocks '\u4ED3\u5E93'\n	OBJECTS s = Stock\n	PROPERTIES(s) name, address, NEW, DELETE\n;\n"})}),"\n",(0,s.jsxs)(n.p,{children:["\u4EE5\u7C7B\u4F3C\u7684\u65B9\u5F0F\uFF0C\u6211\u4EEC\u5C06\u5728",(0,s.jsx)(n.code,{children:"Item"}),"\u6A21\u5757\u4E2D\u521B\u5EFA\u5546\u54C1\u8868\u5355\uFF0C\u5728",(0,s.jsx)(n.code,{children:"LegalEntity"}),"\u6A21\u5757\u4E2D\u521B\u5EFA\u6CD5\u4EBA\u5B9E\u4F53\u8868\u5355\u3002"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lsf",children:"CLASS Item '\u5546\u54C1';\n\nname '\u540D\u79F0' = DATA STRING[100](Item) IN base;\nbarcode '\u6761\u5F62\u7801' = DATA BPSTRING[13](Item) IN base;\n"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lsf",children:"CLASS LegalEntity '\u7EC4\u7EC7';\n\nname '\u540D\u79F0' = DATA STRING[100](LegalEntity) IN base;\naddress '\u5730\u5740' = DATA STRING[150](LegalEntity) IN base;\ninn '\u7A0E\u53F7' = DATA BPSTRING[9](LegalEntity) IN base;\n"})}),"\n",(0,s.jsx)(n.p,{children:"\u8BA9\u6211\u4EEC\u521B\u5EFA\u6536\u8D27\u5355\u548C\u53D1\u8D27\u5355\u7684\u7F16\u8F91\u8868\u5355\u3002\u8FD9\u4E9B\u8868\u5355\u5C06\u7528\u4E8E\u521B\u5EFA\u65B0\u6587\u6863\u6216\u7F16\u8F91\u73B0\u6709\u6587\u6863\u3002\u8868\u5355\u7684\u5E03\u5C40\u5C06\u7C7B\u4F3C\uFF1A\u4E24\u4E2A\u5782\u76F4\u5757\uFF0C\u9876\u90E8\u5305\u542B\u6B63\u5728\u521B\u5EFA/\u7F16\u8F91\u7684\u6587\u6863\u8868\u5934\u5C5E\u6027\u7684\u9762\u677F\uFF0C\u5E95\u90E8\u5305\u542B\u7F51\u683C\u89C6\u56FE\u4E2D\u7684\u6587\u6863\u884C\u53CA\u5176\u5C5E\u6027\u3002"}),"\n",(0,s.jsxs)(n.p,{children:["\u5728Receipt\u6A21\u5757\u4E2D\uFF0C\u6211\u4EEC\u5E94\u8BE5\u521B\u5EFA\u6536\u8D27\u5355\u7F16\u8F91\u8868\u5355\u3002\u5BF9\u4E8E\u6211\u4EEC\u6B63\u5728\u6784\u5EFA\u7684\u8868\u5355\uFF0C\u6211\u4EEC\u6307\u5B9A\u5B83\u5C06\u7528\u4F5C\u521B\u5EFA/\u7F16\u8F91\u6536\u8D27\u5355\u7684\u9ED8\u8BA4\u8868\u5355\uFF08",(0,s.jsx)(n.code,{children:"EDIT"}),"\u8868\u5355\u5757\uFF09\u3002"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lsf",children:"FORM receipt '\u6536\u8D27\u5355'\n	OBJECTS r = Receipt PANEL\n	PROPERTIES(r) number, date, nameSupplier, nameStock\n\n	OBJECTS d = ReceiptDetail\n	PROPERTIES(d) index, nameItem, quantity, price, sum READONLY, NEW, DELETE GRID\n	FILTERS receipt(d) = r\n\n	EDIT Receipt OBJECT r\n;\n"})}),"\n",(0,s.jsxs)(n.p,{children:["\u5F53\u524D\u6536\u8D27\u5355\u7684\u884C\u8FC7\u6EE4\u662F\u901A\u8FC7",(0,s.jsx)(n.code,{children:"FILTERS receipt(d) == r"}),"\u8868\u8FBE\u5F0F\u6267\u884C\u7684\u3002",(0,s.jsx)(n.code,{children:"FILTERS"}),"\u6784\u9020\u5728\u8868\u5355\u4E0A\u663E\u793A\u76F8\u5E94\u7C7B\u7684\u5BF9\u8C61\uFF0C\u5982\u679C\u8FC7\u6EE4\u5668\u8868\u8FBE\u5F0F\u8FD4\u56DE\u7684\u503C\u4E0D\u540C\u4E8E",(0,s.jsx)(n.code,{children:"NULL"}),"\u3002\u5728\u8FD9\u79CD\u60C5\u51B5\u4E0B\uFF0C\u5982\u679C\u884C\u94FE\u63A5\u7684\u6587\u6863\u8868\u5934\uFF08",(0,s.jsx)(n.code,{children:"receipt"}),"\u5C5E\u6027\uFF09\u7B49\u4E8E\u9876\u90E8\u5757\u7684\u5F53\u524D\u5BF9\u8C61\uFF0C\u5219\u6536\u8D27\u5355\u884C\u5C06\u663E\u793A\u5728\u8868\u5355\u4E0A\u3002\u6362\u53E5\u8BDD\u8BF4\uFF0C\u5C06\u53EA\u663E\u793A\u6B63\u5728\u521B\u5EFA/\u7F16\u8F91\u7684\u6587\u6863\u7684\u884C\u3002"]}),"\n",(0,s.jsxs)(n.p,{children:["\u6B64\u5916\uFF0C\u5982\u679C\u5728\u8868\u5355\u4E0A\u4E3A\u8BE5\u7C7B\u7684\u5BF9\u8C61\u6307\u5B9A\u4E86\u8FC7\u6EE4\u5668\uFF0C\u90A3\u4E48\u5F53\u7528\u6237\u6309\u4E0B",(0,s.jsx)(n.code,{children:"NEW"}),"\u6309\u94AE\u65F6\uFF0C\u65B0\u6DFB\u52A0\u5BF9\u8C61\u7684\u5C5E\u6027\u5C06\u81EA\u52A8\u586B\u5145\uFF0C\u4F7F\u8BE5\u5BF9\u8C61\u6EE1\u8DB3\u8FC7\u6EE4\u5668\u6761\u4EF6\u3002\u5728\u8FD9\u79CD\u60C5\u51B5\u4E0B\uFF0C\u5F53\u521B\u5EFA\u65B0\u7684\u6536\u8D27\u5355\u884C\u65F6\uFF0C\u8BE5\u884C\u7684",(0,s.jsx)(n.code,{children:"receipt"}),"\u5C5E\u6027\u5C06\u81EA\u52A8\u586B\u5145\u4E3A\u6307\u5411\u5F53\u524D\u6536\u8D27\u5355\u8868\u5934\u7684\u94FE\u63A5\u3002"]}),"\n",(0,s.jsxs)(n.p,{children:["\u8BA9\u6211\u4EEC\u5728",(0,s.jsx)(n.code,{children:"Shipment"}),"\u6A21\u5757\u4E2D\u521B\u5EFA\u53D1\u8D27\u5355\u7684\u7F16\u8F91\u8868\u5355\u3002\u5BF9\u4E8E\u6211\u4EEC\u6B63\u5728\u521B\u5EFA\u7684\u8868\u5355\uFF0C\u6211\u4EEC\u6307\u5B9A\u5B83\u5C06\u7528\u4F5C\u521B\u5EFA/\u7F16\u8F91\u53D1\u8D27\u5355\u7684\u9ED8\u8BA4\u8868\u5355\uFF08",(0,s.jsx)(n.code,{children:"EDIT"}),"\u8868\u5355\u5757\uFF09\u3002"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lsf",children:"FORM shipment '\u53D1\u8D27\u5355'\n	OBJECTS s = Shipment PANEL\n	PROPERTIES(s) number, date, nameCustomer, nameStock\n\n	OBJECTS d = ShipmentDetail\n	PROPERTIES(d) nameItem, quantity, price, sum READONLY, NEW, DELETE GRID\n	FILTERS shipment(d) = s\n\n	EDIT Shipment OBJECT s\n;\n"})}),"\n",(0,s.jsx)(n.p,{children:"\u5728\u89C6\u89C9\u4E0A\uFF0C\u4F9B\u5E94\u5546\u6536\u8D27\u5355\u548C\u53D1\u8D27\u5355\u8868\u5355\u5C06\u770B\u8D77\u6765\u51E0\u4E4E\u76F8\u540C\uFF0C\u7531\u4E24\u4E2A\u5782\u76F4\u5757\u7EC4\u6210\uFF1A\u4E00\u4E2A\u5E26\u6709\u6587\u6863\u8868\u5934\u8868\u7684\u5757\u548C\u4E00\u4E2A\u5E26\u6709\u6587\u6863\u884C\u8868\u7684\u5757\u3002\u6587\u6863\u884C\u5E94\u652F\u6301\u6309\u6587\u6863\u8FDB\u884C\u89C6\u89C9\u8FC7\u6EE4\uFF0C\u5F53\u5728\u9876\u90E8\u5757\u4E2D\u5BFC\u822A\u65F6\uFF0C\u5176\u663E\u793A\u7684\u5B50\u96C6\u5C06\u66F4\u6539\u3002"}),"\n",(0,s.jsxs)(n.p,{children:["\u8BA9\u6211\u4EEC\u521B\u5EFA\u6536\u8D27\u5355\u8868\u5355\u3002\u5728\u6B64\u8868\u5355\u4E0A\uFF0C\u6211\u4EEC\u5C06\u663E\u793A\u4E0A\u9762\u5B9A\u4E49\u7684\u6587\u6863\u8868\u5934\u53CA\u5176\u884C\u7684\u6240\u6709\u5C5E\u6027\u3002\u6B64\u5916\uFF0C\u6211\u4EEC\u5C06\u653E\u7F6E\u81EA\u52A8\u5B9A\u4E49\u7684\u6309\u94AE\uFF0C\u7528\u4E8E\u4F7F\u7528\u4E0A\u9762\u521B\u5EFA\u7684\u7F16\u8F91\u8868\u5355\u521B\u5EFA/\u7F16\u8F91\u6536\u8D27\u5355\u3002\u9664\u4E86\u7528\u4E8E\u521B\u5EFA/\u7F16\u8F91\u6536\u8D27\u5355\u7684\u6309\u94AE\u5916\uFF0C\u6587\u6863\u8868\u5934\u53CA\u5176\u884C\u7684\u6240\u6709\u5C5E\u6027\u5728\u8868\u5355\u4E0A\u76F4\u63A5\u7F16\u8F91\u65F6\u5E94\u4E3A\u53EA\u8BFB\uFF08",(0,s.jsx)(n.code,{children:"READONLY"}),"\u8FD0\u7B97\u7B26\uFF09\u3002"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lsf",children:"FORM receipts '\u6536\u8D27\u5355\u5217\u8868'\n	OBJECTS r = Receipt\n	PROPERTIES(r) READONLY number, date, nameSupplier, nameStock\n	PROPERTIES(r) NEWSESSION NEW, EDIT, DELETE\n\n	OBJECTS d = ReceiptDetail\n	PROPERTIES(d) READONLY index, nameItem, quantity, price, sum\n	FILTERS receipt(d) = r\n;\n"})}),"\n",(0,s.jsx)(n.p,{children:"\u8BA9\u6211\u4EEC\u4EE5\u7C7B\u4F3C\u7684\u65B9\u5F0F\u521B\u5EFA\u53D1\u8D27\u5355\u8868\u5355\u3002"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lsf",children:"FORM shipments '\u53D1\u8D27\u5355\u5217\u8868'\n	OBJECTS s = Shipment\n	PROPERTIES(s) READONLY number, date, nameCustomer, nameStock\n	PROPERTIES(s) NEWSESSION NEW, EDIT, DELETE\n\n	OBJECTS d = ShipmentDetail\n	PROPERTIES(d) READONLY nameItem, quantity, price, sum\n	FILTERS shipment(d) = s\n;\n"})}),"\n",(0,s.jsxs)(n.p,{children:["\u63A5\u4E0B\u6765\uFF0C\u5728",(0,s.jsx)(n.code,{children:"StockItem"}),"\u6A21\u5757\u4E2D\uFF0C\u8BA9\u6211\u4EEC\u521B\u5EFA\u4E00\u4E2A\u663E\u793A\u5F53\u524D\u4F59\u989D\u7684\u8868\u5355\u3002\u8868\u5355\u5E94\u8BE5\u662F\u4E00\u4E2A\u8868\uFF0C\u5176\u884C\u5305\u542B\u5173\u4E8E\u5546\u54C1\uFF08\u5176\u540D\u79F0\u548C\u6761\u5F62\u7801\uFF09\u3001\u4ED3\u5E93\u540D\u79F0\u4EE5\u53CA\u8BE5\u4ED3\u5E93\u4E2D\u8BE5\u5546\u54C1\u7684\u5F53\u524D\u4F59\u989D\u7684\u4FE1\u606F\u3002\u8868\u5355\u4E0A\u884C\u7684\u6570\u91CF\u5C06\u7B49\u4E8E\u8F93\u5165\u5230\u7CFB\u7EDF\u4E2D\u7684\u5546\u54C1\u6570\u91CF\u4E58\u4EE5\u8F93\u5165\u7684\u4ED3\u5E93\u6570\u91CF\u3002\u4E3A\u4E86\u53EA\u663E\u793A\u76F8\u5173\u6570\u636E\uFF08\u5373\uFF0C\u53EA\u6709\u90A3\u4E9B\u5546\u54C1\u548C\u4ED3\u5E93\uFF0C\u5B83\u4EEC\u7684\u4EA4\u96C6\u7684\u5F53\u524D\u4F59\u989D\u4E0D\u4E3A",(0,s.jsx)(n.code,{children:"NULL"}),"\uFF09\uFF0C\u8BA9\u6211\u4EEC\u5411\u8868\u5355\u6DFB\u52A0\u4E00\u4E2A\u8FC7\u6EE4\u5668\u3002"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lsf",children:"FORM currentBalanceItemStock '\u5F53\u524D\u4F59\u989D'\n    OBJECTS si = (s = Stock, i = Item)\n    PROPERTIES READONLY name(i), barcode(i), name(s), currentBalance(i, s)\n    FILTERS currentBalance(i, s)\n;\n"})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"OBJECTS si = (s = Stock, i = Item)"}),"\u6784\u9020\u6DFB\u52A0\u4E86\u4E00\u4E2A\u540D\u4E3A",(0,s.jsx)(n.code,{children:"si"}),"\u7684\u5BF9\u8C61\u7EC4\uFF0C\u5B83\u662F",(0,s.jsx)(n.code,{children:"Stock"}),"\u548C",(0,s.jsx)(n.code,{children:"Item"}),"\u7C7B\u5BF9\u8C61\u7684\u7B1B\u5361\u5C14\u79EF\u3002"]}),"\n",(0,s.jsx)(n.p,{children:"\u6700\u540E\uFF0C\u8BA9\u6211\u4EEC\u58F0\u660E\u4E3B\u6A21\u5757\u5E76\u6307\u5B9A\u5728\u5176\u4E2D\u5C06\u4F7F\u7528\u6765\u81EA\u5176\u4ED6\u6A21\u5757\u7684\u54EA\u4E9B\u529F\u80FD\u3002"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lsf",children:"MODULE StockAccounting;\n\nREQUIRE Stock, Item, LegalEntity, Receipt, Shipment, StockItem;\n"})}),"\n",(0,s.jsxs)(n.p,{children:["\u5728",(0,s.jsx)(n.code,{children:"StockAccounting"}),"\u6A21\u5757\u4E2D\uFF0C\u6211\u4EEC\u7EC4\u6210\u7CFB\u7EDF\u83DC\u5355\u3002\u76EE\u5F55\u5E94\u8BE5\u6DFB\u52A0\u5230\u5BFC\u822A\u5668\u7684\u9884\u5B9A\u4E49",(0,s.jsx)(n.code,{children:"masterData"}),"\u6587\u4EF6\u5939\u4E2D\uFF0C\u6211\u4EEC\u5728\u76EE\u5F55\u4E4B\u540E\u7ACB\u5373\u663E\u793A\u3002\u6211\u4EEC\u5C06\u5F53\u524D\u4F59\u989D\u8868\u5355\u653E\u5728\u4E3B\u83DC\u5355\uFF08\u6C34\u5E73\u7A97\u53E3",(0,s.jsx)(n.code,{children:"root"}),"\uFF09\u4E2D\u3002\u5F53\u7528\u6237\u9009\u62E9\u76F8\u5E94\u7684",(0,s.jsx)(n.code,{children:"root"}),"\u6587\u4EF6\u5939\u65F6\uFF0C\u6307\u5411\u76EE\u5F55\u548C\u6587\u6863\u8868\u5355\u7684\u94FE\u63A5\u5C06\u663E\u793A\u5728\u5782\u76F4",(0,s.jsx)(n.code,{children:"toolbar"}),"\u4E0A\u3002"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lsf",children:"NAVIGATOR {\n    NEW FOLDER masterData '\u76EE\u5F55' FIRST WINDOW toolbar {\n        NEW items;\n        NEW stocks;\n        NEW legalEntities;\n    }\n    NEW FOLDER documents '\u6587\u6863' AFTER masterData WINDOW toolbar {\n        NEW receipts;\n        NEW shipments;\n    }\n    NEW currentBalanceItemStock AFTER documents;\n}\n"})}),"\n",(0,s.jsx)(n.p,{children:"\u4FE1\u606F\u7CFB\u7EDF\u7684\u521B\u5EFA\u8FC7\u7A0B\u5DF2\u5B8C\u6210\u3002"}),"\n",(0,s.jsxs)(n.h2,{id:"\u5B8C\u6574\u6E90\u4EE3\u7801\u5728github\u4E0A",children:["\u5B8C\u6574\u6E90\u4EE3\u7801\uFF08\u5728",(0,s.jsx)(n.a,{href:"https://github.com/lsfusion/samples/tree/master/mm",children:"Github"}),"\u4E0A\uFF09"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lsf",children:"MODULE Stock;\n\nCLASS Stock '\u4ED3\u5E93';\n\nname '\u540D\u79F0' = DATA STRING[100] (Stock) IN base;\naddress '\u5730\u5740' = DATA STRING[150] (Stock) IN base;\n\nFORM stocks '\u4ED3\u5E93'\n	OBJECTS s = Stock\n	PROPERTIES(s) name, address, NEW, DELETE\n;\n"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lsf",children:"MODULE Item;\n\nCLASS Item '\u5546\u54C1';\n\nname '\u540D\u79F0' = DATA STRING[100](Item) IN base;\nbarcode '\u6761\u5F62\u7801' = DATA BPSTRING[13](Item) IN base;\n\nsalePrice '\u6279\u53D1\u4EF7\u683C' = DATA NUMERIC[17,2](Item) IN base;\n\nFORM items '\u5546\u54C1'\n	OBJECTS i = Item\n	PROPERTIES(i) name, barcode, salePrice, NEW, DELETE\n;\n"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lsf",children:"MODULE LegalEntity;\n\nCLASS LegalEntity '\u7EC4\u7EC7';\n\nname '\u540D\u79F0' = DATA STRING[100](LegalEntity) IN base;\naddress '\u5730\u5740' = DATA STRING[150](LegalEntity) IN base;\ninn '\u7A0E\u53F7' = DATA BPSTRING[9](LegalEntity) IN base;\n\nlegalEntityINN = GROUP AGGR LegalEntity legalEntity BY inn(legalEntity);\n\nFORM legalEntities '\u7EC4\u7EC7'\n	OBJECTS l = LegalEntity\n	PROPERTIES(l) name, inn, address, NEW, DELETE\n;\n"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lsf",children:"MODULE Receipt;\n\nREQUIRE Stock, Item, LegalEntity;\n\nCLASS Receipt '\u6536\u8D27\u5355';\nCLASS ReceiptDetail '\u6536\u8D27\u5355\u884C';\n\nreceipt '\u884C\u6587\u6863' = DATA Receipt (ReceiptDetail) NONULL DELETE;\n\nindex '\u884C\u53F7' (ReceiptDetail d) =\n        PARTITION SUM 1 IF d IS ReceiptDetail\n        ORDER d BY receipt(d);\n\nnumber '\u6536\u8D27\u5355\u7F16\u53F7' = DATA BPSTRING[10] (Receipt);\ndate '\u6536\u8D27\u65E5\u671F' = DATA DATE (Receipt);\n\nsupplier '\u4F9B\u5E94\u5546' = DATA LegalEntity (Receipt);\nnameSupplier '\u4F9B\u5E94\u5546\u540D\u79F0' (Receipt r) = name(supplier(r));\n\nstock '\u4ED3\u5E93' = DATA Stock (Receipt);\nnameStock '\u4ED3\u5E93\u540D\u79F0' (Receipt r) = name(stock(r));\n\nitem '\u5546\u54C1' = DATA Item (ReceiptDetail);\nnameItem '\u5546\u54C1\u540D\u79F0' (ReceiptDetail d) = name(item(d));\n\nquantity '\u6570\u91CF' = DATA NUMERIC[16,4] (ReceiptDetail);\nprice '\u4F9B\u5E94\u5546\u4EF7\u683C' = DATA NUMERIC[17,2] (ReceiptDetail);\nsum '\u4F9B\u5E94\u5546\u91D1\u989D' (ReceiptDetail d) = quantity(d) * price(d);\n\nFORM receipt '\u6536\u8D27\u5355'\n	OBJECTS r = Receipt PANEL\n	PROPERTIES(r) number, date, nameSupplier, nameStock\n\n	OBJECTS d = ReceiptDetail\n	PROPERTIES(d) index, nameItem, quantity, price, sum READONLY, NEW, DELETE GRID\n	FILTERS receipt(d) = r\n\n	EDIT Receipt OBJECT r\n;\n\nFORM receipts '\u6536\u8D27\u5355\u5217\u8868'\n	OBJECTS r = Receipt\n	PROPERTIES(r) READONLY number, date, nameSupplier, nameStock\n	PROPERTIES(r) NEWSESSION NEW, EDIT, DELETE\n\n	OBJECTS d = ReceiptDetail\n	PROPERTIES(d) READONLY index, nameItem, quantity, price, sum\n	FILTERS receipt(d) = r\n;\n"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lsf",children:"MODULE Shipment;\n\nREQUIRE Stock, Item, LegalEntity;\n\nCLASS Shipment '\u53D1\u8D27\u5355';\nCLASS ShipmentDetail '\u53D1\u8D27\u5355\u884C';\n\nshipment '\u884C\u6587\u6863' = DATA Shipment (ShipmentDetail) NONULL DELETE;\nindex '\u884C\u53F7' (ShipmentDetail d) =\n        PARTITION SUM 1 IF d IS ShipmentDetail\n        ORDER d BY shipment(d);\n\nnumber '\u53D1\u8D27\u5355\u7F16\u53F7' = DATA BPSTRING[10] (Shipment);\ndate '\u53D1\u8D27\u65E5\u671F' = DATA DATE (Shipment);\n\ncustomer '\u5BA2\u6237' = DATA LegalEntity (Shipment);\nnameCustomer '\u5BA2\u6237\u540D\u79F0' (Shipment s) = name(customer(s));\n\nstock '\u4ED3\u5E93' = DATA Stock(Shipment);\nnameStock '\u4ED3\u5E93\u540D\u79F0' (Shipment s) = name(stock(s));\n\nitem '\u5546\u54C1' = DATA Item (ShipmentDetail);\nnameItem '\u5546\u54C1\u540D\u79F0' (ShipmentDetail d) = name(item(d));\n\nquantity '\u6570\u91CF' = DATA NUMERIC[16,4](ShipmentDetail);\nprice '\u9500\u552E\u4EF7\u683C' = DATA NUMERIC[17,2](ShipmentDetail);\nsum '\u9500\u552E\u91D1\u989D' (ShipmentDetail d) = quantity(d) * price(d);\n\nprice(ShipmentDetail d) <- salePrice(item(d)) WHEN CHANGED(item(d));\n\nFORM shipment '\u53D1\u8D27\u5355'\n	OBJECTS s = Shipment PANEL\n	PROPERTIES(s) number, date, nameCustomer, nameStock\n\n	OBJECTS d = ShipmentDetail\n	PROPERTIES(d) nameItem, quantity, price, sum READONLY, NEW, DELETE GRID\n	FILTERS shipment(d) = s\n\n	EDIT Shipment OBJECT s\n;\n\nFORM shipments '\u53D1\u8D27\u5355\u5217\u8868'\n	OBJECTS s = Shipment\n	PROPERTIES(s) READONLY number, date, nameCustomer, nameStock\n	PROPERTIES(s) NEWSESSION NEW, EDIT, DELETE\n\n	OBJECTS d = ShipmentDetail\n	PROPERTIES(d) READONLY nameItem, quantity, price, sum\n	FILTERS shipment(d) = s\n;\n"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lsf",children:"MODULE StockItem;\n\nREQUIRE Shipment, Receipt;\n\nreceivedQuantity '\u603B\u6536\u5165' = GROUP SUM quantity(ReceiptDetail d) BY item(d), stock(receipt(d));\nshippedQuantity '\u603B\u652F\u51FA' = GROUP SUM quantity(ShipmentDetail d) BY item(d), stock(shipment(d));\ncurrentBalance '\u5F53\u524D\u4F59\u989D' (Item i, Stock s) = receivedQuantity (i, s) (-) shippedQuantity (i, s);\n\nCONSTRAINT currentBalance(Item i, Stock s) < 0 MESSAGE '\u5546\u54C1\u4F59\u989D\u4E0D\u80FD\u4E3A\u8D1F';\n\nFORM currentBalanceItemStock '\u5F53\u524D\u4F59\u989D'\n    OBJECTS si = (s = Stock, i = Item)\n    PROPERTIES READONLY name(i), barcode(i), name(s), currentBalance(i, s)\n    FILTERS currentBalance(i, s)\n;\n"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lsf",children:"MODULE StockAccounting;\n\nREQUIRE Stock, Item, LegalEntity, Receipt, Shipment, StockItem;\n\nNAVIGATOR {\n    NEW FOLDER masterData '\u76EE\u5F55' FIRST WINDOW toolbar {\n        NEW items;\n        NEW stocks;\n        NEW legalEntities;\n    }\n    NEW FOLDER documents '\u6587\u6863' AFTER masterData WINDOW toolbar {\n        NEW receipts;\n        NEW shipments;\n    }\n    NEW currentBalanceItemStock AFTER documents;\n}\n"})})]})}function E(e={}){let{wrapper:n}={...(0,c.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(m,{...e})}):m(e)}},28453:function(e,n,t){t.d(n,{R:()=>l,x:()=>a});var i=t(96540);let s={},c=i.createContext(s);function l(e){let n=i.useContext(c);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:l(e.components),i.createElement(c.Provider,{value:n},e.children)}}}]);