"use strict";(self.webpackChunkls_fusion_docs=self.webpackChunkls_fusion_docs||[]).push([["85393"],{57192:function(r,e,n){n.r(e),n.d(e,{metadata:()=>d,default:()=>h,frontMatter:()=>l,contentTitle:()=>c,toc:()=>o,assets:()=>s});var d=JSON.parse('{"id":"How-to_Interaction_via_HTTP_protocol","title":"\u901A\u8FC7HTTP\u534F\u8BAE\u4EA4\u4E92","description":"\u793A\u4F8B 1","source":"@site/i18n/zh-CN/docusaurus-plugin-content-docs/current/How-to_Interaction_via_HTTP_protocol.md","sourceDirName":".","slug":"/How-to_Interaction_via_HTTP_protocol","permalink":"/How-to_Interaction_via_HTTP_protocol","draft":false,"unlisted":false,"editUrl":"https://github.com/lsfusion/platform/edit/master/docs/zh-CN/How-to_Interaction_via_HTTP_protocol.md","tags":[],"version":"current","lastUpdatedAt":null,"frontMatter":{"title":"\u901A\u8FC7HTTP\u534F\u8BAE\u4EA4\u4E92"},"sidebar":"learn","previous":{"title":"\u6570\u636E\u5BFC\u5165","permalink":"/How-to_Data_import"},"next":{"title":"\u524D\u7AEF\u96C6\u6210","permalink":"/How-to_Frontend"}}'),i=n(74848),t=n(28453);let l={title:"\u901A\u8FC7HTTP\u534F\u8BAE\u4EA4\u4E92"},c,s={},o=[{value:"\u793A\u4F8B 1",id:"\u793A\u4F8B-1",level:2},{value:"\u4EFB\u52A1",id:"\u4EFB\u52A1",level:3},{value:"\u89E3\u51B3\u65B9\u6848",id:"\u89E3\u51B3\u65B9\u6848",level:3},{value:"\u793A\u4F8B 2",id:"\u793A\u4F8B-2",level:2},{value:"\u4EFB\u52A1",id:"\u4EFB\u52A1-1",level:3},{value:"\u89E3\u51B3\u65B9\u6848",id:"\u89E3\u51B3\u65B9\u6848-1",level:3},{value:"\u793A\u4F8B 3",id:"\u793A\u4F8B-3",level:2},{value:"\u4EFB\u52A1",id:"\u4EFB\u52A1-2",level:3},{value:"\u89E3\u51B3\u65B9\u6848",id:"\u89E3\u51B3\u65B9\u6848-2",level:3},{value:"\u793A\u4F8B 4",id:"\u793A\u4F8B-4",level:2},{value:"\u4EFB\u52A1",id:"\u4EFB\u52A1-3",level:3},{value:"\u89E3\u51B3\u65B9\u6848",id:"\u89E3\u51B3\u65B9\u6848-3",level:3},{value:"\u793A\u4F8B 5",id:"\u793A\u4F8B-5",level:2},{value:"\u4EFB\u52A1",id:"\u4EFB\u52A1-4",level:3},{value:"\u89E3\u51B3\u65B9\u6848",id:"\u89E3\u51B3\u65B9\u6848-4",level:3},{value:"\u793A\u4F8B 6",id:"\u793A\u4F8B-6",level:2},{value:"\u4EFB\u52A1",id:"\u4EFB\u52A1-5",level:3},{value:"\u89E3\u51B3\u65B9\u6848",id:"\u89E3\u51B3\u65B9\u6848-5",level:3},{value:"\u793A\u4F8B 7",id:"\u793A\u4F8B-7",level:2},{value:"\u4EFB\u52A1",id:"\u4EFB\u52A1-6",level:3},{value:"\u89E3\u51B3\u65B9\u6848",id:"\u89E3\u51B3\u65B9\u6848-6",level:3},{value:"\u793A\u4F8B 8",id:"\u793A\u4F8B-8",level:2},{value:"\u4EFB\u52A1",id:"\u4EFB\u52A1-7",level:3},{value:"\u89E3\u51B3\u65B9\u6848",id:"\u89E3\u51B3\u65B9\u6848-7",level:3}];function a(r){let e={a:"a",code:"code",em:"em",h2:"h2",h3:"h3",p:"p",pre:"pre",strong:"strong",...(0,t.R)(),...r.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(e.h2,{id:"\u793A\u4F8B-1",children:"\u793A\u4F8B 1"}),"\n",(0,i.jsx)(e.h3,{id:"\u4EFB\u52A1",children:"\u4EFB\u52A1"}),"\n",(0,i.jsx)(e.p,{children:"\u6211\u4EEC\u6709\u4E00\u7EC4\u4E0E\u56FD\u5BB6\u5173\u8054\u7684\u57CE\u5E02\u3002"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-lsf",children:"CLASS Country '\u56FD\u5BB6';\r\nid '\u4EE3\u7801' = DATA STRING[20] (Country) IN id;\r\nname '\u540D\u79F0' = DATA ISTRING[100] (Country) IN id;\r\n\r\ncountry (STRING[20] id) = GROUP AGGR Country c BY id(c);\r\n\r\nCLASS City '\u57CE\u5E02';\r\nname '\u540D\u79F0' = DATA ISTRING[100] (City) IN id;\r\n\r\ncountry '\u56FD\u5BB6' = DATA Country (City);\r\nnameCountry '\u56FD\u5BB6' (City c) = name(country(c));\r\n\r\nFORM cities '\u57CE\u5E02\u5217\u8868'\r\n    OBJECTS c = City\r\n    PROPERTIES(c) name, nameCountry, NEW, DELETE\r\n;\r\n\r\nNAVIGATOR {\r\n    NEW cities;\r\n}\n"})}),"\n",(0,i.jsx)(e.p,{children:"\u6211\u4EEC\u9700\u8981\u5411\u7279\u5B9AURL\u53D1\u9001\u4E00\u4E2AHTTP\u8BF7\u6C42\uFF0C\u4EE5JSON\u683C\u5F0F\u6DFB\u52A0\u57CE\u5E02\u3002"}),"\n",(0,i.jsx)(e.h3,{id:"\u89E3\u51B3\u65B9\u6848",children:"\u89E3\u51B3\u65B9\u6848"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-lsf",children:"postCity '\u53D1\u9001' (City c)  {\r\n    EXPORT JSON FROM countryId = id(country(c)), name = name(c);\r\n\r\n    LOCAL result = FILE();\r\n    EXTERNAL HTTP 'http://localhost:7651/exec?action=Location.createCity' PARAMS exportFile() TO result;\r\n\r\n    LOCAL code = STRING[10]();\r\n    LOCAL message = STRING[100]();\r\n    IMPORT JSON FROM result() TO() code, message;\r\n    IF NOT code() == '0' THEN {\r\n        MESSAGE '\u9519\u8BEF: ' + message();\r\n    }\r\n}\r\n\r\nEXTEND FORM cities\r\n    PROPERTIES(c) postCity\r\n;\n"})}),"\n",(0,i.jsxs)(e.p,{children:[(0,i.jsxs)(e.a,{href:"/Data_export_EXPORT",children:[(0,i.jsx)(e.code,{children:"EXPORT"}),"\u64CD\u4F5C\u7B26"]}),"\u5C06\u521B\u5EFA\u4E00\u4E2A",(0,i.jsx)(e.a,{href:"/Built-in_classes",children:(0,i.jsx)(e.code,{children:"FILE"})}),"\u683C\u5F0F\u7684JSON\uFF0C\u7136\u540E\u5C06\u5176\u5199\u5165",(0,i.jsx)(e.code,{children:"exportFile"}),"\u5C5E\u6027\u3002\u4EE5\u4E0B\u662F\u751F\u6210\u6587\u4EF6\u7684\u793A\u4F8B\uFF1A"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-json",children:'{"countryId":"123","name":"\u65E7\u91D1\u5C71"}\n'})}),"\n",(0,i.jsxs)(e.p,{children:["\u7136\u540E\u6211\u4EEC\u8C03\u7528",(0,i.jsxs)(e.a,{href:"/Access_to_an_external_system_EXTERNAL",children:[(0,i.jsx)(e.code,{children:"EXTERNAL"}),"\u64CD\u4F5C\u7B26"]}),"\uFF0C\u5B83\u5411\u6307\u5B9A\u7684URL\u53D1\u9001\u8BF7\u6C42\uFF0C\u5E76\u5C06\u751F\u6210\u7684\u6587\u4EF6\u5185\u5BB9\u4F5C\u4E3ABody\u4F20\u9012\u3002\u5728\u8FD9\u79CD\u60C5\u51B5\u4E0B\uFF0C\u7531\u4E8E",(0,i.jsx)(e.code,{children:"FROM"}),"\u5757\u4E2D\u7684\u5C5E\u6027\u7C7B\u578B\u4E3AJSON\uFF0C\u56E0\u6B64\u5C06\u4F7F\u7528",(0,i.jsx)(e.em,{children:"application/json"}),"\u4F5C\u4E3A\u5185\u5BB9\u7C7B\u578B\u3002URL\u4E2D\u7F16\u7801\u4E86",(0,i.jsx)(e.code,{children:"<namespace>.<property name>"}),"\u3002\u5728\u8FD9\u79CD\u60C5\u51B5\u4E0B\uFF0C\u88AB\u8C03\u7528\u7684",(0,i.jsx)(e.code,{children:"createCity"}),"\u64CD\u4F5C\u7684\u547D\u540D\u7A7A\u95F4\u662F",(0,i.jsx)(e.code,{children:"Location"}),"\u3002\u6240\u6709\u53C2\u6570\u90FD\u4EE5ID ",(0,i.jsx)(e.code,{children:"p"}),"\u7684\u5F62\u5F0F\u4F9D\u6B21\u4F20\u9012\u3002\u670D\u52A1\u5668\u7684\u54CD\u5E94\u5C06\u88AB\u5199\u5165",(0,i.jsx)(e.code,{children:"result"}),"\u5C5E\u6027\u3002\u5047\u8BBE\u54CD\u5E94\u4EE5JSON\u683C\u5F0F\u63A5\u6536\uFF0C\u5E76\u4E14\u5177\u6709\u4EE5\u4E0B\u7C7B\u578B\u4E4B\u4E00\uFF1A"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-json",children:'{"code":"0","message":"OK"}\r\n\r\n{"code":"1","message":"\u65E0\u6548\u7684\u56FD\u5BB6\u4EE3\u7801"}\n'})}),"\n",(0,i.jsxs)(e.p,{children:["\u54CD\u5E94\u7531",(0,i.jsxs)(e.a,{href:"/Data_import_IMPORT",children:[(0,i.jsx)(e.code,{children:"IMPORT"}),"\u64CD\u4F5C\u7B26"]}),"\u5904\u7406\uFF0C\u8BE5\u64CD\u4F5C\u7B26\u5C06\u76F8\u5E94\u7684\u53C2\u6570\u5206\u522B\u89E3\u6790\u5230",(0,i.jsx)(e.code,{children:"code"}),"\u548C",(0,i.jsx)(e.code,{children:"message"}),"\u5C5E\u6027\u4E2D\u3002\u5982\u679C\u53D1\u751F\u4EFB\u4F55\u9519\u8BEF\uFF0C\u7528\u6237\u5C06\u770B\u5230\u76F8\u5E94\u7684\u9519\u8BEF\u6D88\u606F\u3002"]}),"\n",(0,i.jsx)(e.h2,{id:"\u793A\u4F8B-2",children:"\u793A\u4F8B 2"}),"\n",(0,i.jsx)(e.h3,{id:"\u4EFB\u52A1-1",children:"\u4EFB\u52A1"}),"\n",(0,i.jsxs)(e.p,{children:["\u4E0E",(0,i.jsx)(e.a,{href:"#example-1",children:(0,i.jsx)(e.strong,{children:"\u793A\u4F8B 1"})}),"\u7C7B\u4F3C\u3002"]}),"\n",(0,i.jsx)(e.p,{children:"\u6211\u4EEC\u9700\u8981\u5904\u7406\u4F20\u5165\u7684HTTP\u8BF7\u6C42\uFF0C\u5E76\u6839\u636E\u8BF7\u6C42\u4E2D\u63D0\u4F9B\u7684\u53C2\u6570\u5728\u6570\u636E\u5E93\u4E2D\u521B\u5EFA\u65B0\u57CE\u5E02\u3002"}),"\n",(0,i.jsx)(e.h3,{id:"\u89E3\u51B3\u65B9\u6848-1",children:"\u89E3\u51B3\u65B9\u6848"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-lsf",children:"createCity (FILE f)  {\r\n\r\n    LOCAL cy = STRING[20] ();\r\n    LOCAL ne = STRING[100] ();\r\n\r\n    IMPORT JSON FROM f AS FILE TO() cy = countryId, ne = name;\r\n\r\n    IF NOT country(cy()) THEN {\r\n        EXPORT JSON FROM code = '1', message = '\u65E0\u6548\u7684\u56FD\u5BB6\u4EE3\u7801';\r\n        RETURN;\r\n    }\r\n\r\n    NEW c = City {\r\n        name(c) <- ne();\r\n        country(c) <- country(cy());\r\n\r\n        APPLY;\r\n    }\r\n\r\n    EXPORT JSON FROM code = '0', message = 'OK';\r\n}\n"})}),"\n",(0,i.jsxs)(e.p,{children:["\u7531\u4E8E\u8BE5\u5C5E\u6027\u540D\u4E3A",(0,i.jsx)(e.code,{children:"createCity"}),"\uFF0C\u5E76\u4E14\u4F4D\u4E8E\u547D\u540D\u7A7A\u95F4\u4E3A",(0,i.jsx)(e.code,{children:"Location"}),"\u7684",(0,i.jsx)(e.a,{href:"/Modules",children:"\u6A21\u5757"}),"\u4E2D\uFF0C\u56E0\u6B64\u5904\u7406\u8BF7\u6C42\u7684URL\u5982\u4E0B\u6240\u793A\uFF1A"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{children:"http://localhost:7651/exec?action=Location.createCity\n"})}),"\n",(0,i.jsxs)(e.p,{children:["HTTP\u8BF7\u6C42\u7684Body\u5C06\u4F5C\u4E3A",(0,i.jsx)(e.code,{children:"FILE"}),"\u7C7B\u578B\u7684\u53C2\u6570\u4F20\u9012\u3002\u4ECE",(0,i.jsx)(e.code,{children:"countryId"}),"\u548C",(0,i.jsx)(e.code,{children:"name"}),"\u53C2\u6570\u8BFB\u53D6\u7684\u503C\u5206\u522B\u5199\u5165\u672C\u5730\u5C5E\u6027",(0,i.jsx)(e.code,{children:"cy"}),"\u548C",(0,i.jsx)(e.code,{children:"ne"}),"\u3002"]}),"\n",(0,i.jsxs)(e.p,{children:["\u5982\u679C\u6CA1\u6709\u5177\u6709\u76F8\u5E94\u4EE3\u7801\u7684\u56FD\u5BB6\uFF0C\u5219\u751F\u6210\u4E0E\u524D\u9762\u793A\u4F8B\u7C7B\u4F3C\u7684JSON\u6587\u4EF6\uFF0C\u5E76\u8C03\u7528",(0,i.jsxs)(e.a,{href:"/Exit_RETURN",children:[(0,i.jsx)(e.code,{children:"RETURN"}),"\u64CD\u4F5C\u7B26"]}),"\u4E2D\u6B62\u6267\u884C\u3002\u9ED8\u8BA4\u60C5\u51B5\u4E0B\uFF0C\u54CD\u5E94\u6D88\u606F\u503C\u4E5F\u5B58\u50A8\u5728",(0,i.jsx)(e.code,{children:"exportFile"}),"\u5C5E\u6027\u4E2D\u3002"]}),"\n",(0,i.jsx)(e.p,{children:'\u5982\u679C\u6240\u6709\u64CD\u4F5C\u90FD\u6210\u529F\u5B8C\u6210\uFF0C\u5219\u751F\u6210\u76F8\u5E94\u7684"OK\u6D88\u606F"\u4F5C\u4E3A\u54CD\u5E94\u3002'}),"\n",(0,i.jsx)(e.h2,{id:"\u793A\u4F8B-3",children:"\u793A\u4F8B 3"}),"\n",(0,i.jsx)(e.h3,{id:"\u4EFB\u52A1-2",children:"\u4EFB\u52A1"}),"\n",(0,i.jsx)(e.p,{children:"\u6211\u4EEC\u6709\u56FE\u4E66\u8BA2\u5355\u7684\u903B\u8F91\u3002"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-lsf",children:"CLASS Book '\u56FE\u4E66';\r\nid '\u4EE3\u7801' = DATA STRING[10] (Book) IN id;\r\nname '\u540D\u79F0' = DATA ISTRING[100] (Book) IN id;\r\n\r\nbook (STRING[10] id) = GROUP AGGR Book b BY id(b);\r\n\r\nCLASS Order '\u8BA2\u5355';\r\ndate '\u65E5\u671F' = DATA DATE (Order);\r\nnumber '\u7F16\u53F7' = DATA STRING[10] (Order);\r\n\r\nCLASS OrderDetail '\u8BA2\u5355\u660E\u7EC6';\r\norder '\u8BA2\u5355' = DATA Order (OrderDetail) NONULL DELETE;\r\n\r\nbook '\u56FE\u4E66' = DATA Book (OrderDetail) NONULL;\r\nnameBook '\u56FE\u4E66' (OrderDetail d) = name(book(d));\r\n\r\nquantity '\u6570\u91CF' = DATA INTEGER (OrderDetail);\r\nprice '\u5355\u4EF7' = DATA NUMERIC[14,2] (OrderDetail);\r\n\r\nFORM order '\u8BA2\u5355'\r\n    OBJECTS o = Order PANEL\r\n    PROPERTIES(o) date, number\r\n\r\n    OBJECTS d = OrderDetail\r\n    PROPERTIES(d) nameBook, quantity, price, NEW, DELETE\r\n    FILTERS order(d) == o\r\n\r\n    EDIT Order OBJECT o\r\n;\r\n\r\nFORM orders '\u8BA2\u5355\u5217\u8868'\r\n    OBJECTS i = Order\r\n    PROPERTIES(i) READONLY date, number\r\n    PROPERTIES(i) NEWSESSION NEW, EDIT, DELETE\r\n;\r\n\r\nNAVIGATOR {\r\n    NEW orders;\r\n}\n"})}),"\n",(0,i.jsx)(e.p,{children:"\u6211\u4EEC\u9700\u8981\u5411\u7279\u5B9AURL\u53D1\u9001\u4E00\u4E2AHTTP\u8BF7\u6C42\uFF0C\u4EE5JSON\u683C\u5F0F\u521B\u5EFA\u65B0\u8BA2\u5355\u3002"}),"\n",(0,i.jsx)(e.h3,{id:"\u89E3\u51B3\u65B9\u6848-2",children:"\u89E3\u51B3\u65B9\u6848"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-lsf",children:"FORM exportOrder\r\n    OBJECTS order = Order PANEL\r\n    PROPERTIES dt = date(order), nm = number(order)\r\n\r\n    OBJECTS detail = OrderDetail\r\n    PROPERTIES id = id(book(detail)), qn = quantity(detail), pr = price(detail)\r\n    FILTERS order(detail) == order\r\n;\r\n\r\nexportOrder '\u53D1\u9001' (Order o)  {\r\n    EXPORT exportOrder OBJECTS order = o JSON;\r\n\r\n    LOCAL result = FILE();\r\n    EXTERNAL HTTP 'http://localhost:7651/exec?action=Location.importOrder' PARAMS exportFile() TO result;\r\n}\r\n\r\nEXTEND FORM orders\r\n    PROPERTIES(i) exportOrder;\r\n;\n"})}),"\n",(0,i.jsxs)(e.p,{children:["\u8981\u521B\u5EFA\u5E26\u6709\u5D4C\u5957\u6807\u7B7E\u7684JSON\uFF0C\u6211\u4EEC\u9700\u8981\u521B\u5EFA\u4E00\u4E2A\u8868\u5355\uFF0C\u5176\u4E2D\u5305\u542B\u901A\u8FC7",(0,i.jsx)(e.code,{children:"FILTERS"}),"\u64CD\u4F5C\u7B26\u5757\u94FE\u63A5\u7684\u76F8\u5E94\u5BF9\u8C61\u3002\u6839\u636E\u5BF9\u8C61\u4E4B\u95F4\u7684\u4F9D\u8D56\u5173\u7CFB\uFF0C\u7CFB\u7EDF\u5C06\u751F\u6210\u5177\u6709\u76F8\u5E94\u7ED3\u6784\u7684JSON\u6587\u4EF6\u3002\u5728\u8003\u8651\u7684\u793A\u4F8B\u4E2D\uFF0C\u8F93\u51FA\u7684JSON\u7ED3\u6784\u5C06\u5982\u4E0B\u6240\u793A\uFF1A"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-json",children:'{\r\n   "dt":"20.08.18",\r\n   "nm":"1",\r\n   "detail":[\r\n      {\r\n         "pr":5.99,\r\n         "id":"b1",\r\n         "qn":3\r\n      },\r\n      {\r\n         "pr":6.99,\r\n         "id":"b2",\r\n         "qn":2\r\n      }\r\n   ]\r\n}\n'})}),"\n",(0,i.jsxs)(e.p,{children:["\u6211\u4EEC\u6CA1\u6709\u4E3A",(0,i.jsx)(e.code,{children:"order"}),"\u521B\u5EFA\u81EA\u5B9A\u4E49\u6807\u7B7E\uFF0C\u56E0\u4E3A\u5BF9\u8C61\u503C\u4F5C\u4E3A\u53C2\u6570\u4F20\u9012\u7ED9",(0,i.jsx)(e.code,{children:"EXPORT"}),"\u64CD\u4F5C\u7B26\u3002\r\n\u5728\u6B64\u793A\u4F8B\u4E2D\uFF0C\u5FFD\u7565\u4E86HTTP\u8BF7\u6C42\u7684\u54CD\u5E94\u3002"]}),"\n",(0,i.jsx)(e.h2,{id:"\u793A\u4F8B-4",children:"\u793A\u4F8B 4"}),"\n",(0,i.jsx)(e.h3,{id:"\u4EFB\u52A1-3",children:"\u4EFB\u52A1"}),"\n",(0,i.jsxs)(e.p,{children:["\u4E0E",(0,i.jsx)(e.a,{href:"#example-3",children:(0,i.jsx)(e.strong,{children:"\u793A\u4F8B 3"})}),"\u7C7B\u4F3C\u3002"]}),"\n",(0,i.jsx)(e.p,{children:"\u6211\u4EEC\u9700\u8981\u5904\u7406\u4F20\u5165\u7684HTTP\u8BF7\u6C42\uFF0C\u5E76\u6839\u636E\u8BF7\u6C42\u4E2D\u63D0\u4F9B\u7684\u53C2\u6570\u5728\u6570\u636E\u5E93\u4E2D\u521B\u5EFA\u65B0\u8BA2\u5355\u3002"}),"\n",(0,i.jsx)(e.h3,{id:"\u89E3\u51B3\u65B9\u6848-3",children:"\u89E3\u51B3\u65B9\u6848"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-lsf",children:"date = DATA LOCAL DATE();\r\nnumber = DATA LOCAL STRING[10]();\r\n\r\nid = DATA LOCAL STRING[10] (INTEGER);\r\nquantity = DATA LOCAL INTEGER (INTEGER);\r\nprice = DATA LOCAL NUMERIC[14,2] (INTEGER);\r\nFORM importOrder\r\n    PROPERTIES dt = date(), nm = number()\r\n\r\n    OBJECTS detail = INTEGER\r\n    PROPERTIES id = id(detail), qn = quantity(detail), pr = price(detail)\r\n;\r\n\r\nimportOrder (FILE f)  {\r\n    IMPORT importOrder JSON FROM f;\r\n\r\n    NEW o = Order {\r\n        date(o) <- date();\r\n        number(o) <- number();\r\n        FOR id(INTEGER detail) DO NEW d = OrderDetail {\r\n            order(d) <- o;\r\n            book(d) <- book(id(detail));\r\n            quantity(d) <- quantity(detail);\r\n            price(d) <- price(detail);\r\n        }\r\n\r\n        APPLY;\r\n    }\r\n}\n"})}),"\n",(0,i.jsxs)(e.p,{children:["\u8981\u5BFC\u5165JSON\u683C\u5F0F\u7684\u76F8\u5E94\u6587\u4EF6\uFF0C\u6211\u4EEC\u9700\u8981\u521B\u5EFA\u4E00\u4E2A\u7ED3\u6784\u7C7B\u4F3C\u7684\u8868\u5355\uFF0C\u9664\u4E86\u5C06",(0,i.jsx)(e.code,{children:"INTEGER"}),"\u7C7B\u578B\u7528\u4F5C\u5BF9\u8C61\u7C7B\u3002\u5728\u5BFC\u5165\u8FC7\u7A0B\u4E2D\uFF0C\u6807\u7B7E\u503C\u5C06\u88AB\u653E\u7F6E\u5728\u5177\u6709\u76F8\u5E94\u540D\u79F0\u7684\u5C5E\u6027\u4E2D\u3002",(0,i.jsx)(e.code,{children:"date"}),"\u548C",(0,i.jsx)(e.code,{children:"number"}),"\u5C5E\u6027\u6CA1\u6709\u53C2\u6570\uFF0C\u56E0\u4E3A\u5B83\u4EEC\u5728JSON\u4E2D\u7684\u503C\u662F\u5728\u6700\u9876\u5C42\u63D0\u4F9B\u7684\u3002"]}),"\n",(0,i.jsx)(e.h2,{id:"\u793A\u4F8B-5",children:"\u793A\u4F8B 5"}),"\n",(0,i.jsx)(e.h3,{id:"\u4EFB\u52A1-4",children:"\u4EFB\u52A1"}),"\n",(0,i.jsxs)(e.p,{children:["\u4E0E",(0,i.jsx)(e.a,{href:"#example-4",children:(0,i.jsx)(e.strong,{children:"\u793A\u4F8B 4"})}),"\u7C7B\u4F3C\u3002"]}),"\n",(0,i.jsxs)(e.p,{children:["\u6211\u4EEC\u9700\u8981\u5411\u7279\u5B9AURL\u53D1\u9001HTTP\u8BF7\u6C42\uFF0C\u4EE5JSON\u683C\u5F0F\u521B\u5EFA\u8BA2\u5355\uFF0C\u5982\u524D\u4E00\u4E2A\u793A\u4F8B\u6240\u793A\uFF0C\u4F46\u6240\u6709\u5185\u5BB9\u5FC5\u987B\u5305\u88C5\u5728",(0,i.jsx)(e.code,{children:"order"}),"\u6807\u7B7E\u4E2D\u3002"]}),"\n",(0,i.jsx)(e.h3,{id:"\u89E3\u51B3\u65B9\u6848-4",children:"\u89E3\u51B3\u65B9\u6848"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-lsf",children:"GROUP order;\r\nFORM exportOrderNew\r\n    OBJECTS o = Order\r\n    PROPERTIES IN order dt = date(o), nm = number(o)\r\n\r\n    OBJECTS detail = OrderDetail IN order\r\n    PROPERTIES id = id(book(detail)), qn = quantity(detail), pr = price(detail)\r\n    FILTERS order(detail) == o\r\n;\r\n\r\nexportOrderNew '\u53D1\u9001\uFF08\u65B0\u683C\u5F0F\uFF09' (Order o)  {\r\n    EXPORT exportOrderNew OBJECTS o = o JSON;\r\n\r\n    LOCAL result = FILE();\r\n    EXTERNAL HTTP 'http://localhost:7651/exec?action=Location.importOrderNew' PARAMS exportFile() TO result;\r\n}\r\n\r\nEXTEND FORM orders\r\n    PROPERTIES(i) exportOrderNew;\r\n;\n"})}),"\n",(0,i.jsxs)(e.p,{children:["\u4E0E\u524D\u4E00\u4E2A\u793A\u4F8B\u4E0D\u540C\uFF0C\u8FD9\u91CC\u6211\u4EEC\u4F7F\u7528",(0,i.jsxs)(e.a,{href:"/GROUP_operator",children:[(0,i.jsx)(e.code,{children:"GROUP"}),"\u64CD\u4F5C\u7B26"]}),"\u521B\u5EFA\u4E00\u4E2A\u540D\u4E3A",(0,i.jsx)(e.code,{children:"order"}),"\u7684\u5C5E\u6027",(0,i.jsx)(e.a,{href:"/Groups_of_properties_and_actions",children:"\u7EC4"}),"\u3002\u5728\u58F0\u660E\u8868\u5355\u65F6\uFF0C\u6211\u4EEC\u5C06\u91C7\u8D2D\u8BA2\u5355\u7684\u6240\u6709\u5C5E\u6027\u4EE5\u53CA",(0,i.jsx)(e.code,{children:"detail"}),"\u5BF9\u8C61\u653E\u5165\u6B64\u5C5E\u6027\u7EC4\u4E2D\u3002\u7ED3\u679CJSON\u5C06\u5982\u4E0B\u6240\u793A\uFF1A"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-json",children:'{\r\n   "order":{\r\n      "dt":"20.08.18",\r\n      "nm":"1",\r\n      "detail":[\r\n         {\r\n            "pr":5.99,\r\n            "id":"b1",\r\n            "qn":3\r\n         },\r\n         {\r\n            "pr":6.99,\r\n            "id":"b2",\r\n            "qn":2\r\n         }\r\n      ]\r\n   }\r\n}\n'})}),"\n",(0,i.jsx)(e.h2,{id:"\u793A\u4F8B-6",children:"\u793A\u4F8B 6"}),"\n",(0,i.jsx)(e.h3,{id:"\u4EFB\u52A1-5",children:"\u4EFB\u52A1"}),"\n",(0,i.jsxs)(e.p,{children:["\u4E0E",(0,i.jsx)(e.a,{href:"#example-5",children:(0,i.jsx)(e.strong,{children:"\u793A\u4F8B 5"})}),"\u7C7B\u4F3C\u3002"]}),"\n",(0,i.jsx)(e.p,{children:"\u6211\u4EEC\u9700\u8981\u5904\u7406\u4F20\u5165\u7684HTTP\u8BF7\u6C42\uFF0C\u5E76\u6839\u636E\u8BF7\u6C42\u4E2D\u63D0\u4F9B\u7684\u53C2\u6570\u5728\u6570\u636E\u5E93\u4E2D\u521B\u5EFA\u65B0\u8BA2\u5355\u3002"}),"\n",(0,i.jsx)(e.h3,{id:"\u89E3\u51B3\u65B9\u6848-5",children:"\u89E3\u51B3\u65B9\u6848"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-lsf",children:"FORM importOrderNew\r\n    PROPERTIES IN order dt = date(), nm = number()\r\n\r\n    OBJECTS detail = INTEGER IN order\r\n    PROPERTIES id = id(detail), qn = quantity(detail), pr = price(detail)\r\n;\r\n\r\nimportOrderNew (FILE f)  {\r\n    IMPORT importOrderNew JSON FROM f;\r\n\r\n    NEW o = Order {\r\n        date(o) <- date();\r\n        number(o) <- number();\r\n        FOR id(INTEGER detail) DO NEW d = OrderDetail {\r\n            order(d) <- o;\r\n            book(d) <- book(id(detail));\r\n            quantity(d) <- quantity(detail);\r\n            price(d) <- price(detail);\r\n        }\r\n\r\n        APPLY;\r\n    }\r\n}\n"})}),"\n",(0,i.jsxs)(e.p,{children:["\u4E0E\u5BFC\u51FA\u8FC7\u7A0B\u4E00\u6837\uFF0C\u6211\u4EEC\u5C06\u6240\u6709\u5C5E\u6027\u548C",(0,i.jsx)(e.code,{children:"detail"}),"\u5BF9\u8C61\u653E\u5728",(0,i.jsx)(e.code,{children:"order"}),"\u7EC4\u4E2D\uFF0C\u4EE5\u6B63\u786E\u63A5\u6536\u65B0\u7248\u672C\u7684JSON\u3002"]}),"\n",(0,i.jsx)(e.h2,{id:"\u793A\u4F8B-7",children:"\u793A\u4F8B 7"}),"\n",(0,i.jsx)(e.h3,{id:"\u4EFB\u52A1-6",children:"\u4EFB\u52A1"}),"\n",(0,i.jsxs)(e.p,{children:["\u4E0E",(0,i.jsx)(e.a,{href:"#example-3",children:(0,i.jsx)(e.strong,{children:"\u793A\u4F8B 3"})}),"\u7C7B\u4F3C\u3002"]}),"\n",(0,i.jsx)(e.p,{children:"\u6211\u4EEC\u9700\u8981\u4F7F\u7528HTTP GET\u8BF7\u6C42\u8FD4\u56DE\u7ED9\u5B9A\u65E5\u671F\u7684\u8BA2\u5355\u7F16\u53F7\u5217\u8868\uFF0C\u5176\u4E2D\u63D0\u4F9B\u4E86\u6B64\u65E5\u671F\u3002"}),"\n",(0,i.jsx)(e.h3,{id:"\u89E3\u51B3\u65B9\u6848-6",children:"\u89E3\u51B3\u65B9\u6848"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-lsf",children:"FORM exportOrders\r\n    OBJECTS date = DATE PANEL\r\n\r\n    OBJECTS order = Order\r\n    PROPERTIES nm = number(order)\r\n    FILTERS date(order) = date\r\n;\r\n\r\ngetOrdersByDate (DATE d) {\r\n    EXPORT exportOrders OBJECTS date = d JSON;\r\n}\n"})}),"\n",(0,i.jsxs)(e.p,{children:["HTTP\u8BF7\u6C42\u5E94\u53D1\u9001\u5230\u7684URL\u5C06\u5982\u4E0B\u6240\u793A\uFF1A",(0,i.jsx)(e.code,{children:"http://localhost:7651/exec?action=Location.getOrdersByDate&p=12.11.2018"}),"\u3002"]}),"\n",(0,i.jsx)(e.p,{children:"\u54CD\u5E94JSON\u5C06\u5982\u4E0B\u6240\u793A\uFF1A"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-json",children:'{\r\n    "order": [\r\n        {\r\n            "nm": "42"\r\n        },\r\n        {\r\n            "nm": "65"\r\n        }\r\n    ]\r\n}\n'})}),"\n",(0,i.jsx)(e.h2,{id:"\u793A\u4F8B-8",children:"\u793A\u4F8B 8"}),"\n",(0,i.jsx)(e.h3,{id:"\u4EFB\u52A1-7",children:"\u4EFB\u52A1"}),"\n",(0,i.jsxs)(e.p,{children:["\u4E0E",(0,i.jsx)(e.a,{href:"#example-3",children:(0,i.jsx)(e.strong,{children:"\u793A\u4F8B 3"})}),"\u7C7B\u4F3C\u3002"]}),"\n",(0,i.jsx)(e.p,{children:"\u6BCF\u4E2A\u8BA2\u5355\u90FD\u6709\u4E00\u4E2A\u9644\u52A0\u7684\u6587\u4EF6\u5217\u8868\u3002"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-lsf",children:"CLASS Attachment '\u9644\u4EF6';\r\norder = DATA Order (Attachment) NONULL DELETE;\r\nname '\u540D\u79F0' = DATA STRING (Attachment);\r\nfile = DATA FILE (Attachment);\n"})}),"\n",(0,i.jsx)(e.p,{children:"\u6211\u4EEC\u9700\u8981\u5B9E\u73B0HTTP GET\u8BF7\u6C42\uFF0C\u8BE5\u8BF7\u6C42\u5C06\u4E3A\u4F20\u9012\u7684\u8BA2\u5355\u5185\u90E8\u6807\u8BC6\u7B26\u8FD4\u56DE\u5176\u53C2\u6570\u548C\u6587\u4EF6\u5217\u8868\u3002\r\n\u6B64\u5916\uFF0C\u6211\u4EEC\u8FD8\u9700\u8981\u5B9E\u73B0\u4E00\u4E2A\u5355\u72EC\u7684\u8BF7\u6C42\u6765\u68C0\u7D22\u7279\u5B9A\u6587\u4EF6\u7684\u5185\u5BB9\u3002"}),"\n",(0,i.jsx)(e.h3,{id:"\u89E3\u51B3\u65B9\u6848-7",children:"\u89E3\u51B3\u65B9\u6848"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-lsf",children:"FORM orderAttachments\r\n    OBJECTS o = Order\r\n    PROPERTIES(o) number, date\r\n\r\n    OBJECTS attachments = Attachment\r\n    PROPERTIES id = VALUE(attachments), name(attachments)\r\n;\r\n\r\ngetOrderAttachments (LONG orderId) {\r\n    FOR LONG(Order o AS Order) = orderId DO {\r\n        EXPORT orderAttachments OBJECTS o = o JSON;\r\n    }\r\n}\n"})}),"\n",(0,i.jsxs)(e.p,{children:["\u8981\u751F\u6210HTTP\u8BF7\u6C42\uFF0C\u8BF7\u4F7F\u7528\u4EE5\u4E0BURL\uFF1A",(0,i.jsx)(e.a,{href:"http://localhost:7651/exec?action=getOrderAttachments&p=32178%E3%80%82",children:"http://localhost:7651/exec?action=getOrderAttachments&p=32178\u3002"}),"\r\n\u5176\u4E2D_p_\u53C2\u6570\u5305\u542B\u8BA2\u5355\u5185\u90E8\u6807\u8BC6\u7B26\u3002"]}),"\n",(0,i.jsx)(e.p,{children:"\u54CD\u5E94\u5C06\u8FD4\u56DE\u4F8B\u5982\u4EE5\u4E0BJSON\uFF1A"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-json",children:'{\r\n    "date": "20.10.2021",\r\n    "number": "12",\r\n    "attachments": [\r\n        {\r\n            "name": "\u6587\u4EF6 1",\r\n            "id": 32180\r\n        },\r\n        {\r\n            "name": "\u6587\u4EF6 2",\r\n            "id": 32183\r\n        }\r\n    ]\r\n}\n'})}),"\n",(0,i.jsxs)(e.p,{children:["_id_\u5C5E\u6027\u5C06\u5305\u542B\u5185\u90E8\u6587\u4EF6\u6807\u8BC6\u7B26\u3002\u7136\u540E\u53EF\u4EE5\u901A\u8FC7\u4F7F\u7528\u4EE5\u4E0BURL\u7684\u67E5\u8BE2\u8BFB\u53D6\u8FD9\u4E9B\u6587\u4EF6\u7684\u5185\u5BB9\uFF1A\r\n",(0,i.jsx)(e.a,{href:"http://localhost:7651/exec?action=getOrderAttachment&p=32180%E3%80%82_getOrderAttachment_%E6%93%8D%E4%BD%9C%E5%A3%B0%E6%98%8E%E5%A6%82%E4%B8%8B%EF%BC%9A",children:"http://localhost:7651/exec?action=getOrderAttachment&p=32180\u3002_getOrderAttachment_\u64CD\u4F5C\u58F0\u660E\u5982\u4E0B\uFF1A"})]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-lsf",children:"getOrderAttachment (LONG id) {\r\n    FOR LONG(Attachment a AS Attachment) = id DO\r\n        exportFile() <- file(a); \r\n}\n"})}),"\n",(0,i.jsx)(e.p,{children:"\u67E5\u8BE2\u5C06\u8FD4\u56DE\u4E00\u4E2A\u6587\u4EF6\uFF0C\u5176_Content-Type_\u5BF9\u5E94\u4E8E_file_\u5C5E\u6027\u7684\u6269\u5C55\u540D\u3002"})]})}function h(r={}){let{wrapper:e}={...(0,t.R)(),...r.components};return e?(0,i.jsx)(e,{...r,children:(0,i.jsx)(a,{...r})}):a(r)}},28453:function(r,e,n){n.d(e,{R:()=>l,x:()=>c});var d=n(96540);let i={},t=d.createContext(i);function l(r){let e=d.useContext(t);return d.useMemo(function(){return"function"==typeof r?r(e):{...e,...r}},[e,r])}function c(r){let e;return e=r.disableParentContext?"function"==typeof r.components?r.components(i):r.components||i:l(r.components),d.createElement(t.Provider,{value:e},r.children)}}}]);