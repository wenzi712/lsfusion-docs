"use strict";(self.webpackChunkls_fusion_docs=self.webpackChunkls_fusion_docs||[]).push([["26869"],{97177:function(e,n,r){r.r(n),r.d(n,{metadata:()=>s,default:()=>h,frontMatter:()=>l,contentTitle:()=>d,toc:()=>o,assets:()=>c});var s=JSON.parse('{"id":"CONSTRAINT_statement","title":"CONSTRAINT \u8BED\u53E5","description":"CONSTRAINT \u8BED\u53E5\u7528\u4E8E\u521B\u5EFA\u7EA6\u675F\u3002","source":"@site/i18n/zh-CN/docusaurus-plugin-content-docs/current/CONSTRAINT_statement.md","sourceDirName":".","slug":"/CONSTRAINT_statement","permalink":"/CONSTRAINT_statement","draft":false,"unlisted":false,"editUrl":"https://github.com/lsfusion/platform/edit/master/docs/zh-CN/CONSTRAINT_statement.md","tags":[],"version":"current","lastUpdatedAt":null,"frontMatter":{"title":"CONSTRAINT \u8BED\u53E5"},"sidebar":"learn","previous":{"title":"<- WHEN \u8BED\u53E5","permalink":"/lt-_WHEN_statement"},"next":{"title":"=> \u8BED\u53E5","permalink":"/=gt_statement"}}'),t=r(74848),i=r(28453);let l={title:"CONSTRAINT \u8BED\u53E5"},d,c={},o=[{value:"\u8BED\u6CD5",id:"\u8BED\u6CD5",level:3},{value:"\u63CF\u8FF0",id:"\u63CF\u8FF0",level:3},{value:"\u53C2\u6570",id:"\u53C2\u6570",level:3},{value:"\u793A\u4F8B",id:"\u793A\u4F8B",level:3}];function a(e){let n={a:"a",admonition:"admonition",code:"code",h3:"h3",li:"li",p:"p",pre:"pre",ul:"ul",...(0,i.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.code,{children:"CONSTRAINT"})," \u8BED\u53E5\u7528\u4E8E\u521B\u5EFA",(0,t.jsx)(n.a,{href:"/Constraints",children:"\u7EA6\u675F"}),"\u3002"]}),"\n",(0,t.jsx)(n.h3,{id:"\u8BED\u6CD5",children:"\u8BED\u6CD5"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"CONSTRAINT eventClause constraintExpr [CHECKED [BY propertyId1, ..., propertyIdN]] MESSAGE messageExpr\r\n    [PROPERTIES outPropertyId1, ..., outPropertyIdM];\n"})}),"\n",(0,t.jsx)(n.h3,{id:"\u63CF\u8FF0",children:"\u63CF\u8FF0"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.code,{children:"CONSTRAINT"})," \u8BED\u53E5\u521B\u5EFA\u4E00\u4E2A\u7EA6\u675F\u3002\u5982\u679C\u7EA6\u675F\u88AB\u8FDD\u53CD\uFF0C\u7CFB\u7EDF\u5C06\u5411\u7528\u6237\u663E\u793A\u8BED\u53E5\u4E2D\u5B9A\u4E49\u7684",(0,t.jsx)(n.a,{href:"/Constraints#message",children:"\u6D88\u606F"}),"\u3002"]}),"\n",(0,t.jsxs)(n.p,{children:["\u6B64\u5916\uFF0C\u901A\u8FC7\u4F7F\u7528 ",(0,t.jsx)(n.code,{children:"CHECKED"})," \u9009\u9879\uFF0C\u60A8\u53EF\u4EE5\u5728\u663E\u793A\u7528\u4E8E\u66F4\u6539\u53EF\u80FD\u8FDD\u53CD\u7EA6\u675F\u7684\u5C5E\u6027\u503C\u7684\u5BF9\u8BDD\u6846\u65F6\u4F7F\u7528\u8BE5\u7EA6\u675F\u3002\u5728\u8FD9\u79CD\u60C5\u51B5\u4E0B\uFF0C\u5BF9\u8BDD\u6846\u4E2D\u5C06\u8BBE\u7F6E\u4E00\u4E2A\u989D\u5916\u7684\u8FC7\u6EE4\u5668\uFF0C\u4EE5\u786E\u4FDD\u5F53\u5C5E\u6027\u503C\u66F4\u6539\u65F6\uFF0C\u7EA6\u675F\u4E0D\u4F1A\u88AB\u8FDD\u53CD\u3002\u5982\u679C\u9700\u8981\u9650\u5236\u5C06\u6267\u884C\u4E0A\u8FF0\u8FC7\u6EE4\u7684\u5C5E\u6027\u96C6\uFF0C\u53EF\u4EE5\u5728\u5173\u952E\u5B57 ",(0,t.jsx)(n.code,{children:"BY"})," \u4E4B\u540E\u6307\u5B9A\u5C5E\u6027\u5217\u8868\u3002"]}),"\n",(0,t.jsxs)(n.admonition,{type:"info",children:[(0,t.jsx)(n.p,{children:"\u521B\u5EFA\u7EA6\u675F\u4E0E\u4EE5\u4E0B\u8BED\u53E5\u975E\u5E38\u76F8\u4F3C\uFF1A"}),(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-lsf",children:"constraintProperty = constraintExpr;\r\nWHEN eventClause [=GROUP MAX constraintProperty(...)]() DO {\r\n    PRINT outConstraintPropertyForm MESSAGE NOWAIT;\r\n    CANCEL;\r\n}\n"})}),(0,t.jsxs)(n.p,{children:["\u4F46\u5B83\u8FD8\u5177\u6709",(0,t.jsx)(n.a,{href:"/Constraints",children:"\u8BB8\u591A\u4F18\u52BF"}),"\u3002"]})]}),"\n",(0,t.jsx)(n.h3,{id:"\u53C2\u6570",children:"\u53C2\u6570"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.code,{children:"eventClause"})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.a,{href:"/Event_description_block",children:"\u4E8B\u4EF6\u63CF\u8FF0\u5757"}),"\u3002\u63CF\u8FF0\u521B\u5EFA\u7684\u7EA6\u675F\u5C06\u5728",(0,t.jsx)(n.a,{href:"/Events",children:"\u54EA\u4E2A\u4E8B\u4EF6"}),"\u53D1\u751F\u65F6\u88AB\u68C0\u67E5\u3002"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.code,{children:"constraintExpr"})}),"\n",(0,t.jsxs)(n.p,{children:["\u4E00\u4E2A",(0,t.jsx)(n.a,{href:"/Expression",children:"\u8868\u8FBE\u5F0F"}),"\uFF0C\u5176\u503C\u662F\u521B\u5EFA\u7684\u7EA6\u675F\u7684\u6761\u4EF6\u3002\u5982\u679C\u83B7\u5F97\u7684\u5C5E\u6027\u4E0D\u5305\u542B ",(0,t.jsxs)(n.a,{href:"/PREV_operator",children:[(0,t.jsx)(n.code,{children:"PREV"})," \u8FD0\u7B97\u7B26"]}),"\uFF0C\u5E73\u53F0\u4F1A\u81EA\u52A8\u5C06\u5176\u5305\u88C5\u5230 ",(0,t.jsxs)(n.a,{href:"/Change_operators_SET_CHANGED_etc",children:[(0,t.jsx)(n.code,{children:"SET"})," \u8FD0\u7B97\u7B26"]}),"\u4E2D\u3002"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.code,{children:"propertyId1, ..., propertyIdN"})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.a,{href:"/IDs#propertyid",children:"\u5C5E\u6027 ID"})," \u5217\u8868\u3002\u5F53\u663E\u793A\u8BE5\u5217\u8868\u4E2D\u6BCF\u4E2A\u5C5E\u6027\u7684\u66F4\u6539\u5BF9\u8BDD\u6846\u65F6\uFF0C\u8FDD\u53CD\u521B\u5EFA\u7684\u7EA6\u675F\u7684\u9009\u9879\u5C06\u88AB\u8FC7\u6EE4\u3002"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.code,{children:"messageExpr"})}),"\n",(0,t.jsxs)(n.p,{children:["\u5F53\u8BBE\u7F6E\u7684\u7EA6\u675F\u88AB\u8FDD\u53CD\u65F6\uFF0C\u5176\u503C\u5C06\u4F5C\u4E3A\u6D88\u606F\u663E\u793A\u7ED9\u7528\u6237\u7684\u8868\u8FBE\u5F0F\u3002\u5B83\u53EF\u4EE5\u662F",(0,t.jsx)(n.a,{href:"/IDs#strliteral",children:"\u5B57\u7B26\u4E32\u5B57\u9762\u91CF"}),"\u6216\u4E0D\u5E26\u53C2\u6570\u7684\u5C5E\u6027\u3002"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.code,{children:"outPropertyId1, ..., outPropertyIdM"})}),"\n",(0,t.jsxs)(n.p,{children:["\u5F53\u6307\u5B9A\u7684\u7EA6\u675F\u88AB\u8FDD\u53CD\u65F6\uFF0C\u5176\u503C\u5C06\u5728\u6D88\u606F\u4E2D\u663E\u793A\u7ED9\u7528\u6237\u7684\u5C5E\u6027 ID \u5217\u8868\u3002\u5982\u679C\u672A\u6307\u5B9A\u5217\u8868\uFF0C\u5219\u9009\u62E9\u4E0E\u7EA6\u675F\u6761\u4EF6\u7684\u53C2\u6570\u7C7B\u5339\u914D\u4E14\u5C5E\u4E8E",(0,t.jsx)(n.a,{href:"/Groups_of_properties_and_actions",children:"\u5C5E\u6027\u7EC4"})," ",(0,t.jsx)(n.code,{children:"System.id"})," \u7684\u5C5E\u6027\u3002"]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"\u793A\u4F8B",children:"\u793A\u4F8B"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-lsf",children:"// \u5E93\u5B58\u4F59\u989D\u4E0D\u5C0F\u4E8E0\r\nCONSTRAINT balance(Sku s, Stock st) < 0 MESSAGE '\u4EE5\u4E0B\u5546\u54C1\u5E93\u5B58\u4E0D\u80FD\u4E3A\u8D1F\u6570: ' + \r\n    (GROUP CONCAT '\u5546\u54C1: ' + name(Sku ss) + ' \u4ED3\u5E93: ' + name(Stock sst), '\\n' IF SET(balance(ss, sst) < 0)  ORDER sst);\r\n\r\nbarcode = DATA STRING[15] (Sku);\r\n// \"\u6A21\u62DF\"\u5B89\u5168\u7B56\u7565\r\nCONSTRAINT DROPCHANGED(barcode(Sku s)) AND name(currentUser()) != 'admin'\r\n    MESSAGE '\u53EA\u6709\u7BA1\u7406\u5458\u624D\u80FD\u66F4\u6539\u5DF2\u521B\u5EFA\u4EA7\u54C1\u7684\u6761\u5F62\u7801';\r\n\r\nsku = DATA Sku (OrderDetail);\r\nin = DATA BOOLEAN (Sku, Customer);\r\n\r\nCONSTRAINT sku(OrderDetail d) AND NOT in(sku(d), customer(order(d)))\r\n    CHECKED BY sku[OrderDetail] // \u5728\u4E3A\u8BA2\u5355\u9879\u9009\u62E9\u5546\u54C1\u65F6\u5C06\u5E94\u7528\u53EF\u7528\u5546\u54C1\u7684\u8FC7\u6EE4\u5668\r\n    MESSAGE '\u5728\u8BA2\u5355\u4E2D\uFF0C\u4E3A\u6240\u9009\u5BA2\u6237\u9009\u62E9\u4E86\u7528\u6237\u4E0D\u53EF\u7528\u7684\u5546\u54C1';\n"})})]})}function h(e={}){let{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(a,{...e})}):a(e)}},28453:function(e,n,r){r.d(n,{R:()=>l,x:()=>d});var s=r(96540);let t={},i=s.createContext(t);function l(e){let n=s.useContext(i);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:l(e.components),s.createElement(i.Provider,{value:n},e.children)}}}]);