"use strict";(self.webpackChunkls_fusion_docs=self.webpackChunkls_fusion_docs||[]).push([["92781"],{5172:function(e,r,n){n.r(r),n.d(r,{metadata:()=>d,default:()=>E,frontMatter:()=>o,contentTitle:()=>c,toc:()=>i,assets:()=>t});var d=JSON.parse('{"id":"How-to_NEWSESSION","title":"NEWSESSION","description":"\u793A\u4F8B 1","source":"@site/i18n/zh-CN/docusaurus-plugin-content-docs/current/How-to_NEWSESSION.md","sourceDirName":".","slug":"/How-to_NEWSESSION","permalink":"/How-to_NEWSESSION","draft":false,"unlisted":false,"editUrl":"https://github.com/lsfusion/platform/edit/master/docs/zh-CN/How-to_NEWSESSION.md","tags":[],"version":"current","lastUpdatedAt":null,"frontMatter":{"title":"NEWSESSION"},"sidebar":"learn","previous":{"title":"WHILE","permalink":"/How-to_WHILE"},"next":{"title":"SEEK","permalink":"/How-to_SEEK"}}'),s=n(74848),l=n(28453);let o={title:"NEWSESSION"},c,t={},i=[{value:"\u793A\u4F8B 1",id:"\u793A\u4F8B-1",level:2},{value:"\u4EFB\u52A1",id:"\u4EFB\u52A1",level:3},{value:"\u89E3\u51B3\u65B9\u6848",id:"\u89E3\u51B3\u65B9\u6848",level:3},{value:"\u793A\u4F8B 2",id:"\u793A\u4F8B-2",level:2},{value:"\u4EFB\u52A1",id:"\u4EFB\u52A1-1",level:3},{value:"\u89E3\u51B3\u65B9\u6848",id:"\u89E3\u51B3\u65B9\u6848-1",level:3},{value:"\u793A\u4F8B 3",id:"\u793A\u4F8B-3",level:2},{value:"\u4EFB\u52A1",id:"\u4EFB\u52A1-2",level:3},{value:"\u89E3\u51B3\u65B9\u6848",id:"\u89E3\u51B3\u65B9\u6848-2",level:3},{value:"\u793A\u4F8B 4",id:"\u793A\u4F8B-4",level:2},{value:"\u4EFB\u52A1",id:"\u4EFB\u52A1-3",level:3},{value:"\u89E3\u51B3\u65B9\u6848",id:"\u89E3\u51B3\u65B9\u6848-3",level:3}];function a(e){let r={a:"a",code:"code",h2:"h2",h3:"h3",p:"p",pre:"pre",strong:"strong",...(0,l.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(r.h2,{id:"\u793A\u4F8B-1",children:"\u793A\u4F8B 1"}),"\n",(0,s.jsx)(r.h3,{id:"\u4EFB\u52A1",children:"\u4EFB\u52A1"}),"\n",(0,s.jsx)(r.p,{children:"\u6211\u4EEC\u6709\u4E00\u4E2A\u8BA2\u5355\uFF0C\u5305\u542B\u8BA2\u5355\u7F16\u53F7\u548C\u5DF2\u8FC7\u8D26/\u672A\u8FC7\u8D26\u6807\u5FD7\u3002"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-lsf",children:"CLASS Order 'Order';\r\n\r\nisPosted 'Completed' = DATA BOOLEAN (Order);\r\nnumber 'Number' = DATA INTEGER (Order);\r\n\r\nFORM orders\r\n    OBJECTS o = Order\r\n    PROPERTIES(o) READONLY isPosted, number\r\n;\n"})}),"\n",(0,s.jsx)(r.p,{children:"\u6211\u4EEC\u9700\u8981\u521B\u5EFA\u4E00\u4E2A\u64CD\u4F5C\uFF0C\u5728\u5355\u72EC\u7684\u66F4\u6539\u4F1A\u8BDD\u4E2D\u8FC7\u8D26\u6B64\u8BA2\u5355\uFF0C\u7136\u540E\u5C06\u5176\u6DFB\u52A0\u5230\u5305\u542B\u8BA2\u5355\u5217\u8868\u7684\u8868\u5355\u4E2D\u3002"}),"\n",(0,s.jsx)(r.h3,{id:"\u89E3\u51B3\u65B9\u6848",children:"\u89E3\u51B3\u65B9\u6848"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-lsf",children:"post 'Complete' (Order o)  {\r\n    NEWSESSION {\r\n        isPosted(o) <- TRUE;\r\n        APPLY;\r\n    }\r\n}\r\n\r\nEXTEND FORM orders\r\n    PROPERTIES(o) post TOOLBAR\r\n;\n"})}),"\n",(0,s.jsxs)(r.p,{children:["\u5982\u679C\u60A8\u4E0D\u5C06\u8BBE\u7F6E ",(0,s.jsx)(r.code,{children:"isPosted"})," \u5C5E\u6027\u7684\u64CD\u4F5C\u5305\u88C5\u5728 ",(0,s.jsxs)(r.a,{href:"/NEWSESSION_operator",children:[(0,s.jsx)(r.code,{children:"NEWSESSION"})," \u64CD\u4F5C\u7B26"]}),"\u4E2D\uFF0C\u5219 ",(0,s.jsxs)(r.a,{href:"/APPLY_operator",children:[(0,s.jsx)(r.code,{children:"APPLY"})," \u64CD\u4F5C\u7B26"]}),"\u4E5F\u4F1A\u5C06\u5176\u4ED6\u66F4\u6539\uFF08\u5305\u62EC\u5728 ",(0,s.jsx)(r.code,{children:"orders"})," \u8868\u5355\u4E0A\u6240\u505A\u7684\u66F4\u6539\uFF09\u5199\u5165\u6570\u636E\u5E93\u3002"]}),"\n",(0,s.jsx)(r.h2,{id:"\u793A\u4F8B-2",children:"\u793A\u4F8B 2"}),"\n",(0,s.jsx)(r.h3,{id:"\u4EFB\u52A1-1",children:"\u4EFB\u52A1"}),"\n",(0,s.jsxs)(r.p,{children:["\u7C7B\u4F3C\u4E8E ",(0,s.jsx)(r.a,{href:"#example-1",children:(0,s.jsx)(r.strong,{children:"\u793A\u4F8B 1"})}),"\uFF0C\u4F46\u8BA2\u5355\u6709\u4E13\u7528\u7684\u7F16\u8F91\u8868\u5355\u3002"]}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-lsf",children:"FORM order\r\n    OBJECTS o = Order PANEL\r\n    PROPERTIES(o) isPosted, number\r\n\r\n    EDIT Order OBJECT o\r\n;\n"})}),"\n",(0,s.jsx)(r.p,{children:"\u6211\u4EEC\u9700\u8981\u521B\u5EFA\u4E00\u4E2A\u64CD\u4F5C\uFF0C\u521B\u5EFA\u65B0\u8BA2\u5355\u5E76\u6253\u5F00\u5176\u7F16\u8F91\u8868\u5355\u3002\u6B64\u64CD\u4F5C\u5FC5\u987B\u6DFB\u52A0\u5230\u5305\u542B\u8BA2\u5355\u5217\u8868\u7684\u8868\u5355\u4E2D\u3002"}),"\n",(0,s.jsx)(r.h3,{id:"\u89E3\u51B3\u65B9\u6848-1",children:"\u89E3\u51B3\u65B9\u6848"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-lsf",children:"newOrder ()  {\r\n    NEWSESSION {\r\n        NEW o = Order {\r\n            number(o) <- (GROUP MAX number(Order oo)) (+) 1;\r\n            SHOW order OBJECTS o = o;\r\n        }\r\n    }\r\n}\r\n\r\nEXTEND FORM orders\r\n    // \u9009\u9879 1\r\n    PROPERTIES() newOrder DRAW o TOOLBAR\r\n\r\n    // \u9009\u9879 2\r\n    PROPERTIES(o) NEWSESSION NEW\r\n;\n"})}),"\n",(0,s.jsxs)(r.p,{children:["\u5982\u679C\u4E0D\u4F7F\u7528 ",(0,s.jsx)(r.code,{children:"NEWSESSION"})," \u64CD\u4F5C\u7B26\uFF0C\u5219\u65B0\u8BA2\u5355\u7684\u5BF9\u8C61\u5C06\u5728 ",(0,s.jsx)(r.code,{children:"orders"})," \u8868\u5355\u7684",(0,s.jsx)(r.a,{href:"/Change_sessions",children:"\u66F4\u6539\u4F1A\u8BDD"}),'\u4E2D\u521B\u5EFA\u3002\u5982\u679C\u7528\u6237\u672A\u4FDD\u5B58\u5C31\u5173\u95ED\u8868\u5355\uFF0C\u5219\u6240\u6709\u66F4\u6539\u5C06"\u4FDD\u7559"\u5728\u8868\u5355\u7684\u66F4\u6539\u4F1A\u8BDD\u4E2D\uFF0C\u5E76\u4E14\u521B\u5EFA\u7684\u8BA2\u5355\u5C06\u663E\u793A\u5728\u5305\u542B\u8BA2\u5355\u5217\u8868\u7684\u8868\u5355\u4E2D\u3002']}),"\n",(0,s.jsx)(r.h2,{id:"\u793A\u4F8B-3",children:"\u793A\u4F8B 3"}),"\n",(0,s.jsx)(r.h3,{id:"\u4EFB\u52A1-2",children:"\u4EFB\u52A1"}),"\n",(0,s.jsxs)(r.p,{children:["\u7C7B\u4F3C\u4E8E ",(0,s.jsx)(r.a,{href:"#example-2",children:(0,s.jsx)(r.strong,{children:"\u793A\u4F8B 2"})}),"\uFF0C\u4F46\u8BA2\u5355\u53EF\u4EE5\u88AB\u6807\u8BB0\u3002"]}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-lsf",children:"selected 'Mark' = DATA LOCAL BOOLEAN (Order);\r\nEXTEND FORM orders\r\n    PROPERTIES(o) selected\r\n;\n"})}),"\n",(0,s.jsx)(r.p,{children:'\u6211\u4EEC\u9700\u8981\u521B\u5EFA\u4E00\u4E2A\u64CD\u4F5C\uFF0C\u5220\u9664\u6807\u8BB0\u7684\u8BA2\u5355\u5E76\u7ACB\u5373\u5C06\u66F4\u6539\u4FDD\u5B58\u5230\u6570\u636E\u5E93\uFF08\u8FD9\u6837\u7528\u6237\u5C31\u4E0D\u9700\u8981\u70B9\u51FB"\u4FDD\u5B58"\uFF09\u3002'}),"\n",(0,s.jsx)(r.h3,{id:"\u89E3\u51B3\u65B9\u6848-2",children:"\u89E3\u51B3\u65B9\u6848"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-lsf",children:"deleteSelectedOrders 'Delete marked orders' ()  {\r\n    NEWSESSION NESTED(selected) {\r\n        DELETE Order o WHERE selected(o);\r\n        ASK 'You are about to delete ' + (GROUP SUM 1 IF DROPPED(o IS Order)) + ' orders. Continue?' DO {\r\n            APPLY;\r\n        }\r\n    }\r\n}\r\n\r\nEXTEND FORM orders\r\n    PROPERTIES() deleteSelectedOrders DRAW o TOOLBAR\r\n;\n"})}),"\n",(0,s.jsxs)(r.p,{children:['\u9ED8\u8BA4\u60C5\u51B5\u4E0B\uFF0C\u65B0\u4F1A\u8BDD\u5FFD\u7565\u5728"\u4E0A\u5C42"\u4F1A\u8BDD\u4E2D\u6240\u505A\u7684\u66F4\u6539\u3002\u8981\u5728\u65B0\u4F1A\u8BDD\u4E2D\u4F7F selected \u5C5E\u6027\u53EF\u7528\uFF0C\u8BF7\u4F7F\u7528 ',(0,s.jsx)(r.code,{children:"NESTED"})," \u64CD\u4F5C\u7B26\u5757\u3002\u5426\u5219\uFF0C",(0,s.jsx)(r.code,{children:"selected"})," \u5C5E\u6027\u5C06\u59CB\u7EC8\u4E3A ",(0,s.jsx)(r.code,{children:"NULL"}),"\u3002\u6216\u8005\uFF0C\u60A8\u53EF\u4EE5\u4F7F\u7528 ",(0,s.jsx)(r.code,{children:"NESTED LOCAL"})," \u5757\u4EE3\u66FF\u6307\u5B9A\u7279\u5B9A\u5C5E\u6027\u3002\u5728\u8FD9\u79CD\u60C5\u51B5\u4E0B\uFF0C\u5BF9\u4E0A\u5C42\u4F1A\u8BDD\u4E2D\u6240\u6709\u5C40\u90E8\u5C5E\u6027\u6240\u505A\u7684\u66F4\u6539\u5C06\u662F\u53EF\u89C1\u7684\u3002"]}),"\n",(0,s.jsx)(r.h2,{id:"\u793A\u4F8B-4",children:"\u793A\u4F8B 4"}),"\n",(0,s.jsx)(r.h3,{id:"\u4EFB\u52A1-3",children:"\u4EFB\u52A1"}),"\n",(0,s.jsxs)(r.p,{children:["\u7C7B\u4F3C\u4E8E ",(0,s.jsx)(r.a,{href:"#example-2",children:(0,s.jsx)(r.strong,{children:"\u793A\u4F8B 2"})}),"\uFF0C\u4F46\u6DFB\u52A0\u4E86\u8BA2\u5355\u7684\u652F\u4ED8\u903B\u8F91\u3002"]}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-lsf",children:"CLASS Payment 'Payment';\r\n\r\ndate 'Date' = DATA DATE (Payment);\r\nsum 'Amount' = DATA NUMERIC[14,2] (Payment);\r\n\r\norder 'Order' = DATA Order (Payment);\n"})}),"\n",(0,s.jsx)(r.p,{children:"\u6211\u4EEC\u9700\u8981\u5728\u8868\u5355\u4E0A\u521B\u5EFA\u4E00\u4E2A\u6309\u94AE\uFF0C\u7528\u4E8E\u4E3A\u6B64\u8BA2\u5355\u6253\u5F00\u5355\u72EC\u7684\u652F\u4ED8\u7F16\u8F91\u8868\u5355\u3002"}),"\n",(0,s.jsx)(r.h3,{id:"\u89E3\u51B3\u65B9\u6848-3",children:"\u89E3\u51B3\u65B9\u6848"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-lsf",children:"FORM orderPayments 'Order payments'\r\n    // \u4E0D\u6DFB\u52A0\u5C5E\u6027\uFF0C\u4F7F\u6B64\u5BF9\u8C61\u5728\u8868\u5355\u4E0A\u5B8C\u5168\u4E0D\u53EF\u89C1\r\n    OBJECTS o = Order PANEL \r\n\r\n    OBJECTS p = Payment\r\n    PROPERTIES(p) date, sum, NEW, DELETE\r\n    FILTERS order(p) == o\r\n;\r\n\r\neditPayments 'Edit payments' (Order o)  {\r\n    NESTEDSESSION {\r\n        SHOW orderPayments OBJECTS o = o;\r\n    }\r\n}\r\n\r\nEXTEND FORM order\r\n    PROPERTIES(o) editPayments\r\n;\n"})}),"\n",(0,s.jsxs)(r.p,{children:["\u5982\u679C\u60A8\u4F7F\u7528 ",(0,s.jsxs)(r.a,{href:"/NESTEDSESSION_operator",children:[(0,s.jsx)(r.code,{children:"NESTEDSESSION"})," \u64CD\u4F5C\u7B26"]}),'\uFF0C\u5219\u5728"\u4E0A\u5C42"\u66F4\u6539\u4F1A\u8BDD\u4E2D\u6240\u505A\u7684\u6240\u6709\u66F4\u6539\u5C06\u5728\u5D4C\u5957\u4F1A\u8BDD\u4E2D\u53EF\u7528\u3002\u5982\u679C\u7528\u6237\u672A\u70B9\u51FB\u786E\u5B9A\u5C31\u5173\u95ED\u8868\u5355\uFF0C\u5219\u76F4\u63A5\u5728\u8868\u5355\u4E2D\u6240\u505A\u7684\u6240\u6709\u66F4\u6539\u5C06\u4E22\u5931\u3002\u5982\u679C\u7528\u6237\u70B9\u51FB\u786E\u5B9A\uFF0C\u5219\u66F4\u6539\u5C06\u5199\u5165"\u4E0A\u5C42"\u66F4\u6539\u4F1A\u8BDD\uFF0C\u800C\u4E0D\u662F\u6570\u636E\u5E93\u3002\u5B83\u4EEC\u5C06\u4E0E\u5728\u4E3B ',(0,s.jsx)(r.code,{children:"orders"})," \u8868\u5355\u4E2D\u6240\u505A\u7684\u66F4\u6539\u4E00\u8D77\u5199\u5165\u6570\u636E\u5E93\u3002"]}),"\n",(0,s.jsxs)(r.p,{children:["\u8FD9\u91CC\u4E0D\u5141\u8BB8\u4F7F\u7528 ",(0,s.jsx)(r.code,{children:"NEWSESSION"}),"\uFF0C\u4EC5\u4EC5\u662F\u56E0\u4E3A ",(0,s.jsx)(r.code,{children:"orderPayments"}),' \u8868\u5355\u5C06\u65E0\u6CD5\u770B\u5230\u5C1A\u672A\u6DFB\u52A0\u5230\u6570\u636E\u5E93\u7684\u65B0\u521B\u5EFA\u7684\u8BA2\u5355\uFF08\u56E0\u4E3A\u5728"\u4E0A\u5C42"\u4F1A\u8BDD\u4E2D\u6240\u505A\u7684\u66F4\u6539\u5728\u5D4C\u5957\u4F1A\u8BDD\u4E2D\u4E0D\u53EF\u89C1\uFF09\uFF0C\u56E0\u6B64\u884C\u4E3A\u5C06\u4E0D\u53EF\u9884\u6D4B\u3002']}),"\n",(0,s.jsxs)(r.p,{children:["\u5982\u679C\u6211\u4EEC\u6839\u672C\u4E0D\u4F7F\u7528\u4EFB\u4F55\u4F1A\u8BDD\u7BA1\u7406\u64CD\u4F5C\u7B26\uFF0C\u90A3\u4E48\u5982\u679C\u7528\u6237\u5728 ",(0,s.jsx)(r.code,{children:"orderPayments"}),' \u8868\u5355\u4E2D\u8FDB\u884C\u4EFB\u4F55\u66F4\u6539\u5E76\u70B9\u51FB\u5173\u95ED\u6309\u94AE\uFF0C\u8FD9\u4E9B\u66F4\u6539\u4ECD\u5C06\u88AB"\u4FDD\u5B58"\uFF0C\u5C3D\u7BA1\u7528\u6237\u53EF\u80FD\u4E0D\u4F1A\u671F\u671B\u8FD9\u6837\u3002']})]})}function E(e={}){let{wrapper:r}={...(0,l.R)(),...e.components};return r?(0,s.jsx)(r,{...e,children:(0,s.jsx)(a,{...e})}):a(e)}},28453:function(e,r,n){n.d(r,{R:()=>o,x:()=>c});var d=n(96540);let s={},l=d.createContext(s);function o(e){let r=d.useContext(l);return d.useMemo(function(){return"function"==typeof e?e(r):{...r,...e}},[r,e])}function c(e){let r;return r=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:o(e.components),d.createElement(l.Provider,{value:r},e.children)}}}]);