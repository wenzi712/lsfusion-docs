"use strict";(self.webpackChunkls_fusion_docs=self.webpackChunkls_fusion_docs||[]).push([["9558"],{91807:function(e,r,n){n.r(r),n.d(r,{metadata:()=>s,default:()=>p,frontMatter:()=>a,contentTitle:()=>l,toc:()=>o,assets:()=>c});var s=JSON.parse('{"id":"AGGR_operator","title":"AGGR \u64CD\u4F5C\u7B26","description":"AGGR\u64CD\u4F5C\u7B26\u521B\u5EFA\u4E00\u4E2A\u805A\u5408\u3002","source":"@site/i18n/zh-CN/docusaurus-plugin-content-docs/current/AGGR_operator.md","sourceDirName":".","slug":"/AGGR_operator","permalink":"/AGGR_operator","draft":false,"unlisted":false,"editUrl":"https://github.com/lsfusion/platform/edit/master/docs/zh-CN/AGGR_operator.md","tags":[],"version":"current","lastUpdatedAt":null,"frontMatter":{"title":"AGGR \u64CD\u4F5C\u7B26"},"sidebar":"learn","previous":{"title":"ACTIVE TAB \u64CD\u4F5C\u7B26","permalink":"/ACTIVE_TAB_operator"},"next":{"title":"CASE\u64CD\u4F5C\u7B26","permalink":"/CASE_operator"}}'),t=n(74848),i=n(28453);let a={title:"AGGR \u64CD\u4F5C\u7B26"},l,c={},o=[{value:"\u8BED\u6CD5",id:"\u8BED\u6CD5",level:3},{value:"\u63CF\u8FF0",id:"\u63CF\u8FF0",level:3},{value:"\u53C2\u6570",id:"\u53C2\u6570",level:3},{value:"\u793A\u4F8B",id:"\u793A\u4F8B",level:3}];function d(e){let r={a:"a",admonition:"admonition",code:"code",h3:"h3",li:"li",p:"p",pre:"pre",ul:"ul",...(0,i.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(r.p,{children:[(0,t.jsx)(r.code,{children:"AGGR"}),"\u64CD\u4F5C\u7B26\u521B\u5EFA\u4E00\u4E2A",(0,t.jsx)(r.a,{href:"/Aggregations",children:"\u805A\u5408"}),"\u3002"]}),"\n",(0,t.jsx)(r.h3,{id:"\u8BED\u6CD5",children:"\u8BED\u6CD5"}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{children:"AGGR aggrClass WHERE aggrExpr\n"})}),"\n",(0,t.jsx)(r.h3,{id:"\u63CF\u8FF0",children:"\u63CF\u8FF0"}),"\n",(0,t.jsxs)(r.p,{children:["\u9664\u4E86\u4F5C\u4E3A\u6B64\u64CD\u4F5C\u7B26\u7ED3\u679C\u5E76\u5305\u542B\u805A\u5408\u5BF9\u8C61\u503C\u7684\u5C5E\u6027\u5916\uFF0C",(0,t.jsx)(r.code,{children:"AGGR"}),"\u64CD\u4F5C\u7B26\u8FD8\u4E3A\u6BCF\u4E2A\u53C2\u6570\u521B\u5EFA\u4E00\u4E2A\u5E26\u6709\u4E00\u4E2A\u53C2\u6570\u7684\u6570\u636E\u5C5E\u6027\uFF0C\u5176",(0,t.jsx)(r.a,{href:"/User_classes",children:"\u7C7B"}),"\u7B49\u4E8E\u805A\u5408\u5BF9\u8C61\u7684\u7C7B\u3002\u8BE5\u5C5E\u6027\u7684\u503C\u7C7B\u548C\u540D\u79F0\u7B49\u4E8E\u4E3A\u5176\u521B\u5EFA\u6B64\u5C5E\u6027\u7684\u53C2\u6570\u7684\u7C7B\u548C\u540D\u79F0\u3002\u56E0\u6B64\uFF0C\u5728\u521B\u5EFA\u805A\u5408\u5BF9\u8C61\u65F6\uFF0C\u4E3A\u5176\u521B\u5EFA\u805A\u5408\u5BF9\u8C61\u7684\u53C2\u6570\u7684\u503C\u4F1A\u81EA\u52A8\u5199\u5165\u6B64\u5C5E\u6027\u3002"]}),"\n",(0,t.jsxs)(r.admonition,{type:"info",children:[(0,t.jsx)(r.p,{children:"\u521B\u5EFA\u805A\u5408\u5728\u8BB8\u591A\u65B9\u9762\u7C7B\u4F3C\u4E8E\u4EE5\u4E0B\u8BED\u53E5\uFF082\u4E2A\u53C2\u6570\u7684\u793A\u4F8B\uFF09\uFF1A"}),(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-lsf",children:"prm1 = DATA class1 (aggrClass);\r\nprm2 = DATA class2 (aggrClass);\r\nresult = GROUP AGGR aggrClass aggrObject BY prm1(aggrObject), prm2(aggrObject);\r\n\r\n// if aggrExpr becomes non-null, create an object of class aggrClass (equivalent to whereExpr => result (prm1, prm2) RESOLVE LEFT)\r\nWHEN SET(aggrExpr) AND NOT result(prm1, prm2)\r\n    NEW aggrObject = aggrClass {\r\n        prm1(aggrObject) <- prm1;\r\n        prm2(aggrObject) <- prm2;\r\n    }\r\n\r\n// if aggrExpr becomes null, remove an object (equivalent to aggrClass aggrObject IS aggrClass => result(prm1(aggrObject),prm2(aggrObject)) RESOLVE RIGHT)\r\nWHEN aggrClass aggrObject IS aggrClass AND DROPPED(result(prm1(aggrObject),prm2(aggrObject))) DO\r\n    DELETE aggrObject;\n"})}),(0,t.jsx)(r.p,{children:"\u4F46\u5B83\u662F\u4E00\u4E2A\u66F4\u5177\u58F0\u660E\u6027\u548C\u53EF\u8BFB\u6027\u7684\u8BED\u53E5\uFF0C\u56E0\u6B64\u5EFA\u8BAE\u4F7F\u7528\u5B83"})]}),"\n",(0,t.jsxs)(r.p,{children:["\u4E0E\u5176\u4ED6\u4E0A\u4E0B\u6587\u76F8\u5173\u64CD\u4F5C\u7B26\u4E0D\u540C\uFF0C",(0,t.jsx)(r.code,{children:"AGGR"}),"\u64CD\u4F5C\u7B26\u4E0D\u80FD\u5728\u5176\u4ED6\u64CD\u4F5C\u7B26\u5185\u90E8\u7684",(0,t.jsx)(r.a,{href:"/Expression",children:"\u8868\u8FBE\u5F0F"}),"\u4E2D\u4F7F\u7528\uFF08\u4ECE\u8FD9\u4E2A\u610F\u4E49\u4E0A\u8BB2\uFF0C\u5B83\u66F4\u50CF\u662F\u4E0A\u4E0B\u6587\u65E0\u5173\u64CD\u4F5C\u7B26\uFF09\uFF0C\u4E5F\u4E0D\u80FD\u5728",(0,t.jsxs)(r.a,{href:"/JOIN_operator",children:[(0,t.jsx)(r.code,{children:"JOIN"}),"\u64CD\u4F5C\u7B26"]}),"\u4E2D\u4F7F\u7528\uFF08\u5728",(0,t.jsx)(r.code,{children:"[= ]"}),"\u5185\u90E8\uFF09"]}),"\n",(0,t.jsx)(r.h3,{id:"\u53C2\u6570",children:"\u53C2\u6570"}),"\n",(0,t.jsxs)(r.ul,{children:["\n",(0,t.jsxs)(r.li,{children:["\n",(0,t.jsx)(r.p,{children:(0,t.jsx)(r.code,{children:"aggrClass"})}),"\n",(0,t.jsx)(r.p,{children:"\u805A\u5408\u5BF9\u8C61\u7684\u503C\u7C7B\u3002"}),"\n"]}),"\n",(0,t.jsxs)(r.li,{children:["\n",(0,t.jsx)(r.p,{children:(0,t.jsx)(r.code,{children:"aggrExpr"})}),"\n",(0,t.jsxs)(r.p,{children:["\u5176\u503C\u5B9A\u4E49\u805A\u5408\u5C5E\u6027\u7684",(0,t.jsx)(r.a,{href:"/Expression",children:"\u8868\u8FBE\u5F0F"}),"\u3002"]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(r.h3,{id:"\u793A\u4F8B",children:"\u793A\u4F8B"}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-lsf",children:"CLASS A; CLASS B; CLASS C;\r\nf = DATA INTEGER (A, B);\r\nc = AGGR C WHERE f(A a, B b) MATERIALIZED INDEXED;\r\n\r\nCLASS AB;\r\nab = AGGR AB WHERE A a IS A AND B b IS B; // for each A B pair creates an object AB\r\n\r\nCLASS Shipment 'Delivery';\r\ndate = ABSTRACT DATE (Shipment);\r\nCLASS Invoice 'Invoice';\r\ncreateShipment 'Create delivery' = DATA BOOLEAN (Invoice);\r\ndate 'Shipment date' = DATA DATE (Invoice);\r\nCLASS ShipmentInvoice 'Delivery by invoice' : Shipment;\r\n// \u5982\u679C\u4E3A\u53D1\u7968\u5B9A\u4E49\u4E86\u521B\u5EFA\u4EA4\u8D27\u7684\u9009\u9879\uFF0C\u5219\u901A\u8FC7\u53D1\u7968\u521B\u5EFA\u4EA4\u8D27\r\nshipment(Invoice invoice) = AGGR ShipmentInvoice WHERE createShipment(invoice); \r\ndate(ShipmentInvoice si) += sum(date(invoice(si)),1); // delivery date = invoice date + 1\n"})})]})}function p(e={}){let{wrapper:r}={...(0,i.R)(),...e.components};return r?(0,t.jsx)(r,{...e,children:(0,t.jsx)(d,{...e})}):d(e)}},28453:function(e,r,n){n.d(r,{R:()=>a,x:()=>l});var s=n(96540);let t={},i=s.createContext(t);function a(e){let r=s.useContext(i);return s.useMemo(function(){return"function"==typeof e?e(r):{...r,...e}},[r,e])}function l(e){let r;return r=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:a(e.components),s.createElement(i.Provider,{value:r},e.children)}}}]);