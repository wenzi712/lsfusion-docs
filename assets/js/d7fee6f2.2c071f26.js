"use strict";(self.webpackChunkls_fusion_docs=self.webpackChunkls_fusion_docs||[]).push([["72375"],{18805:function(e,n,l){l.r(n),l.d(n,{metadata:()=>r,default:()=>h,frontMatter:()=>c,contentTitle:()=>s,toc:()=>i,assets:()=>t});var r=JSON.parse('{"id":"How-to_GROUP_LAST","title":"GROUP LAST","description":"\u793A\u4F8B 1","source":"@site/i18n/zh-CN/docusaurus-plugin-content-docs/current/How-to_GROUP_LAST.md","sourceDirName":".","slug":"/How-to_GROUP_LAST","permalink":"/How-to_GROUP_LAST","draft":false,"unlisted":false,"editUrl":"https://github.com/lsfusion/platform/edit/master/docs/zh-CN/How-to_GROUP_LAST.md","tags":[],"version":"current","lastUpdatedAt":null,"frontMatter":{"title":"GROUP LAST"},"sidebar":"learn","previous":{"title":"CASE/IF/OVERRIDE","permalink":"/How-to_CASE_IF_OVERRIDE"},"next":{"title":"GROUP CONCAT","permalink":"/How-to_GROUP_CONCAT"}}'),d=l(74848),o=l(28453);let c={title:"GROUP LAST"},s,t={},i=[{value:"\u793A\u4F8B 1",id:"\u793A\u4F8B-1",level:2},{value:"\u4EFB\u52A1",id:"\u4EFB\u52A1",level:3},{value:"\u89E3\u51B3\u65B9\u6848",id:"\u89E3\u51B3\u65B9\u6848",level:3},{value:"\u793A\u4F8B 2",id:"\u793A\u4F8B-2",level:2},{value:"\u4EFB\u52A1",id:"\u4EFB\u52A1-1",level:3},{value:"\u89E3\u51B3\u65B9\u6848",id:"\u89E3\u51B3\u65B9\u6848-1",level:3},{value:"\u793A\u4F8B 3",id:"\u793A\u4F8B-3",level:2},{value:"\u4EFB\u52A1",id:"\u4EFB\u52A1-2",level:3},{value:"\u89E3\u51B3\u65B9\u6848",id:"\u89E3\u51B3\u65B9\u6848-2",level:3},{value:"\u793A\u4F8B 4",id:"\u793A\u4F8B-4",level:2},{value:"\u4EFB\u52A1",id:"\u4EFB\u52A1-3",level:3},{value:"\u89E3\u51B3\u65B9\u6848",id:"\u89E3\u51B3\u65B9\u6848-3",level:3},{value:"\u793A\u4F8B 5",id:"\u793A\u4F8B-5",level:2},{value:"\u4EFB\u52A1",id:"\u4EFB\u52A1-4",level:3},{value:"\u89E3\u51B3\u65B9\u6848",id:"\u89E3\u51B3\u65B9\u6848-4",level:3}];function a(e){let n={a:"a",code:"code",h2:"h2",h3:"h3",p:"p",pre:"pre",strong:"strong",...(0,o.R)(),...e.components};return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(n.h2,{id:"\u793A\u4F8B-1",children:"\u793A\u4F8B 1"}),"\n",(0,d.jsx)(n.h3,{id:"\u4EFB\u52A1",children:"\u4EFB\u52A1"}),"\n",(0,d.jsx)(n.p,{children:"\u6211\u4EEC\u6709\u4E00\u7EC4\u4E0E\u7279\u5B9A\u7C7B\u522B\u5173\u8054\u7684\u4E66\u7C4D\uFF0C\u4EE5\u53CA\u5B83\u4EEC\u7684\u6536\u8D27\u65E5\u671F\u3002"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-lsf",children:"CLASS Book '\u4E66\u7C4D';\r\nCLASS Category '\u7C7B\u522B';\r\n\r\ncategory '\u7C7B\u522B' = DATA Category (Book);\r\ndate '\u5230\u8D27\u65E5\u671F' = DATA DATE (Book);\n"})}),"\n",(0,d.jsx)(n.p,{children:"\u6211\u4EEC\u9700\u8981\u627E\u51FA\u6240\u9009\u7C7B\u522B\u4E2D\u6700\u65B0\u6536\u5230\u7684\u4E66\u7C4D\u3002"}),"\n",(0,d.jsx)(n.h3,{id:"\u89E3\u51B3\u65B9\u6848",children:"\u89E3\u51B3\u65B9\u6848"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-lsf",children:"book '\u6700\u540E\u4E00\u672C\u4E66' (Category c) = GROUP LAST Book b ORDER date(b), b BY category(b);\n"})}),"\n",(0,d.jsxs)(n.p,{children:["\u91CD\u8981\u7684\u662F\u8981\u8BB0\u4F4F\uFF0C",(0,d.jsx)(n.code,{children:"ORDER"})," \u5B50\u53E5\u4E2D\u7684\u987A\u5E8F\u5E94\u8BE5\u662F\u552F\u4E00\u786E\u5B9A\u7684\u3002\u4E3A\u6B64\uFF0C\u4E66\u7C4D\uFF08\u7279\u522B\u662F\u5176\u5185\u90E8ID\uFF09\u5E94\u8BE5\u7528\u4F5C\u7B2C\u4E8C\u4E2A\u53C2\u6570\uFF0C\u56E0\u4E3A\u591A\u672C\u4E66\u53EF\u80FD\u6709\u76F8\u540C\u7684\u6536\u8D27\u65E5\u671F\u3002"]}),"\n",(0,d.jsx)(n.h2,{id:"\u793A\u4F8B-2",children:"\u793A\u4F8B 2"}),"\n",(0,d.jsx)(n.h3,{id:"\u4EFB\u52A1-1",children:"\u4EFB\u52A1"}),"\n",(0,d.jsxs)(n.p,{children:["\u4E0E",(0,d.jsx)(n.a,{href:"#example-1",children:(0,d.jsx)(n.strong,{children:"\u793A\u4F8B 1"})}),"\u7C7B\u4F3C\uFF0C\u4F46\u4E3A\u6BCF\u672C\u4E66\u6307\u5B9A\u4E86\u4F5C\u8005\u548C\u7C7B\u578B\u5217\u8868\u3002"]}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-lsf",children:"CLASS Author '\u4F5C\u8005';\r\nCLASS Genre '\u7C7B\u578B';\r\n\r\nauthor '\u4F5C\u8005' = DATA Author (Book);\r\ngenre '\u7C7B\u578B' = DATA Genre (Book);\r\nin '\u4F4D\u4E8E' = DATA BOOLEAN (Book, Genre);\n"})}),"\n",(0,d.jsx)(n.p,{children:"\u6211\u4EEC\u9700\u8981\u6309\u4F5C\u8005\u548C\u7C7B\u578B\u627E\u51FA\u6700\u53D7\u6B22\u8FCE\u7684\u7C7B\u522B\u3002"}),"\n",(0,d.jsx)(n.h3,{id:"\u89E3\u51B3\u65B9\u6848-1",children:"\u89E3\u51B3\u65B9\u6848"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-lsf",children:"countBooks '\u4E66\u7C4D\u6570\u91CF' (Category c, Author a, Genre g) = GROUP SUM 1 IF in(Book b, g) BY category(b), author(b);\r\n\r\ncategory (Author a, Genre g) = GROUP LAST Category c ORDER countBooks(c, a, g), c WHERE countBooks(c, a, g);\n"})}),"\n",(0,d.jsx)(n.h2,{id:"\u793A\u4F8B-3",children:"\u793A\u4F8B 3"}),"\n",(0,d.jsx)(n.h3,{id:"\u4EFB\u52A1-2",children:"\u4EFB\u52A1"}),"\n",(0,d.jsxs)(n.p,{children:["\u6211\u4EEC\u6709\u4E00\u7EC4\u7279\u5B9A\u7684\u4E66\u7C4D\u4EE5\u53CA\u6BCF\u672C\u4E66\u548C\u4ED3\u5E93\u7684\u4EF7\u683C\u53D8\u66F4\u4FE1\u606F\u3002",(0,d.jsx)(n.code,{children:"Ledger"})," \u7C7B\u7684\u6BCF\u4E2A\u5BF9\u8C61\u53CD\u6620\u4E86\u81EA\u7279\u5B9A\u65E5\u671F\u4EE5\u6765\u7684\u5355\u6B21\u4EF7\u683C\u53D8\u66F4\u3002"]}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-lsf",children:"CLASS Stock '\u4ED3\u5E93';\r\n\r\nCLASS Ledger '\u4EF7\u683C\u53D8\u66F4';\r\ndate = DATA DATE (Ledger);\r\nstock = DATA Stock (Ledger);\r\nbook = DATA Book (Ledger);\r\n\r\nprice = DATA NUMERIC[10,2] (Ledger);\n"})}),"\n",(0,d.jsx)(n.p,{children:"\u6211\u4EEC\u9700\u8981\u786E\u5B9A\u7ED9\u5B9A\u4E66\u7C4D\u5728\u4ED3\u5E93\u4E2D\u7684\u5F53\u524D\u4EF7\u683C\u3002"}),"\n",(0,d.jsx)(n.h3,{id:"\u89E3\u51B3\u65B9\u6848-2",children:"\u89E3\u51B3\u65B9\u6848"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-lsf",children:"currentPrice (Book b, Stock s) = GROUP LAST price(Ledger l) ORDER date(l), l BY book(l), stock(l);//#solution3\n"})}),"\n",(0,d.jsx)(n.h2,{id:"\u793A\u4F8B-4",children:"\u793A\u4F8B 4"}),"\n",(0,d.jsx)(n.h3,{id:"\u4EFB\u52A1-3",children:"\u4EFB\u52A1"}),"\n",(0,d.jsxs)(n.p,{children:["\u4E0E",(0,d.jsx)(n.a,{href:"#example-3",children:(0,d.jsx)(n.strong,{children:"\u793A\u4F8B 3"})}),"\u7C7B\u4F3C\u3002"]}),"\n",(0,d.jsx)(n.p,{children:"\u6211\u4EEC\u9700\u8981\u627E\u5230\u5728\u7279\u5B9A\u65E5\u671F\u5BF9\u4ED3\u5E93\u4E2D\u7684\u4E66\u7C4D\u6709\u6548\u7684\u4EF7\u683C\u3002"}),"\n",(0,d.jsx)(n.h3,{id:"\u89E3\u51B3\u65B9\u6848-3",children:"\u89E3\u51B3\u65B9\u6848"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-lsf",children:"price (Book b, Stock s, DATE d) = GROUP LAST price(Ledger l) ORDER date(l), l WHERE date(l) <= d BY book(l), stock(l);\n"})}),"\n",(0,d.jsx)(n.h2,{id:"\u793A\u4F8B-5",children:"\u793A\u4F8B 5"}),"\n",(0,d.jsx)(n.h3,{id:"\u4EFB\u52A1-4",children:"\u4EFB\u52A1"}),"\n",(0,d.jsxs)(n.p,{children:["\u4E0E",(0,d.jsx)(n.a,{href:"#example-4",children:(0,d.jsx)(n.strong,{children:"\u793A\u4F8B 4"})}),"\u7C7B\u4F3C\uFF0C\u4F46\u4EF7\u683C\u53D8\u66F4\u6709\u4E00\u4E2A\u5230\u671F\u65E5\u671F\u3002\u5982\u679C\u672A\u6307\u5B9A\u6B64\u65E5\u671F\uFF0C\u5219\u4EF7\u683C\u5728\u65F6\u95F4\u4E0A\u4E0D\u53D7\u9650\u5236\u3002"]}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-lsf",children:"dateTo '\u6709\u6548\u671F\u81F3\uFF08\u542B\uFF09' = DATA DATE (Ledger);\n"})}),"\n",(0,d.jsx)(n.h3,{id:"\u89E3\u51B3\u65B9\u6848-4",children:"\u89E3\u51B3\u65B9\u6848"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-lsf",children:"currentPriceDate (Book b, Stock s) = GROUP LAST price(Ledger l) ORDER date(l), l WHERE NOT dateTo(l) < currentDate() BY book(l), stock(l);\r\npriceDate(Book b, Stock s, DATE d) = GROUP LAST price(Ledger l) ORDER date(l), l WHERE date(l) <= d AND NOT dateTo(l) < d BY book(l), stock(l);\n"})}),"\n",(0,d.jsxs)(n.p,{children:["\u8BF7\u6CE8\u610F\uFF0C\u8868\u8FBE\u5F0F ",(0,d.jsx)(n.code,{children:"NOT dateTo(l) < date"})," \u5E76\u4E0D\u603B\u662F\u4E0E ",(0,d.jsx)(n.code,{children:"dateTo(l) >= date"})," \u76F8\u540C\u3002\u533A\u522B\u53D1\u751F\u5728 ",(0,d.jsx)(n.code,{children:"dateTo(l)"})," \u503C\u7B49\u4E8E ",(0,d.jsx)(n.code,{children:"NULL"})," \u65F6\u3002\u5728\u7B2C\u4E00\u79CD\u60C5\u51B5\u4E0B\uFF0C",(0,d.jsx)(n.code,{children:"dateTo(l) < date"})," \u7B49\u4E8E ",(0,d.jsx)(n.code,{children:"NULL"}),"\uFF08\u5373 false\uFF09\uFF0C\u800C ",(0,d.jsx)(n.code,{children:"NOT NULL"})," \u7B49\u4E8E ",(0,d.jsx)(n.code,{children:"TRUE"}),"\u3002\u5728\u7B2C\u4E8C\u79CD\u60C5\u51B5\u4E0B\uFF0C\u8BE5\u8868\u8FBE\u5F0F\u663E\u7136\u7B49\u4E8E ",(0,d.jsx)(n.code,{children:"NULL"}),"\uFF08\u5373 false\uFF09\u3002"]})]})}function h(e={}){let{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,d.jsx)(n,{...e,children:(0,d.jsx)(a,{...e})}):a(e)}},28453:function(e,n,l){l.d(n,{R:()=>c,x:()=>s});var r=l(96540);let d={},o=r.createContext(d);function c(e){let n=r.useContext(o);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function s(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(d):e.components||d:c(e.components),r.createElement(o.Provider,{value:n},e.children)}}}]);