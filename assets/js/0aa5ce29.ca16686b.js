"use strict";(self.webpackChunkls_fusion_docs=self.webpackChunkls_fusion_docs||[]).push([["51572"],{12746:function(e,n,c){c.r(n),c.d(n,{metadata:()=>i,default:()=>x,frontMatter:()=>s,contentTitle:()=>d,toc:()=>o,assets:()=>t});var i=JSON.parse('{"id":"Event_block","title":"\u4E8B\u4EF6\u5757","description":"FORM\u8BED\u53E5\u7684\u4E8B\u4EF6\u5757 - \u4E00\u7EC4\u63A7\u5236\u4EA4\u4E92\u5F0F\u8868\u5355\u89C6\u56FE\u4E2D\u4E8B\u4EF6\u7684\u7ED3\u6784\u3002","source":"@site/i18n/zh-CN/docusaurus-plugin-content-docs/current/Event_block.md","sourceDirName":".","slug":"/Event_block","permalink":"/Event_block","draft":false,"unlisted":false,"editUrl":"https://github.com/lsfusion/platform/edit/master/docs/zh-CN/Event_block.md","tags":[],"version":"current","lastUpdatedAt":null,"frontMatter":{"title":"\u4E8B\u4EF6\u5757"},"sidebar":"learn","previous":{"title":"\u7B5B\u9009\u5668\u548C\u6392\u5E8F\u5757","permalink":"/Filters_and_sortings_block"},"next":{"title":"\u6570\u636E\u900F\u89C6\u8868\u8BBE\u7F6E\u5757","permalink":"/Pivot_block"}}'),r=c(74848),l=c(28453);let s={title:"\u4E8B\u4EF6\u5757"},d,t={},o=[{value:"\u8BED\u6CD5",id:"\u8BED\u6CD5",level:3},{value:"\u8BF4\u660E",id:"\u8BF4\u660E",level:3},{value:"\u53C2\u6570",id:"\u53C2\u6570",level:3},{value:"\u793A\u4F8B",id:"\u793A\u4F8B",level:3}];function h(e){let n={a:"a",code:"code",h3:"h3",li:"li",p:"p",pre:"pre",ul:"ul",...(0,l.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(n.p,{children:[(0,r.jsxs)(n.a,{href:"/FORM_statement",children:[(0,r.jsx)(n.code,{children:"FORM"}),"\u8BED\u53E5"]}),"\u7684\u4E8B\u4EF6\u5757 - \u4E00\u7EC4\u63A7\u5236\u4EA4\u4E92\u5F0F\u8868\u5355\u89C6\u56FE\u4E2D",(0,r.jsx)(n.a,{href:"/Form_events",children:"\u4E8B\u4EF6"}),"\u7684\u7ED3\u6784\u3002"]}),"\n",(0,r.jsx)(n.h3,{id:"\u8BED\u6CD5",children:"\u8BED\u6CD5"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"EVENTS formEventDecl1, ..., formEventDeclN\n"})}),"\n",(0,r.jsxs)(n.p,{children:["\u5176\u4E2D\u6BCF\u4E2A",(0,r.jsx)(n.code,{children:"formEventDecli"}),"\u5177\u6709\u4EE5\u4E0B\u8BED\u6CD5\uFF1A"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"ON eventType eventActionId(param1, ..., paramK) | { eventActionOperator }\n"})}),"\n",(0,r.jsx)(n.h3,{id:"\u8BF4\u660E",children:"\u8BF4\u660E"}),"\n",(0,r.jsxs)(n.p,{children:["\u4E8B\u4EF6\u5757\u5141\u8BB8\u5B9A\u4E49",(0,r.jsx)(n.a,{href:"/Form_events",children:"\u8868\u5355\u4E8B\u4EF6"}),"\u7684\u5904\u7406\u7A0B\u5E8F\uFF0C\u8FD9\u4E9B\u4E8B\u4EF6\u662F\u7531\u4E8E\u67D0\u4E9B\u7528\u6237\u64CD\u4F5C\u800C\u53D1\u751F\u7684\u3002\u6BCF\u4E2A\u5757\u53EF\u4EE5\u6709\u4EFB\u610F\u6570\u91CF\u7684\u4EE5\u9017\u53F7\u5206\u9694\u7684\u4E8B\u4EF6\u5904\u7406\u7A0B\u5E8F\u3002\u5982\u679C\u4E3A\u4E00\u4E2A\u4E8B\u4EF6\u5B9A\u4E49\u4E86\u591A\u4E2A\u5904\u7406\u7A0B\u5E8F\uFF0C\u5219\u4FDD\u8BC1\u5B83\u4EEC\u6309\u7167\u5B9A\u4E49\u7684\u987A\u5E8F\u6267\u884C\u3002"]}),"\n",(0,r.jsx)(n.h3,{id:"\u53C2\u6570",children:"\u53C2\u6570"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.code,{children:"eventType"})}),"\n",(0,r.jsx)(n.p,{children:"\u8868\u5355\u4E8B\u4EF6\u7C7B\u578B\u3002\u5B83\u4F7F\u7528\u4EE5\u4E0B\u5173\u952E\u5B57\u4E4B\u4E00\u6307\u5B9A\uFF1A"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"INIT"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"OK"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"OK BEFORE"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"OK AFTER"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"APPLY"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"APPLY BEFORE"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"APPLY AFTER"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"CANCEL"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"CLOSE"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"DROP"})}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"CHANGE objName"})," \u2013 \u6307\u5B9A\u5F53\u5BF9\u8C61",(0,r.jsx)(n.code,{children:"objName"}),"\u66F4\u6539\u65F6\u6267\u884C\u64CD\u4F5C\u3002"]}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"QUERYOK"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"QUERYCANCEL"})}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"EXPAND componentSelector"})," - \u6307\u5B9A\u5728\u5C55\u5F00",(0,r.jsx)(n.code,{children:"componentSelector"}),"\u5BB9\u5668\u540E\u6267\u884C\u64CD\u4F5C\u3002"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"COLLAPSE componentSelector"})," - \u6307\u5B9A\u5728\u6298\u53E0",(0,r.jsx)(n.code,{children:"componentSelector"}),"\u5BB9\u5668\u540E\u6267\u884C\u64CD\u4F5C\u3002"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"TAB componentSelector"})," - \u6307\u5B9A\u5728",(0,r.jsx)(n.code,{children:"componentSelector"}),"\u9009\u9879\u5361\u53D8\u4E3A\u6D3B\u52A8\u72B6\u6001\u540E\u6267\u884C\u64CD\u4F5C\u3002"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"SCHEDULE PERIOD intPeriod [FIXED]"})," - \u521B\u5EFA\u4E00\u4E2A\u8C03\u5EA6\u7A0B\u5E8F\uFF0C\u6BCF\u9694",(0,r.jsx)(n.code,{children:"intPeriod"}),"\u79D2\u6267\u884C\u4E00\u6B21\u64CD\u4F5C\u3002",(0,r.jsx)(n.code,{children:"FIXED"}),"\u8868\u793A\u4E0B\u4E00\u4E2A\u64CD\u4F5C\u7684\u65F6\u95F4\u6BB5\u4ECE\u5F53\u524D\u64CD\u4F5C\u5F00\u59CB\u8BA1\u7B97\u3002\u9ED8\u8BA4\u60C5\u51B5\u4E0B\uFF0C\u65F6\u95F4\u6BB5\u4ECE\u5F53\u524D\u64CD\u4F5C\u7ED3\u675F\u8BA1\u7B97\u3002"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.code,{children:"eventActionId"})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.a,{href:"/IDs#propertyid",children:"\u64CD\u4F5CID"}),"\uFF0C\u5C06\u4F5C\u4E3A\u4E8B\u4EF6\u5904\u7406\u7A0B\u5E8F\u3002"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.code,{children:"param1, ..., paramK"})}),"\n",(0,r.jsxs)(n.p,{children:["\u64CD\u4F5C\u53C2\u6570\u5217\u8868\u3002\u6BCF\u4E2A\u53C2\u6570\u4F7F\u7528\u8868\u5355\u4E0A\u7684\u5BF9\u8C61\u540D\u79F0\u6307\u5B9A\u3002\u5BF9\u8C61\u540D\u79F0\u53C8\u4F7F\u7528",(0,r.jsx)(n.a,{href:"/IDs#id",children:"\u7B80\u5355ID"}),"\u6307\u5B9A\u3002"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.code,{children:"actionOperator"})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.a,{href:"/Action_operators#contextdependent",children:"\u4E0A\u4E0B\u6587\u76F8\u5173\u64CD\u4F5C\u64CD\u4F5C\u7B26"}),"\u3002\u60A8\u53EF\u4EE5\u4F7F\u7528\u8868\u5355\u4E0A\u5DF2\u58F0\u660E\u5BF9\u8C61\u7684\u540D\u79F0\u4F5C\u4E3A\u53C2\u6570\u3002"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"\u793A\u4F8B",children:"\u793A\u4F8B"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-lsf",children:"showImpossibleMessage()  { MESSAGE '\u8FD9\u4E0D\u53EF\u80FD'; };\n\nposted = DATA BOOLEAN (Invoice);\n\nFORM invoice '\u53D1\u7968' // \u521B\u5EFA\u4E00\u4E2A\u7F16\u8F91\u53D1\u7968\u7684\u8868\u5355\n    OBJECTS i = Invoice PANEL // \u521B\u5EFA\u4E00\u4E2A\u53D1\u7968\u7C7B\u7684\u5BF9\u8C61\n\n//    ... \u8BBE\u7F6E\u8868\u5355\u7684\u5176\u4F59\u884C\u4E3A\n\n    EVENTS\n        // \u6307\u5B9A\u5F53\u7528\u6237\u70B9\u51FBOK\u65F6\uFF0C\u5E94\u6267\u884C\u4E00\u4E2A\u64CD\u4F5C\n        // \u8BE5\u64CD\u4F5C\u5C06\u6267\u884C\"\u63D0\u4EA4\"\u6B64\u53D1\u7968\u7684\u64CD\u4F5C\n        ON OK { posted(i) <- TRUE; },\n \n        // \u70B9\u51FBformDrop\u6309\u94AE\u65F6\uFF0C\u663E\u793A\u6D88\u606F\u8868\u660E\u8FD9\u4E0D\u53EF\u80FD\uFF0C\n        // \u56E0\u4E3A\u9ED8\u8BA4\u60C5\u51B5\u4E0B\u8BE5\u6309\u94AE\u53EA\u4F1A\u5728\u9009\u62E9\u53D1\u7968\u7684\u8868\u5355\u4E2D\u663E\u793A\uFF0C\n        // \u800C\u6B64\u8868\u5355\u57FA\u672C\u4E0A\u662F\u53D1\u7968\u7F16\u8F91\u8868\u5355\n        ON DROP showImpossibleMessage() \n;\n\nCLASS Shift;\ncurrentShift = DATA Shift();\n\nCLASS Cashier;\ncurrentCashier = DATA Cashier();\n\nCLASS Receipt;\nshift = DATA Shift (Receipt);\ncashier = DATA Cashier (Receipt);\n\nFORM POS '\u9500\u552E\u70B9' // \u58F0\u660E\u9500\u552E\u5BA4\u4E2D\u5411\u5BA2\u6237\u9500\u552E\u4EA7\u54C1\u7684\u8868\u5355\n\n    OBJECTS r = Receipt PANEL // \u6DFB\u52A0\u4E00\u4E2A\u5BF9\u8C61\uFF0C\u7528\u4E8E\u5B58\u50A8\u5F53\u524D\u6536\u636E\n\n    //  ... \u58F0\u660E\u8868\u5355\u884C\u4E3A\n;\n\ncreateReceipt ()  {\n    NEW r = Receipt {\n        shift(r) <- currentShift();\n        cashier(r) <- currentCashier();\n\n        SEEK POS.r = r;\n    }\n}\n\n// \u901A\u8FC7\u8868\u5355\u6269\u5C55\u6DFB\u52A0\u5C5E\u6027\uFF0C\u4EE5\u4FBF\u53EF\u4EE5\u5C06SEEK\u5E94\u7528\u4E8E\u5DF2\u521B\u5EFA\u7684\n// \u8868\u5355\u4E0A\u7684\u5BF9\u8C61\nEXTEND FORM POS \n    EVENTS\n        // \u6253\u5F00\u8868\u5355\u65F6\uFF0C\u6267\u884C\u521B\u5EFA\u65B0\u6536\u636E\u7684\u64CD\u4F5C\uFF0C\n        // \u8BE5\u64CD\u4F5C\u586B\u5145\u73ED\u6B21\u3001\u6536\u94F6\u5458\u548C\u5176\u4ED6\u4FE1\u606F\n        ON INIT createReceipt()\n        // \u6BCF60\u79D2\u5E94\u7528\u4E00\u6B21\n        ON SCHEDULE PERIOD 60 FIXED apply(); \n;\n"})})]})}function x(e={}){let{wrapper:n}={...(0,l.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(h,{...e})}):h(e)}},28453:function(e,n,c){c.d(n,{R:()=>s,x:()=>d});var i=c(96540);let r={},l=i.createContext(r);function s(e){let n=i.useContext(l);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:s(e.components),i.createElement(l.Provider,{value:n},e.children)}}}]);