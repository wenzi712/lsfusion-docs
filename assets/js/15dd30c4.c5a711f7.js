"use strict";(self.webpackChunkls_fusion_docs=self.webpackChunkls_fusion_docs||[]).push([["95550"],{65636:function(e,n,r){r.r(n),r.d(n,{metadata:()=>c,default:()=>h,frontMatter:()=>l,contentTitle:()=>d,toc:()=>t,assets:()=>o});var c=JSON.parse('{"id":"EXTERNAL_operator","title":"EXTERNAL \u64CD\u4F5C\u7B26","description":"EXTERNAL \u64CD\u4F5C\u7B26\u521B\u5EFA\u4E00\u4E2A\u52A8\u4F5C\uFF0C\u5B9E\u73B0\u8BBF\u95EE\u5916\u90E8\u7CFB\u7EDF\u7684\u529F\u80FD\u3002","source":"@site/i18n/zh-CN/docusaurus-plugin-content-docs/current/EXTERNAL_operator.md","sourceDirName":".","slug":"/EXTERNAL_operator","permalink":"/EXTERNAL_operator","draft":false,"unlisted":false,"editUrl":"https://github.com/lsfusion/platform/edit/master/docs/zh-CN/EXTERNAL_operator.md","tags":[],"version":"current","lastUpdatedAt":null,"frontMatter":{"title":"EXTERNAL \u64CD\u4F5C\u7B26"},"sidebar":"learn","previous":{"title":"EXPORT \u64CD\u4F5C\u7B26","permalink":"/EXPORT_operator"},"next":{"title":"FOR \u64CD\u4F5C\u7B26","permalink":"/FOR_operator"}}'),s=r(74848),i=r(28453);let l={title:"EXTERNAL \u64CD\u4F5C\u7B26"},d,o={},t=[{value:"\u8BED\u6CD5",id:"\u8BED\u6CD5",level:3},{value:"\u63CF\u8FF0",id:"\u63CF\u8FF0",level:3},{value:"\u53C2\u6570",id:"\u53C2\u6570",level:3},{value:"\u793A\u4F8B",id:"\u793A\u4F8B",level:3}];function x(e){let n={a:"a",code:"code",h3:"h3",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"EXTERNAL"})," \u64CD\u4F5C\u7B26\u521B\u5EFA\u4E00\u4E2A",(0,s.jsx)(n.a,{href:"/Actions",children:"\u52A8\u4F5C"}),"\uFF0C\u5B9E\u73B0",(0,s.jsx)(n.a,{href:"/Access_to_an_external_system_EXTERNAL",children:"\u8BBF\u95EE\u5916\u90E8\u7CFB\u7EDF"}),"\u7684\u529F\u80FD\u3002"]}),"\n",(0,s.jsx)(n.h3,{id:"\u8BED\u6CD5",children:"\u8BED\u6CD5"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"EXTERNAL externalCall [PARAMS paramExpr1, ..., paramExprN] [TO propertyId1. ..., propertyIdM]\n"})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"externalCall"})," - \u5916\u90E8\u8C03\u7528\uFF0C\u7531\u4EE5\u4E0B\u8BED\u6CD5\u4E4B\u4E00\u5B9A\u4E49\uFF1A"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"HTTP [requestType] connectionStrExpr httpOption1 ... httpOptionN\r\nTCP [CLIENT] connectionStrExpr\r\nUDP [CLIENT] connectionStrExpr\r\nSQL connectionStrExpr EXEC execStrExpr\r\nLSF connectionStrExpr lsfExecType execStrExpr\n"})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"HTTP"})," \u7684\u9009\u9879\u6309\u4EFB\u610F\u987A\u5E8F\u4E00\u4E2A\u63A5\u4E00\u4E2A\u5217\u51FA\uFF0C\u7528\u7A7A\u683C\u6216\u6362\u884C\u7B26\u5206\u9694\uFF1A"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"httpOption1 ... httpOptionN\n"})}),"\n",(0,s.jsx)(n.p,{children:"\u652F\u6301\u4EE5\u4E0B\u9009\u9879\u96C6\uFF08\u6BCF\u4E2A\u9009\u9879\u7684\u8BED\u6CD5\u5728\u5355\u72EC\u4E00\u884C\u4E2D\u8868\u793A\uFF09\uFF1A"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"BODYURL bodyStrExpr\r\nHEADERS headersPropertyId\r\nCOOKIES cookiesPropertyId\r\nHEADERSTO headersToPropertyId\r\nCOOKIESTO cookiesToPropertyId\r\nNOENCODE\n"})}),"\n",(0,s.jsx)(n.h3,{id:"\u63CF\u8FF0",children:"\u63CF\u8FF0"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"EXTERNAL"})," \u64CD\u4F5C\u7B26\u521B\u5EFA\u4E00\u4E2A\u5411\u5916\u90E8\u7CFB\u7EDF\u53D1\u51FA\u8BF7\u6C42\u7684\u52A8\u4F5C\u3002"]}),"\n",(0,s.jsx)(n.h3,{id:"\u53C2\u6570",children:"\u53C2\u6570"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.code,{children:"HTTP"})}),"\n",(0,s.jsx)(n.p,{children:"\u5173\u952E\u5B57\u3002\u6307\u5B9A\u64CD\u4F5C\u7B26\u6B63\u5728\u6267\u884C Web \u670D\u52A1\u5668 HTTP \u8BF7\u6C42\u3002"}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.code,{children:"requestType"})}),"\n",(0,s.jsxs)(n.p,{children:["\u5173\u952E\u5B57\u3002\u5B9A\u4E49 HTTP \u8BF7\u6C42\u7684",(0,s.jsx)(n.a,{href:"https://en.wikipedia.org/wiki/Hypertext_Transfer_Protocol#Request_methods",children:"\u65B9\u6CD5"}),"\uFF1A"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.code,{children:"POST"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.code,{children:"GET"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.code,{children:"PUT"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.code,{children:"DELETE"})}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:["\u9ED8\u8BA4\u503C\u4E3A ",(0,s.jsx)(n.code,{children:"POST"}),"\u3002"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.code,{children:"TCP"})}),"\n",(0,s.jsx)(n.p,{children:"\u5173\u952E\u5B57\u3002\u6307\u5B9A\u64CD\u4F5C\u7B26\u6B63\u5728\u6267\u884C TCP \u8BF7\u6C42\u3002"}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.code,{children:"UDP"})}),"\n",(0,s.jsx)(n.p,{children:"\u5173\u952E\u5B57\u3002\u6307\u5B9A\u64CD\u4F5C\u7B26\u6B63\u5728\u6267\u884C UDP \u8BF7\u6C42\u3002"}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.code,{children:"CLIENT"})}),"\n",(0,s.jsx)(n.p,{children:"\u5173\u952E\u5B57\u3002\u6307\u5B9A\u8BF7\u6C42\u5728\u5BA2\u6237\u7AEF\u6267\u884C\u3002\u9ED8\u8BA4\u60C5\u51B5\u4E0B\uFF0C\u8BF7\u6C42\u5728\u670D\u52A1\u5668\u7AEF\u6267\u884C\u3002"}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.code,{children:"SQL"})}),"\n",(0,s.jsx)(n.p,{children:"\u5173\u952E\u5B57\u3002\u6307\u5B9A\u64CD\u4F5C\u7B26\u6267\u884C SQL \u670D\u52A1\u5668\u547D\u4EE4\u6216\u591A\u4E2A\u547D\u4EE4\u3002"}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.code,{children:"LSF"})}),"\n",(0,s.jsx)(n.p,{children:"\u5173\u952E\u5B57\u3002\u6307\u5B9A\u64CD\u4F5C\u7B26\u6267\u884C\u53E6\u4E00\u4E2A lsFusion \u670D\u52A1\u5668\u7684\u52A8\u4F5C\u3002"}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.code,{children:"connectionStrExpr"})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.a,{href:"/Expression",children:"\u8868\u8FBE\u5F0F"}),"\u3002",(0,s.jsx)(n.code,{children:"HTTP"}),"\uFF1Ahttp \u8BF7\u6C42\u5B57\u7B26\u4E32\u3002",(0,s.jsx)(n.code,{children:"SQL"}),"\uFF1ADBMS \u8FDE\u63A5\u5B57\u7B26\u4E32\u3002",(0,s.jsx)(n.code,{children:"LSF"}),"\uFF1AlsFusion \u670D\u52A1\u5668\uFF08\u5E94\u7528\u7A0B\u5E8F\uFF09\u7684 URL\u3002"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.code,{children:"bodyStrExpr"})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.a,{href:"/Expression",children:"\u8868\u8FBE\u5F0F"}),"\u3002HTTP \u8BF7\u6C42\u5B57\u7B26\u4E32\u5728 BODY \u4E2D\u7684\u5EF6\u7EED\u90E8\u5206\u3002\u5F53 BODY \u5305\u542B\u591A\u4E2A\u53C2\u6570\u65F6\u76F8\u5173\u3002\u5982\u679C\u672A\u6307\u5B9A\uFF0C\u5219\u53C2\u6570\u4EE5 multipart \u683C\u5F0F\u4F20\u9012\u3002"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.code,{children:"headersPropertyId"})}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.code,{children:"headersToPropertyId"})}),"\n",(0,s.jsxs)(n.p,{children:["\u5305\u542B\u8BF7\u6C42\u5934\u7684",(0,s.jsx)(n.a,{href:"/IDs#propertyid",children:"\u5C5E\u6027 ID"}),"\u3002\u8BE5\u5C5E\u6027\u5FC5\u987B\u6070\u597D\u6709\u4E00\u4E2A\u53C2\u6570\uFF1A\u8BF7\u6C42\u5934\u7684\u540D\u79F0\u3002\u6B64\u53C2\u6570\u5FC5\u987B\u5C5E\u4E8E\u5B57\u7B26\u4E32\u7C7B\u3002\u5982\u679C\u672A\u6307\u5B9A\u8BE5\u5C5E\u6027\uFF0C\u5219\u5FFD\u7565/\u4E0D\u8BBE\u7F6E\u8BF7\u6C42\u5934\u3002"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.code,{children:"cookiesPropertyId"})}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.code,{children:"cookiesToPropertyId"})}),"\n",(0,s.jsxs)(n.p,{children:["\u5305\u542B\u8BF7\u6C42 cookie \u7684",(0,s.jsx)(n.a,{href:"/IDs#propertyid",children:"\u5C5E\u6027 ID"}),"\u3002\u8BE5\u5C5E\u6027\u5FC5\u987B\u6070\u597D\u6709\u4E00\u4E2A\u53C2\u6570\uFF1Acookie \u7684\u540D\u79F0\u3002\u6B64\u53C2\u6570\u5FC5\u987B\u5C5E\u4E8E\u5B57\u7B26\u4E32\u7C7B\u3002\u5982\u679C\u672A\u6307\u5B9A\u8BE5\u5C5E\u6027\uFF0C\u5219\u5FFD\u7565/\u4E0D\u8BBE\u7F6E cookie\u3002"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.code,{children:"NOENCODE"})}),"\n",(0,s.jsx)(n.p,{children:"\u5173\u952E\u5B57\u3002\u6307\u5B9A\u67E5\u8BE2\u5B57\u7B26\u4E32\u4E0D\u4F1A\u4EE5 url \u683C\u5F0F\u8FDB\u884C\u7F16\u7801\uFF08\u5047\u8BBE\u5B83\u4E4B\u524D\u5DF2\u7ECF\u88AB\u7F16\u7801\uFF09\u3002"}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.code,{children:"lsfExecType"})}),"\n",(0,s.jsxs)(n.p,{children:["\u5173\u952E\u5B57\u3002\u6307\u5B9A",(0,s.jsx)(n.a,{href:"/Access_from_an_external_system#actiontype",children:"\u5B9A\u4E49\u52A8\u4F5C\u7684\u65B9\u5F0F"}),"\uFF1A"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"EXEC"})," \u2013 \u6307\u5B9A\u52A8\u4F5C\u7684\u540D\u79F0\u3002"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"EVAL"})," \u2013 \u5728 ",(0,s.jsx)(n.strong,{children:"lsFusion"})," \u8BED\u8A00\u4E2D\u6307\u5B9A\u52A8\u4F5C\u7684\u4EE3\u7801\u3002\u5047\u8BBE\u6B64\u4EE3\u7801\u5305\u542B\u4E00\u4E2A\u540D\u4E3A ",(0,s.jsx)(n.code,{children:"run"})," \u7684\u52A8\u4F5C\u58F0\u660E\u3002\u8FD9\u5C06\u662F\u88AB\u8C03\u7528\u7684\u52A8\u4F5C\u3002"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"EVAL ACTION"})," \u2013 \u6307\u5B9A ",(0,s.jsx)(n.strong,{children:"lsFusion"})," \u8BED\u8A00\u4E2D\u7684\u52A8\u4F5C\u4EE3\u7801\u3002\u8981\u8BBF\u95EE\u53C2\u6570\uFF0C\u8BF7\u4F7F\u7528\u7279\u6B8A\u5B57\u7B26 ",(0,s.jsx)(n.code,{children:"$"})," \u548C\u53C2\u6570\u7F16\u53F7\uFF08\u4ECE ",(0,s.jsx)(n.code,{children:"1"})," \u5F00\u59CB\uFF09\u3002"]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.code,{children:"execStrExpr"})}),"\n",(0,s.jsxs)(n.p,{children:["\u8868\u8FBE\u5F0F\u3002",(0,s.jsx)(n.code,{children:"SQL"}),"\uFF1ASQL \u67E5\u8BE2\u547D\u4EE4\uFF08\u591A\u4E2A\uFF09\u3002",(0,s.jsx)(n.code,{children:"LSF"}),"\uFF1A\u52A8\u4F5C\u7684\u540D\u79F0\u6216\u4EE3\u7801\uFF0C\u53D6\u51B3\u4E8E\u52A8\u4F5C\u7684\u5B9A\u4E49\u65B9\u5F0F\u3002"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.code,{children:"paramExpr1, ..., paramExprN"})}),"\n",(0,s.jsx)(n.p,{children:"\u8868\u8FBE\u5F0F\u5217\u8868\uFF0C\u5176\u503C\u5C06\u7528\u4F5C\u8C03\u7528\u53C2\u6570\u3002"}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.code,{children:"propertyId1, ..., propertyIdM"})}),"\n",(0,s.jsx)(n.p,{children:"\u5C5E\u6027 ID \u5217\u8868\uFF08\u4E0D\u5E26\u53C2\u6570\uFF09\uFF0C\u7ED3\u679C\u5C06\u5199\u5165\u8FD9\u4E9B\u5C5E\u6027\u3002"}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"\u793A\u4F8B",children:"\u793A\u4F8B"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lsf",children:"testExportFile = DATA FILE ();\r\n\r\nexternalHTTP()  {\r\n    EXTERNAL HTTP GET 'https://www.cs.cmu.edu/~chuck/lennapg/len_std.jpg' TO exportFile;\r\n    open(exportFile());\r\n    // \u82B1\u62EC\u53F7\u88AB\u8F6C\u4E49\uFF0C\u56E0\u4E3A\u5B83\u4EEC\u7528\u4E8E\u56FD\u9645\u5316\r\n    EXTERNAL HTTP 'http://tryonline.lsfusion.org/exec?action=getExamples' \r\n             PARAMS JSONFILE('\\{\"mode\"=1,\"locale\"=\"en\"\\}') TO exportFile; \r\n    IMPORT FROM exportFile() FIELDS () TEXT caption, TEXT code DO\r\n        MESSAGE '\u793A\u4F8B : ' + caption + ', \u4EE3\u7801 : ' + code;\r\n\r\n    // \u5C06\u7B2C\u4E8C\u4E2A\u548C\u7B2C\u4E09\u4E2A\u53C2\u6570\u4EE5 url \u7F16\u7801\u65B9\u5F0F\u4F20\u9012\u5230 BODY\r\n    EXTERNAL HTTP 'http://tryonline.lsfusion.org/exec?action=doSomething&someprm=$1' \r\n             BODYURL 'otherprm=$2&andonemore=$3' PARAMS 1,2,'3'; \r\n}\r\nexternalSQL ()  {\r\n    // \u83B7\u53D6\u6240\u6709\u540D\u79F0\u5305\u542B meat \u7684\u4EA7\u54C1\u7684\u6761\u5F62\u7801\r\n    EXPORT TABLE FROM bc=barcode(Article a) WHERE name(a) LIKE '%Meat%';\r\n    // \u8BFB\u53D6\u5DF2\u8BFB\u53D6\u6761\u5F62\u7801\u7684\u4EF7\u683C\r\n    EXTERNAL SQL 'jdbc:mysql://$1/test?user=root&password=' \r\n             EXEC 'select price AS pc, articles.barcode AS brc from $2 x JOIN articles ON x.bc=articles.barcode' \r\n             PARAMS 'localhost', exportFile() \r\n             TO exportFile; \r\n\r\n    // \u4E3A\u6240\u6709\u5177\u6709\u63A5\u6536\u5230\u7684\u6761\u5F62\u7801\u7684\u4EA7\u54C1\u5199\u5165\u4EF7\u683C\r\n    LOCAL price = INTEGER (INTEGER);\r\n    LOCAL barcode = STRING[30] (INTEGER);\r\n    IMPORT FROM exportFile() TO price=pc,barcode=brc;\r\n    FOR barcode(Article a) = barcode(INTEGER i) DO\r\n        price(a) <- price(i);\r\n}\r\nexternalLSF()  {\r\n    EXTERNAL LSF 'http://localhost:7651' EXEC 'System.testAction[]';\r\n};\n"})})]})}function h(e={}){let{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(x,{...e})}):x(e)}},28453:function(e,n,r){r.d(n,{R:()=>l,x:()=>d});var c=r(96540);let s={},i=c.createContext(s);function l(e){let n=c.useContext(i);return c.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:l(e.components),c.createElement(i.Provider,{value:n},e.children)}}}]);